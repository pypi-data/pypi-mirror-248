"use strict";(self.webpackChunklino_react=self.webpackChunklino_react||[]).push([[395],{3670:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{LinoBbar:()=>LinoBbar,name:()=>name});var _LinoBbar_css__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2158),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1914),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2972),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),_Base__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9281),_Base__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_Base__WEBPACK_IMPORTED_MODULE_2__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6552);const name="LinoBbar";let ex;const exModulePromises=ex={prButton:Promise.all([__webpack_require__.e(7353),__webpack_require__.e(5155),__webpack_require__.e(7320),__webpack_require__.e(2109),__webpack_require__.e(6839),__webpack_require__.e(968)]).then(__webpack_require__.bind(__webpack_require__,4917)),prSplitButton:Promise.all([__webpack_require__.e(9880),__webpack_require__.e(7353),__webpack_require__.e(5155),__webpack_require__.e(7320),__webpack_require__.e(2109),__webpack_require__.e(4873),__webpack_require__.e(6839),__webpack_require__.e(5419)]).then(__webpack_require__.bind(__webpack_require__,5253))};(0,_Base__WEBPACK_IMPORTED_MODULE_2__.RegisterImportPool)(ex);class LinoBbar extends _Base__WEBPACK_IMPORTED_MODULE_2__.Component{constructor(e){super(e),this.state={...this.state,overflowShow:!1},this.action2buttonProps=this.action2buttonProps.bind(this),this.render_buttons=this.render_buttons.bind(this),this.render_overflow=this.render_overflow.bind(this),this.render_actionbutton=this.render_actionbutton.bind(this),this.render_splitActionButton=this.render_splitActionButton.bind(this),this.runAction=this.runAction.bind(this)}runAction(action,tba,event){if(tba.js_handler)return void eval(tba.js_handler);let runnable={an:action.an,actorId:this.context.static.actorData.id};action.hasOwnProperty("actor")&&(runnable.actorId=action.actor),action.select_rows&&(runnable.sr=this.context.sr),event.ctrlKey&&(runnable.clickCatch=!0),this.context.controller.actionHandler.runAction(runnable)}render_overflow(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(this.ex.prButton.Button,{icon:"pi pi-ellipsis-v",onClick:this.setState({overflowShow:!this.state.overflowShow})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{})]})}action2buttonProps(e,t,s){let i={label:t.label};return t.icon?(i.icon=t.icon,i.label=s?void 0:i.label):t.button_text&&(i.label=t.button_text),i.disabled=t.select_rows&&this.context.sr&&0===this.context.sr.length||this.context.controller.disabled(t.an)||"submit_detail"===t.an&&!this.context.editing_mode||this.props.onSide&&!t.show_in_side_toolbar&&"submit_detail"!==t.an||this.props.nonCollapsibles&&!t.never_collapse,i.tooltip=e.help_text||t.label,i.tooltipOptions={position:this.props.onSide?"left":"bottom"},i}render_actionbutton(e){let{action:t}=this.context.controller.actionHandler.getAction(e.an,!1);if(t){let s=this.action2buttonProps(e,t,!0);if(s.disabled)return;return(0,react__WEBPACK_IMPORTED_MODULE_1__.createElement)(this.ex.prButton.Button,{...s,key:Math.random(),onClick:s=>this.runAction(t,e,s)})}}render_splitActionButton(e){let t=e.menu.map((e=>this.context.controller.actionHandler.getAction(e.an,!1).action));if(t[0]){let s=t.map(((t,s)=>{let i=this.action2buttonProps(e.menu[s],t,0===s);return i.command=i=>this.runAction(t,e.menu[s],i),i})),i=s[0];if(i.disabled)return;let n=i.command;return delete i.command,1===s.length?(0,react__WEBPACK_IMPORTED_MODULE_1__.createElement)(this.ex.prButton.Button,{...i,key:Math.random(),onClick:n}):(0,react__WEBPACK_IMPORTED_MODULE_1__.createElement)(this.ex.prSplitButton.SplitButton,{...i,key:Math.random(),model:s.slice(1),onClick:n})}}render_buttons(){let e=this.context.static.actorData.actions_list.find((e=>e.an===this.props.an));if(!e)return;let t=e.toolbarActions;return t&&t.map(((e,t)=>e.combo?this.render_splitActionButton(e):this.render_actionbutton(e)))}render(){return this.state.ready?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[this.props.resetable&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(this.ex.prButton.Button,{icon:"pi pi-refresh",onClick:e=>this.context.controller.actionHandler.reload(),tooltip:"Reload this view from the underlying database",tooltipOptions:{position:"bottom"}}),this.render_buttons()]}):null}}LinoBbar.requiredModules=["prButton","prSplitButton"],LinoBbar.iPool=ex,LinoBbar.contextType=_Base__WEBPACK_IMPORTED_MODULE_2__.URLContextType,LinoBbar.propTypes={an:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string.isRequired,nonCollapsibles:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool,onSide:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool,resetable:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool},LinoBbar.defaultProps={nonCollapsibles:!1,onSide:!1,resetable:!0}},8708:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>DialogFactory});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1914),prop_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2972),prop_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__),_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1300),_Base__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9281),_Base__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_Base__WEBPACK_IMPORTED_MODULE_2__),_SiteContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4069),_LinoBbar__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3670),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6552);const name="LinoDialog";let ex;const exModulePromises=ex={queryString:Promise.all([__webpack_require__.e(1473),__webpack_require__.e(6521)]).then(__webpack_require__.t.bind(__webpack_require__,5198,19)),prButton:Promise.all([__webpack_require__.e(7353),__webpack_require__.e(5155),__webpack_require__.e(7320),__webpack_require__.e(2109),__webpack_require__.e(6839),__webpack_require__.e(968)]).then(__webpack_require__.bind(__webpack_require__,4917)),prDialog:Promise.all([__webpack_require__.e(9880),__webpack_require__.e(5155),__webpack_require__.e(7320),__webpack_require__.e(4873),__webpack_require__.e(5092),__webpack_require__.e(9371)]).then(__webpack_require__.bind(__webpack_require__,7295)),u:Promise.resolve().then(__webpack_require__.bind(__webpack_require__,765)),lc:Promise.all([__webpack_require__.e(1295),__webpack_require__.e(3486),__webpack_require__.e(1473),__webpack_require__.e(7353),__webpack_require__.e(532),__webpack_require__.e(6125),__webpack_require__.e(5155),__webpack_require__.e(7320),__webpack_require__.e(2109),__webpack_require__.e(4873),__webpack_require__.e(6839),__webpack_require__.e(488),__webpack_require__.e(8934),__webpack_require__.e(2071),__webpack_require__.e(9158),__webpack_require__.e(6622)]).then(__webpack_require__.bind(__webpack_require__,3900)),lwc:Promise.all([__webpack_require__.e(7353),__webpack_require__.e(5155),__webpack_require__.e(7320),__webpack_require__.e(2109),__webpack_require__.e(6839),__webpack_require__.e(6130)]).then(__webpack_require__.t.bind(__webpack_require__,2671,23))};(0,_Base__WEBPACK_IMPORTED_MODULE_2__.RegisterImportPool)(ex);class DialogFactory extends _Base__WEBPACK_IMPORTED_MODULE_2__.Component{constructor(e){super(e),this.state={...this.state,children:new Map,callbacks:new Map},this.dialogRefs={},this.create=this.create.bind(this),this.createCallback=this.createCallback.bind(this),this.remove=this.remove.bind(this),this.removeCallback=this.removeCallback.bind(this)}async create(e,t){let s=!(e.context.value.static.actorData&&e.context.value.static.actorData.id===t.actorId),i={factory:this,id:e.context.newSlug(),unknownActor:s},n={},r=`api/${t.actorId.split(".").join("/")}`;n.params={action_dialog:"insert"!==t.action.an,[_constants__WEBPACK_IMPORTED_MODULE_1__.URL_PARAM_DISPLAY_MODE]:_constants__WEBPACK_IMPORTED_MODULE_1__.DISPLAY_MODE_DETAIL,an:t.action.an},n.params.action_dialog||(n.params[_constants__WEBPACK_IMPORTED_MODULE_1__.URL_PARAM_WINDOW_TYPE]=_constants__WEBPACK_IMPORTED_MODULE_1__.WINDOW_TYPE_INSERT),n.status=t.status||{},n.parentContext=e.context,s?n.path=`/${r}`:(n.inherit=!0,i.contextController=e.context),i.urlContextProps=n;let a={executeArgs:t},o={data:{disabled_fields:{}}},_=t.status;if(_&&("verify"===t.action.an?Object.assign(o.data,{email:this.APP.state.user_settings.email,verification_code:""}):_.data_record?o=_.data_record:_.field_values&&Object.assign(o.data,_.field_values)),"insert"===t.action.an){if(!_||!_.data_record){this.props.APP.setLoadMask();let i=s?{...t.preprocessedStack}:e.defaultStaticParams();Object.assign(i,{fmt:"json"}),o=await e.silentFetch({path:`${r}/-99999?${this.ex.queryString.stringify(i)}`}),this.props.APP.unsetLoadMask()}n.params.sr=[-99999]}o.title||(o.title=o.data.title||t.action.label),a.data=o,this.state.children.set(i.id,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(DialogContext,{...i,ref:e=>this.dialogRefs[i.id]=e,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(LinoDialog,{...a})},i.id)),this.setState({}),t.preprocessedStack.callback&&"postWindowInit"===t.preprocessedStack.callback.callbackType&&t.preprocessedStack.callback.callback(i.id)}createWebcamDialog(e,t,s){const i=e.newSlug();this.state.children.set(i,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(LinoWebCamDialog,{factory:this,holderId:s,id:i,preprocessedStack:t},i)),this.setState({})}createCallback(e={}){e.factory=this,this.state.callbacks.set(e.id,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(LinoCallbackDialog,{...e},e.id)),this.setState({})}remove(e){this.state.children.delete(e),delete this.dialogRefs[e],this.setState({})}removeCallback(e){this.state.callbacks.delete(e),this.setState({})}render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[Array.from(this.state.children.values()),Array.from(this.state.callbacks.values())]})}}function onKeyDown(e,t=!1){return s=>{if(s.stopPropagation(),(s.ctrlKey||s.metaKey)&&83===s.keyCode)t||e.context.action_dialog||(s.preventDefault(),s.stopPropagation(),e.context.controller.actionHandler.submit({}));else if(13===s.keyCode){let t=e.dialogRef.current.getFooter().getElementsByClassName("l-confirm-yes")[0];t&&t.click()}else if(27===s.keyCode){let t=e.dialogRef.current.getFooter().getElementsByClassName("l-confirm-no")[0];t&&t.click()}}}function ConfirmButtons(e){const t=(0,_Base__WEBPACK_IMPORTED_MODULE_2__.getExReady)(ex,["prButton"]);return t.ready?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(t.prButton.Button,{className:"l-confirm-yes",label:e.agreeLabel,onClick:e.agree}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(t.prButton.Button,{className:"l-confirm-no",label:e.disagreeLabel,onClick:e.disagree})]}):null}DialogFactory.requiredModules=["queryString","u"],DialogFactory.iPool=ex,DialogFactory.propTypes={APP:prop_types__WEBPACK_IMPORTED_MODULE_6___default().object.isRequired},ConfirmButtons.propTypes={agree:prop_types__WEBPACK_IMPORTED_MODULE_6___default().func.isRequired,agreeLabel:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,disagree:prop_types__WEBPACK_IMPORTED_MODULE_6___default().func.isRequired,disagreeLabel:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string},ConfirmButtons.defaultProps={agreeLabel:"OK",disagreeLabel:"Cancel"};class DialogContext extends react__WEBPACK_IMPORTED_MODULE_0__.Component{attachContextRoot(e){e&&(this.dialog=e,e.root=this)}render(){let e=react__WEBPACK_IMPORTED_MODULE_0__.cloneElement(this.props.children,{ref:e=>this.attachContextRoot(e)});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_SiteContext__WEBPACK_IMPORTED_MODULE_3__.URLContext,{...this.props.urlContextProps,simple:!0,children:e})}}function LinoWebCamDialog(e){const[t,s]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!1),i=(0,_Base__WEBPACK_IMPORTED_MODULE_2__.getExReady)(ex,["prDialog","lwc"],(t=>{const i=()=>{e.holderId in e.factory.dialogRefs&&e.factory.dialogRefs[e.holderId].dialog&&e.factory.dialogRefs[e.holderId].dialog.dialogRef.current?s(!0):setTimeout(i,100)};return i(),t})),[n,r]=react__WEBPACK_IMPORTED_MODULE_0__.useState({height:null,width:null}),a=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((t=>{e.preprocessedStack.image=t;const s=e.factory.dialogRefs[e.holderId].dialog,i=s.dialogRef.current.contentEl.offsetWidth;let n=`<img src="${t}" style="max-width: ${Math.round(.9*i)}px; display: block; margin: auto; max-height: 50vh;"/>`;s.setState({beforeContent:n}),e.factory.remove(e.id)}));return t?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(i.prDialog.Dialog,{closable:!0,closeOnEscape:!0,draggable:!1,header:"Capture Image",maximizable:!1,maximized:!0,modal:!0,onHide:t=>e.factory.remove(e.id),resizable:!1,visible:!0,children:null===n.height?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{ref:e=>{e&&r({height:e.parentElement.offsetHeight,width:e.parentElement.offsetWidth})}}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"vertical-center",style:{textAlign:"center"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(i.lwc.LinoWebCam,{captureDone:a,height:Math.round(.9*n.height),width:Math.round(.9*n.width)})})}):null}function LinoCallbackDialog(props){const dialogRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef(),localEx=(0,_Base__WEBPACK_IMPORTED_MODULE_2__.getExReady)(ex,["prButton","prDialog"]);return localEx.ready?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{onKeyDown:onKeyDown({dialogRef},!0),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(localEx.prDialog.Dialog,{closable:!1,closeOnEscape:!1,footer:props.simple?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ConfirmButtons,{agree:props.agree,disagree:props.disagree}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:props.xcallback.buttons.map((button=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(localEx.prButton.Button,{className:`p-button-secondary l-confirm-${button[0]}`,label:button[1],onClick:()=>{props.factory.removeCallback(props.id),eval(props.xcallback[button[0]+"_resendEvalJs"])}},button[0])))}),header:props.title,maximizable:!0,modal:!0,onHide:e=>props.factory.removeCallback(props.id),ref:dialogRef,visible:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{dangerouslySetInnerHTML:{__html:props.message},ref:e=>{e&&e.focus()},tabIndex:0})})}):null}DialogContext.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_6___default().element.isRequired,factory:prop_types__WEBPACK_IMPORTED_MODULE_6___default().instanceOf(DialogFactory).isRequired,id:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string.isRequired,unknownActor:prop_types__WEBPACK_IMPORTED_MODULE_6___default().bool,urlContextProps:prop_types__WEBPACK_IMPORTED_MODULE_6___default().object.isRequired},DialogContext.defaultProps={unknownActor:!1},LinoWebCamDialog.propTypes={factory:prop_types__WEBPACK_IMPORTED_MODULE_6___default().instanceOf(DialogFactory).isRequired,holderId:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string.isRequired,id:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string.isRequired,preprocessedStack:prop_types__WEBPACK_IMPORTED_MODULE_6___default().object.isRequired},LinoCallbackDialog.propTypes={agree:(e,...t)=>{if(e.simple)return prop_types__WEBPACK_IMPORTED_MODULE_6___default().func.isRequired(e,...t)},disagree:(e,...t)=>{if(e.simple)return prop_types__WEBPACK_IMPORTED_MODULE_6___default().func.isRequired(e,...t)},factory:prop_types__WEBPACK_IMPORTED_MODULE_6___default().instanceOf(DialogFactory).isRequired,id:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string.isRequired,message:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string.isRequired,simple:prop_types__WEBPACK_IMPORTED_MODULE_6___default().bool,title:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string.isRequired,xcallback:(e,...t)=>{if(!e.simple)return prop_types__WEBPACK_IMPORTED_MODULE_6___default().object.isRequired(e,...t)}},LinoCallbackDialog.defaultProps={simple:!1};class LinoDialog extends _Base__WEBPACK_IMPORTED_MODULE_2__.Component{constructor(e){super(e),this.state={...this.state,actionMeta:null,afterContent:e.afterContent,beforeContent:e.beforeContent,context:null},this.dialogRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef(),this.close=this.close.bind(this),this.forceClose=this.forceClose.bind(this),this.ok=this.ok.bind(this),this.renderDialogStyle=this.renderDialogStyle.bind(this),this.renderDialogContentStyle=this.renderDialogContentStyle.bind(this)}async prepare(){this.DataContext=new _SiteContext__WEBPACK_IMPORTED_MODULE_3__.DataContext({root:this,context:this.props.data,next:e=>{this.state.context=e.mutableContext;let t=this.context.controller;t.contextType=_constants__WEBPACK_IMPORTED_MODULE_1__.CONTEXT_TYPE_ACTION,t.attachDataContext(this.DataContext);let s={...this.context.static.actorData.actions_list.find((e=>e.an===this.props.executeArgs.action.an))};s.windowSize=this.context.controller.APP.state.site_data.form_panels[s.window_layout].window_size,this.setState({actionMeta:s})}})}forceClose(){this.root.props.factory.remove(this.root.props.id)}close(e){this.context.controller.isModified()?this.context.controller.actionHandler.discardModDConfirm({agree:e=>this.root.props.factory.remove(this.root.props.id)}):this.root.props.factory.remove(this.root.props.id)}ok(){this.context.controller.actionHandler.executeAction(this.props.executeArgs)}renderDialogContentStyle(e){return e&&e[1]&&"auto"!==e[1]?{height:3*e[1]+"ch"}:{}}renderDialogStyle(e){return e&&e[0]?{width:Math.floor(1.5*e[0])+"ch"}:{}}render(){return this.state.ready?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_SiteContext__WEBPACK_IMPORTED_MODULE_3__.DataContext.Context.Provider,{value:this.state.context,children:null!==this.state.actionMeta&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{onKeyDown:onKeyDown(this),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(this.ex.prDialog.Dialog,{closable:this.props.closable,closeOnEscape:this.props.closeOnEscape,contentStyle:this.renderDialogContentStyle(this.state.actionMeta.windowSize),footer:this.context.action_dialog?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ConfirmButtons,{agree:this.ok,disagree:this.close}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"l-bbar",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_LinoBbar__WEBPACK_IMPORTED_MODULE_4__.LinoBbar,{an:this.props.executeArgs.action.an,resetable:!1})}),header:this.state.context.title,maximizable:!0,modal:!1,onHide:this.close,ref:this.dialogRef,style:this.renderDialogStyle(this.state.actionMeta.windowSize),visible:!0,children:[this.state.beforeContent&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.beforeContent}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(this.ex.lc.LinoLayout,{editing_mode:!0,window_layout:this.state.actionMeta.window_layout,wt:this.context[_constants__WEBPACK_IMPORTED_MODULE_1__.URL_PARAM_WINDOW_TYPE]}),this.state.afterContent&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.afterContent}})]})})}):null}}LinoDialog.requiredModules=["prDialog","lc"],LinoDialog.iPool=ex,LinoDialog.contextType=_Base__WEBPACK_IMPORTED_MODULE_2__.URLContextType,LinoDialog.propsTypes={afterContent:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,beforeContent:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,closable:prop_types__WEBPACK_IMPORTED_MODULE_6___default().bool,closeOnEscape:prop_types__WEBPACK_IMPORTED_MODULE_6___default().bool,data:prop_types__WEBPACK_IMPORTED_MODULE_6___default().object.isRequired,executeArgs:prop_types__WEBPACK_IMPORTED_MODULE_6___default().object.isRequired},LinoDialog.defaultProps={afterContent:null,beforeContent:null,closeOnEscape:!1,closable:!0}},552:(e,t,s)=>{s.r(t),s.d(t,{LinoLoadMask:()=>c,LinoProgressBar:()=>u,LoadingMask:()=>d,name:()=>o});s(1914);var i=s(2972),n=s.n(i),r=s(9281),a=s(6552);const o="LoadingMask";let _;const l=_={prProgressSpinner:Promise.all([s.e(9880),s.e(5155)]).then(s.bind(s,8169)),prProgressBar:Promise.all([s.e(9880),s.e(5155)]).then(s.bind(s,1981))};function c(e){const t=(0,r.getExReady)(_,["prProgressSpinner"]);return t.ready?(0,a.jsx)("div",{style:{height:"100vh",width:"100vw",background:"#1b2c3159",textAlign:"center",position:"fixed",top:"0",left:"0",bottom:"0",right:"0",zIndex:"99999"},children:(0,a.jsx)(t.prProgressSpinner.ProgressSpinner,{animationDuration:"1s",className:"vertical-center",strokeWidth:"50",style:{borderRadius:"50%",overflow:"hidden",width:"150px",height:"150px"}})}):null}(0,r.RegisterImportPool)(l);class d extends r.Component{render(){if(!this.state.ready)return null;const{masking:e,children:t,mask:s,fillHeight:i,backgroundColor:n}=this.props;let r={position:"relative"};return i?r.height="100%":r.overflow="hidden",(0,a.jsxs)("div",{style:r,children:[(0,a.jsx)("div",{className:"lino-loading-mask",style:{display:s?"block":"none",backgroundColor:n},children:(0,a.jsx)("div",{style:{position:"absolute",top:"50%",right:"50%",transform:"translate(50%,-50%)"},children:(0,a.jsx)(this.ex.prProgressSpinner.ProgressSpinner,{})})}),t]})}}function u(e){const t=(0,r.getExReady)(_,["prProgressBar"]);return t.ready?(0,a.jsx)(t.prProgressBar.ProgressBar,{mode:"indeterminate",className:e.loading?"":"lino-transparent",style:{height:"5px"}}):null}d.requiredModules=["prProgressSpinner"],d.iPool=_,d.propTypes={masking:n().element,mask:n().bool,fillHeight:n().bool,backgroundColor:n().string},d.defaultProps={fillHeight:!1,backgroundColor:"#007ad9"}},4069:(e,t,s)=>{s.r(t),s.d(t,{DataContext:()=>M,DialogFactory:()=>l.N,LinoLoadMask:()=>_.LinoLoadMask,LinoProgressBar:()=>_.LinoProgressBar,LoadingMask:()=>_.LoadingMask,RootURLContext:()=>D,URLContext:()=>C,name:()=>f});var i=s(1914),n=s(2972),r=s.n(n),a=s(1300),o=s(9281),_=s(552),l=s(8708),c=(s(5051),s(6552));let d;d={classNames:s.e(1473).then(s.t.bind(s,4507,23))};(0,o.RegisterImportPool)(d);class u extends o.Component{constructor(e){super(e),this.state={...this.state,activeIndex:null}}onMenuItemClick(e,t,s){if(t.disabled)return e.preventDefault(),!0;if(t.command)if(e.ctrlKey){let s=window.open(document.URL),i=0;const n=()=>{if(s.hasOwnProperty("App")&&!s.App.state.site_loading){let i=null;const n=e=>{e.every((e=>{if(null!==i)return!1;if(e.hasOwnProperty("items"))n(e.items);else if(e.id===t.id)return i=e,!1;return!0}))};n(s.App.state.menu_data),s.command=i.command,s.command({originalEvent:e,item:i})}else{if(i>20)return;i+=1,setTimeout((()=>n()),100)}};n()}else t.command({originalEvent:e,item:t});!t.items&&t.url||e.preventDefault(),s===this.state.activeIndex?this.setState({activeIndex:null}):this.setState({activeIndex:s}),this.props.onMenuItemClick&&this.props.onMenuItemClick({originalEvent:e,item:t})}render(){if(!this.state.ready)return null;let e=this.props.items&&this.props.items.map(((e,t)=>{if("is_a_seperator"===e)return(0,c.jsx)("hr",{},t);let s=this.state.activeIndex===t,i=this.ex.classNames.default(e.badgeStyleClass,{"active-menuitem":s});i+=" l-menuitem",e.id===this.props.activeElemId&&(i+=" l-linked-menu");let n=e.badge&&(0,c.jsx)("span",{className:"menuitem-badge",children:e.badge}),r=e.items&&(0,c.jsx)("i",{className:"pi pi-fw pi-angle-down menuitem-toggle-icon"});return(0,c.jsxs)("li",{className:i,id:e.id,children:[e.items&&!0===this.props.root&&(0,c.jsx)("div",{className:"arrow"}),(0,c.jsxs)("a",{href:e.url,onClick:s=>{this.onMenuItemClick(s,e,t)},target:e.target,children:[(0,c.jsx)("i",{className:e.icon}),(0,c.jsx)("span",{children:e.label}),r,n]}),(0,c.jsx)(u,{activeElemId:this.props.activeElemId,items:e.items,onMenuItemClick:this.props.onMenuItemClick})]},t)}));return e?(0,c.jsx)("ul",{className:this.props.className,children:e}):null}}u.requiredModules=["classNames"],u.iPool=d,u.defaultProps={className:null,items:null,onMenuItemClick:null,root:!1},u.propTypes={className:r().string,items:r().array,onMenuItemClick:r().func,root:r().bool};class p extends i.Component{constructor(e){super(e),this.state={navKeys:[37,38,39,13,40],activeNavKeys:!1},this.data={elemStore:window.App.data.miStore,activeElemId:null},this.onKeyDown=this.onKeyDown.bind(this),this.onMenuTrigger=this.onMenuTrigger.bind(this),this.walkDown=this.walkDown.bind(this),this.walkUp=this.walkUp.bind(this),this.walkRight=this.walkRight.bind(this),this.walkLeft=this.walkLeft.bind(this)}componentDidMount(){window.addEventListener("keydown",this.onKeyDown)}componentWillUnmount(){window.removeEventListener("keydown",this.onKeyDown)}matchId(e){return t=>t.id===e}walkDown(e,t){let s=t,i=e.slice(-1)[0];e.forEach((n=>{if(n!==i){let e=s.findIndex(this.matchId(n));s=s[e].items}else{let i=document.getElementById(n);i.classList.remove("active-menuitem");let r=s.findIndex(this.matchId(n));r<s.length-1?(i.classList.remove("l-selected-menu"),i=document.getElementById(s[r+1].id),i.classList.add("l-selected-menu"),i.getBoundingClientRect().bottom-window.innerHeight<0&&i.scrollIntoView({block:"center",behaviour:"smooth"})):e.length>1&&(document.getElementById(e.slice(-2)[0]).getElementsByTagName("a")[0].click(),i.classList.remove("l-selected-menu"),e=e.slice(0,-1),this.walkDown(e,t))}}))}walkUp(e,t){let s=t;e.forEach((i=>{if(i!==e.slice(-1)[0]){let e=s.findIndex(this.matchId(i));s=s[e].items}else{let n=document.getElementById(i);n.classList.remove("active-menuitem");let r=s.findIndex(this.matchId(i));0!==r?(n.classList.remove("l-selected-menu"),n=document.getElementById(s[r-1].id),n.classList.add("l-selected-menu"),n.getBoundingClientRect().top<80&&n.scrollIntoView({block:"center",behaviour:"smooth"})):e.length>1&&(document.getElementById(e.slice(-2)[0]).getElementsByTagName("a")[0].click(),n.classList.remove("l-selected-menu"),e=e.slice(0,-1),this.walkUp(e,t))}}))}walkRight(e,t){let s=t,i=Array.from(document.getElementsByClassName("l-selected-menu"));i.length&&i[0].classList.remove("l-selected-menu"),e.forEach((t=>{let i=s.findIndex(this.matchId(t));if(t!==e.slice(-1)[0])s=s[i].items;else{this.data.activeElemId=t;let e,n=document.getElementById(s[i].id);s[i].items&&(e=document.getElementById(s[i].items[0].id),e.classList.add("l-selected-menu")),n.getElementsByTagName("a")[0].click(),e||(n.classList.add("l-selected-menu"),this.onMenuTrigger())}}))}walkLeft(e,t){if(e.length>1){let t=document.getElementById(e.slice(-1)[0]);t.classList.remove("l-selected-menu"),t.classList.remove("active-menuitem"),t=document.getElementById(e.slice(-2)[0]),t.getElementsByTagName("a")[0].click(),t.classList.add("l-selected-menu")}}onMenuTrigger(){if(this.state.activeNavKeys)window.postMessage("ArrowsReleased","*"),Array.from(document.getElementsByClassName("l-selected-menu")).forEach((e=>e.classList.remove("l-selected-menu"))),Array.from(document.getElementsByClassName("active-menuitem")).forEach((e=>e.classList.remove("active-menuitem")));else{window.App.state.staticMenuInactive&&window.App.onToggleMenu(),window.postMessage("ArrowsTaken","*");let e=Array.from(document.getElementsByClassName("active-menuitem"));e.length?e.slice(-1)[0].classList.add("l-selected-menu"):document.getElementById(this.data.elemStore[0].id).classList.add("l-selected-menu")}this.setState({activeNavKeys:!this.state.activeNavKeys})}onKeyDown(e){if((""===document.activeElement.value||void 0===document.activeElement.value)&&(77===e.keyCode&&e.altKey||this.state.activeNavKeys)){if(77===e.keyCode&&e.altKey){let e=!1;if(this.state.activeNavKeys&&(e=!0),this.onMenuTrigger(),e)return}if(this.state.navKeys.includes(e.keyCode)){e.preventDefault();let t=[],s=!1,i=this.data.elemStore,n=i;if(Array.from(document.getElementsByClassName("active-menuitem")).forEach((e=>{if(s)e.classList.remove("active-menuitem");else{let i=n.findIndex(this.matchId(e.id));i>=0?(n=n[i].items,t.push(e.id),void 0===n&&(s=!0)):e.classList.remove("active-menuitem")}})),t.length||t.push(i[0].id),t.length){let e=document.getElementById(t.slice(-1)[0]),s=Array.from(e.getElementsByClassName("l-selected-menu"));s.length?t.push(s[0].id):t.length>1?(e=document.getElementById(t.slice(-2)[0]),s=Array.from(e.getElementsByClassName("l-selected-menu")),s.length&&(t=t.slice(0,-1),t.push(s[0].id))):(s=Array.from(document.getElementsByClassName("l-selected-menu")),s.length&&(t=t.slice(0,-1),t.push(s[0].id)))}40===e.keyCode?this.walkDown(t,i):38===e.keyCode?this.walkUp(t,i):39===e.keyCode||13===e.keyCode?this.walkRight(t,i):37===e.keyCode&&this.walkLeft(t,i)}}}render(){return(0,c.jsx)("div",{className:"menu",children:(0,c.jsx)(u,{activeElemId:this.data.activeElemId,items:this.props.model,className:"layout-main-menu",onMenuItemClick:this.props.onMenuItemClick,root:!0})})}}p.defaultProps={model:null,onMenuItemClick:null},p.propTypes={model:r().array,onMenuItemClick:r().func};s(3989);let h;h={prOverlayPanel:Promise.all([s.e(9880),s.e(5155),s.e(7320),s.e(4873),s.e(1751)]).then(s.bind(s,1849)),prCard:Promise.all([s.e(9880),s.e(5155)]).then(s.bind(s,5268)),prButton:Promise.all([s.e(7353),s.e(5155),s.e(7320),s.e(2109),s.e(6839),s.e(968)]).then(s.bind(s,4917))};(0,o.RegisterImportPool)(h);class m extends o.Component{constructor(e){super(e),this.state={...this.state,expanded:!1},this.onClick=this.onClick.bind(this)}onClick(e){this.pop&&this.pop.toggle(e),this.setState({expanded:!this.state.expanded}),e.preventDefault()}renderActAsOverLay(){let{act_as_title_text:e,act_as_subtext:t}=this.props;return(0,c.jsx)(this.ex.prOverlayPanel.OverlayPanel,{ref:e=>this.op=e,appendTo:this.props.authAppendTo,className:"l-actas",children:(0,c.jsx)(this.ex.prCard.Card,{title:e,subTitle:t,children:this.props.authorities.map((e=>(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(this.ex.prButton.Button,{label:e[1],onClick:t=>{this.op.hide(),this.props.onAuthoritiesSelect(e)}}),(0,c.jsx)("br",{})]},e[0])))})})}render(){if(!this.state.ready)return null;let{username:e,su_name:t,su_id:s}=this.props,{act_as_button_text:n,act_as_self_text:r,my_setting_text:a}=this.props;e=t?`${e} acting as ${t}`:e;let o=window.App.data.selectedLanguage||window.App.state.user_settings.lang;return(0,c.jsxs)("div",{className:"profile",children:[(0,c.jsx)(this.ex.prButton.Button,{label:window.App.state.site_data.languages[o],onClick:e=>this.lsop.toggle(e)}),(0,c.jsx)("span",{children:" | "}),(0,c.jsx)(this.ex.prOverlayPanel.OverlayPanel,{ref:e=>this.lsop=e,children:Object.keys(window.App.state.site_data.languages).filter((e=>e!=o)).map((e=>(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(this.ex.prButton.Button,{label:window.App.state.site_data.languages[e],onClick:t=>{window.App.data.selectedLanguage=e,window.App.fetch_user_settings(s,!1,!0)}}),(0,c.jsx)("br",{})]},e)))}),this.props.logged_in?(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(this.ex.prButton.Button,{icon:"pi pi-cog",iconPos:"right",label:e,onClick:this.onClick}),(0,c.jsxs)(this.ex.prOverlayPanel.OverlayPanel,{ref:e=>this.pop=e,children:[(0,c.jsx)(this.ex.prButton.Button,{icon:"pi pi-power-off",label:"Sign out",onClick:this.props.onSignOutIn}),(0,c.jsx)("br",{}),s&&(0,c.jsx)(this.ex.prButton.Button,{icon:"pi pi-user",label:r,onClick:this.props.onActAsSelf}),(0,c.jsx)("br",{}),this.props.authorities.length>0&&(0,c.jsx)(this.ex.prButton.Button,{icon:"pi pi-users",label:n,onClick:e=>{e.target=this.actAsEl,this.op.toggle(e)},ref:e=>this.actAsEl=e}),(0,c.jsx)("br",{}),(0,c.jsx)(this.ex.prButton.Button,{icon:"pi pi-sliders-v",label:a,onClick:this.props.onMysettings})]}),this.renderActAsOverLay()]}):(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(this.ex.prButton.Button,{icon:"pi pi-power-off",label:"Sign in",onClick:this.props.onSignOutIn}),(0,c.jsx)(this.ex.prButton.Button,{icon:"pi pi-plus-circle",label:"Create account",onClick:this.props.createAccount})]})]})}}m.requiredModules=["prOverlayPanel","prCard","prButton"],m.iPool=h,m.propTypes={logged_in:r().bool,username:r().string.isRequired,onSignOutIn:r().func.isRequired,authorities:r().array,onAuthoritiesSelect:r().func,onActAsSelf:r().func,authAppendTo:r().instanceOf(Element),su_name:r().string,su_id:r().oneOfType([r().number,r().instanceOf(void 0)]),act_as_button_text:r().string,act_as_title_text:r().string,act_as_subtext:r().string,act_as_self_text:r().string,my_setting_text:r().string,onMysettings:r().func.isRequired},m.defaultProps={authorities:[]};let b;b={classNames:s.e(1473).then(s.t.bind(s,4507,23))};(0,o.RegisterImportPool)(b);class E extends o.Component{constructor(e){super(e),this.renderChatButton=this.renderChatButton.bind(this),this.onReady=this.onReady.bind(this)}onReady(){setTimeout(window.App.handleZoom,1e3)}renderChatButton(){return(0,c.jsx)("a",{onClick:this.props.onChatButton,ref:e=>window.App.chatButton=e,children:(0,c.jsx)("span",{className:this.ex.classNames.default("layout-topbar-icon pi pi-comments",{"no-ws":!this.props.WS})})})}render(){if(!this.state.ready)return null;let e="l-site-title ";return"whitewall"===window.App.data.themeName&&"l-whitewall-site-title ",(0,c.jsxs)("div",{ref:e=>window.App.tbContainer=e,className:"layout-topbar clearfix",children:[(0,c.jsx)("a",{className:"layout-menu-button",onClick:this.props.onToggleMenu,children:(0,c.jsx)("span",{className:"pi pi-bars"})}),(0,c.jsx)("a",{className:"layout-home-button",onClick:this.props.onHomeButton,children:(0,c.jsx)("span",{className:"pi pi-home"})}),window.App.state.site_data.editing_frontend&&(0,c.jsx)("a",{className:"layout-home-button",onClick:e=>{let t="_self";e.ctrlKey&&(t="_blank"),window.open(location.origin,t)},children:(0,c.jsx)("span",{className:"pi pi-globe"})}),(0,c.jsxs)("div",{className:"layout-topbar-icons",style:{display:"inline"},children:[!window.App.state.site_loading&&!window.App.state.site_data.no_user_model&&(0,c.jsx)(m,{username:window.App.state.user_settings.username,logged_in:window.App.state.user_settings.logged_in,authorities:window.App.state.user_settings.authorities,onActAsSelf:()=>window.App.onAuthoritiesSelect([void 0]),su_id:window.App.state.su_id,su_name:window.App.state.user_settings.su_name,act_as_subtext:window.App.state.user_settings.act_as_subtext,act_as_title_text:window.App.state.user_settings.act_as_title_text,act_as_button_text:window.App.state.user_settings.act_as_button_text,act_as_self_text:window.App.state.user_settings.act_as_self_text,onAuthoritiesSelect:window.App.onAuthoritiesSelect,my_setting_text:window.App.state.user_settings.my_setting_text,onSignOutIn:e=>window.App.onSignOutIn(e),createAccount:window.App.createAccount,authAppendTo:window.App.topDiv,onMysettings:e=>window.App.onMysettings(e)}),this.props.useChat&&this.renderChatButton()]})]})}}E.requiredModules=["classNames"],E.iPool=b,E.defaultProps={onToggleMenu:null,unseenCount:0},E.propTypes={onToggleMenu:r().func.isRequired,onHomeButton:r().func.isRequired,onChatButton:r().func,useChat:r().bool,WS:r().bool,unseenCount:r().number};const f="SiteContext";let x;x={classNames:s.e(1473).then(s.t.bind(s,4507,23)),_:s.e(5312).then(s.t.bind(s,8452,23)),prScrollPanel:Promise.all([s.e(9880),s.e(5155)]).then(s.bind(s,3956)),u:Promise.resolve().then(s.bind(s,765)),DashboardItems:s.e(5421).then(s.bind(s,845)),nc:Promise.all([s.e(1473),s.e(5312),s.e(2158)]).then(s.bind(s,2968)),lb:Promise.all([s.e(532),s.e(9779)]).then(s.bind(s,1462))};function g(e){let[t,s]=i.useState("static"),[n,r]=i.useState("dark"),[a,_]=i.useState(!1),[l,d]=i.useState(!1),[u,h]=i.useState(!1);const m=(0,o.getExReady)(x,["prScrollPanel","classNames"],(e=>{e.classNames=e.classNames.default}));return m.ready?(0,c.jsxs)("div",{className:m.classNames("layout-wrapper",{"layout-overlay":"overlay"===t,"layout-static":"static"===t,"layout-static-sidebar-inactive":a&&"static"===t,"layout-overlay-sidebar-active":l&&"overlay"===t,"layout-mobile-sidebar-active":u}),ref:t=>e.APP.topDiv=t,children:[(0,c.jsx)(E,{onToggleMenu:e=>{d(!l),_(!a),h(!u),e&&e.preventDefault()},onHomeButton:e.APP.onHomeButton,WS:e.APP.state.WS,useChat:!1}),(0,c.jsx)("div",{className:m.classNames("layout-sidebar",{"layout-sidebar-dark":"dark"===n}),children:(0,c.jsx)(m.prScrollPanel.ScrollPanel,{style:{height:"100%"},children:(0,c.jsx)("div",{className:"layout-sidebar-scroll-content",children:(0,c.jsx)(p,{model:e.APP.state.menu_data,onMenuItemClick:e=>{e.item.items||(d(!1),h(!1))}})})})}),e.children]}):null}(0,o.RegisterImportPool)(x),Storage.prototype.setObject=function(e,t){this.setItem(e,JSON.stringify(t))},Storage.prototype.getObject=function(e){var t=this.getItem(e);return t&&JSON.parse(t)};class P extends o.Component{constructor(e){super(e),this.state={...this.state,initialized:!1}}componentWillUnmount(){let e=this.state.context.controller;e.isSlave&&delete e.parent.children[e.actionHandler.refName],delete e.APP.rps[e.actionHandler.refName]}}P.iPool=x,P.Context=o.URLContextType;class C extends P{constructor(e){super(e),this.state={...this.state,context:null}}onReady(){let e=this.props.parentContext;new this.ex.nc.Context({APP:e.APP,value:{},next:t=>{const s=e=>{Object.assign(e,this.props.params),t.pushStatus(this.props.status,e),t.history.replace(e)};t.setRoot(this),t.setParent(e),this.props.inherit?(t.value=e.copy(),t.value.static=e.value.static,t.value.controller=t,s(t.value)):this.props.simple?t.basicContext(this.props.path,s):t.buildURLContext(this.props.path,s)}})}render(){let e=this.state.initialized?(0,c.jsx)(C.Context.Provider,{value:this.state.context,children:this.props.children?this.props.children:this.props.getChildren(this.state.context)}):null;return this.props.simple?e:(0,c.jsxs)("div",{ref:e=>this.contextEntry=e,children:[e,(0,c.jsx)("div",{ref:e=>this.chInPx=e,style:{width:"1ch",visibility:"hidden"}})]})}}C.requiredModules=["nc"],C.propTypes={children:(e,...t)=>{if(null===e.getChildren)return r().element.isRequired(e,...t)},getChildren:(e,...t)=>{if(null===e.children)return r().func.isRequired(e,...t)},inherit:r().bool,params:r().object,parentContext:r().object.isRequired,path:(e,...t)=>{if(!e.inherit)return r().string.isRequired(e,...t)},simple:r().bool,status:r().object},C.defaultProps={children:null,getChildren:null,inherit:!1,params:{},simple:!0,status:{}};class D extends P{constructor(e){super(e),this.state={...this.state,context:e.APP.URLContext.value,hasActor:null},this.state.context.controller.setRoot(this),this.onChInPxRef=this.onChInPxRef.bind(this)}onChInPxRef(e){this.chInPx=e,e&&this.state.context.controller.attachDataContext(new M({root:this,context:{success:!1},next:()=>{this.state.context.controller.build((e=>{e.rs||(e.rs=this.state.context.controller.newSlug(),this.props.APP.router.history.replace({search:`rs=${e.rs}`})),this.state.context.controller.history.replace(e)}))}}))}render(){return this.state.ready?(0,c.jsx)(g,{APP:this.props.APP,children:(0,c.jsxs)("div",{className:"layout-main",ref:e=>this.contextEntry=e,children:[this.state.initialized&&(0,c.jsx)(P.Context.Provider,{value:this.state.context,children:this.state.hasActor?(0,c.jsx)(this.ex.lb.LinoBody,{actorData:this.state.context.static.actorData}):(0,c.jsx)(this.ex.DashboardItems.DashboardItems,{ref:e=>{this.props.APP.dashboard=e,this.props.APP.setRpRef(e,"dItems")},dashboard_items:this.props.APP.state.user_settings?this.props.APP.state.user_settings.dashboard_items:0,user:this.props.APP.state.user_settings?this.props.APP.state.user_settings.username:"notloaded"})}),(0,c.jsx)("div",{ref:this.onChInPxRef,style:{width:"1ch",visibility:"hidden"}})]})}):null}}D.requiredModules=["DashboardItems","lb"],D.propTypes={APP:r().object.isRequired};class M extends o.DynDep{constructor(...e){return super(...e),this.saveUploadHandlerEvent=e=>{this.mutableContext.UploadHandlerEvent=e},this}async prepare(){this.ex._=this.ex._.default}onReady({root:e,context:t={},next:s}){this.root=e,this.backupContext=this.backupContext.bind(this),this.clearMod=this.clearMod.bind(this),this.isModified=this.isModified.bind(this),this.prepContext=this.prepContext.bind(this),this.set=this.set.bind(this),this.setLeafRef=this.setLeafRef.bind(this),this.update=this.update.bind(this),this.updateState=this.updateState.bind(this),this.set(t,!0),s(this)}prepContext(e){if(e.Leaves={},e.slaveLeaves={},e.virtualLeaves={},e.UploadHandlerEvent=null,e.modifiedRows={},e.modified=[],e.rows){let s=this.root.context[a.URL_PARAM_LIMIT];e.pks=e.rows.map((e=>e[this.root.context.static.actorData.pk_index]));for(var t=0;t<e.rows.length;t++)e.modifiedRows[t]=[];e.pageCount=Math.floor(e.count/s)}return e}backupContext(e){this.contextBackup=this.ex._.cloneDeep(e)}clearMod(){if(this.mutableContext.UploadHandlerEvent=null,this.mutableContext.modified=[],this.mutableContext.rows)for(var e=0;e<this.mutableContext.rows.length;e++)this.mutableContext.modifiedRows[e]=[];Object.assign(this.mutableContext,this.ex._.cloneDeep(this.contextBackup))}isModified(e){if(null!==this.mutableContext.UploadHandlerEvent)return!0;if(void 0!==e)return isNaN(parseInt(e))?this.mutableContext.modified.length>0:this.mutableContext.modifiedRows[e].length>0;if(this.mutableContext.modified.length)return!0;for(const e of Object.values(this.mutableContext.modifiedRows))if(e.length)return!0;return!1}set(e,t,s={},i=(()=>null)){this.backupContext(e),this.mutableContext=this.prepContext(e),t||this.root.setState({context:this.mutableContext,displayMode:this.root.context[a.URL_PARAM_DISPLAY_MODE],...s}),i(this.mutableContext)}setLeafRef({name:e,ref:t,type:s,input:i}){this.mutableContext[s+"Leaves"][e]=t}update(e={}){Object.assign(this.mutableContext,e),this.root.setState({context:this.mutableContext})}updateState(e,t={}){this.mutableContext=Object.assign({},this.mutableContext,e),this.root.setState({context:this.mutableContext,...t})}}M.requiredModules=["u","_"],M.iPool=x,M.Context=o.DataContextType},2856:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=e(t);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,i){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(i)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(n[a]=!0)}for(var o=0;o<e.length;o++){var _=[].concat(e[o]);i&&n[_[0]]||(s&&(_[2]?_[2]="".concat(s," and ").concat(_[2]):_[2]=s),t.push(_))}},t}},432:e=>{function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==s)return;var i,n,r=[],a=!0,o=!1;try{for(s=s.call(e);!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){o=!0,n=e}finally{try{a||null==s.return||s.return()}finally{if(o)throw n}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}e.exports=function(e){var s=t(e,4),i=s[1],n=s[3];if(!n)return i;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(a," */"),_=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[i].concat(_).concat([o]).join("\n")}return[i].join("\n")}},3379:(e,t,s)=>{var i,n=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),a=[];function o(e){for(var t=-1,s=0;s<a.length;s++)if(a[s].identifier===e){t=s;break}return t}function _(e,t){for(var s={},i=[],n=0;n<e.length;n++){var r=e[n],_=t.base?r[0]+t.base:r[0],l=s[_]||0,c="".concat(_," ").concat(l);s[_]=l+1;var d=o(c),u={css:r[1],media:r[2],sourceMap:r[3]};-1!==d?(a[d].references++,a[d].updater(u)):a.push({identifier:c,updater:b(u,t),references:1}),i.push(c)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var n=s.nc;n&&(i.nonce=n)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var a=r(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function u(e,t,s,i){var n=s?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=d(t,n);else{var r=document.createTextNode(n),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function p(e,t,s){var i=s.css,n=s.media,r=s.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var h=null,m=0;function b(e,t){var s,i,n;if(t.singleton){var r=m++;s=h||(h=l(t)),i=u.bind(null,s,r,!1),n=u.bind(null,s,r,!0)}else s=l(t),i=p.bind(null,s,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var s=_(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<s.length;i++){var n=o(s[i]);a[n].references--}for(var r=_(e,t),l=0;l<s.length;l++){var c=o(s[l]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}s=r}}}}}]);
//# sourceMappingURL=main.SiteContext_App.6892f5666b5d3902607d.js.map