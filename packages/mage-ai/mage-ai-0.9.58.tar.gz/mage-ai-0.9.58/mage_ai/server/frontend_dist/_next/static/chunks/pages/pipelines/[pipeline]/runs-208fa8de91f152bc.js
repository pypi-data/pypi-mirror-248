(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[244],{23192:function(e,n,t){"use strict";t.d(n,{fi:function(){return V},lG:function(){return B}});var i=t(82394),r=t(75582),o=t(82684),u=t(12691),l=t.n(u),c=t(34376),s=t.n(c),a=t(38626),d=t(69864),p=t(40761),f=t(41143),v=t(71180),b=t(39867),h=t(55485),m=t(48670),g=t(57653),x=t(38276),j=t(75499),_=t(30160),C=t(12468),O=t(35686),y=t(89706),k=t(11498),Z=t(72473),P=t(81655),S=t(70515),w=t(3917),I=t(55283),R=t(86735),E=t(72619),D=t(74052),T=t(69419),N=t(70320),M=t(28598);function H(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?H(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var B=[0,1,3,4,5],V={0:"status",1:"block_uuid",3:"created_at",4:"started_at",5:"completed_at"};n.ZP=function(e){var n=e.blockRuns,t=e.onClickRow,i=e.pipeline,u=e.selectedRun,c=e.setErrors,H=e.sortableColumnIndexes,B=(0,N.qB)(),V=(0,o.useContext)(a.ThemeContext),F=(0,o.useState)(null),A=F[0],U=F[1],G=(0,o.useState)(null),z=G[0],K=G[1],W=i||{},q=W.uuid,Q=W.type,X=(0,o.useMemo)((function(){return i.blocks||[]}),[i]),$=(0,o.useMemo)((function(){return(0,R.HK)(X,(function(e){return e.uuid}))}),[X]),Y=(0,o.useMemo)((function(){return g.qL.INTEGRATION===Q}),[Q]),J=(0,o.useMemo)((function(){return g.qL.PYTHON===Q}),[Q]),ee=(0,T.iV)(),ne=null===ee||void 0===ee?void 0:ee[P.lG.SORT_COL_IDX],te=(0,o.useMemo)((function(){return ne?{columnIndex:+ne,sortDirection:(null===ee||void 0===ee?void 0:ee[P.lG.SORT_DIRECTION])||P.sh.ASC}:void 0}),[ee,ne]),ie=(0,o.useMemo)((function(){var e,n;return null===(e=new p.Z)||void 0===e||null===(n=e.decodedToken)||void 0===n?void 0:n.token}),[]),re=(0,d.Db)((function(e){var n=e.blockUUID,t=e.pipelineRunId;return O.ZP.block_outputs.pipelines.downloads.detailAsync(null===i||void 0===i?void 0:i.uuid,n,{pipeline_run_id:t,token:ie},{onDownloadProgress:function(e){return U((Number((null===e||void 0===e?void 0:e.loaded)||0)/1e6).toFixed(3))},responseType:k.Eg.BLOB})}),{onSuccess:function(e){return(0,E.wD)(e,{callback:function(e){K(null),(0,D.uS)(e,"block_output.".concat(y.Lu.CSV))},onErrorCallback:function(e,n){return null===c||void 0===c?void 0:c({errors:n,response:e})}})}}),oe=(0,r.Z)(re,2),ue=oe[0],le=oe[1].isLoading,ce=B?P.O$:{},se=[{uuid:"Status"},{uuid:"Block"},{uuid:"Trigger"},L(L({},ce),{},{uuid:"Created at"}),L(L({},ce),{},{uuid:"Started at"}),L(L({},ce),{},{uuid:"Completed at"}),{uuid:"Logs"}];return J&&se.push({uuid:"Output"}),(0,M.jsx)(j.Z,{columnFlex:[1,2,2,1,1,1,null,null],columns:se,isSelectedRow:function(e){return n[e].id===(null===u||void 0===u?void 0:u.id)},onClickRow:t,rows:null===n||void 0===n?void 0:n.map((function(e){var n,t,i,r,u=e||{},c=u.block_uuid,a=u.completed_at,d=u.created_at,p=u.id,g=u.pipeline_run_id,j=u.pipeline_schedule_id,O=u.pipeline_schedule_name,y=u.started_at,k=u.status,R=c,E=R.split(":"),D=z===p&&le;Y&&(R=E[0],i=E[1],r=E[2]);var T=$[R];T||(T=$[E[0]]);var N=[(0,o.createElement)(_.ZP,L(L({},(0,P.NC)(k)),{},{key:"".concat(p,"_status")}),k),(0,M.jsx)(l(),{as:"/pipelines/".concat(q,"/edit?block_uuid=").concat(R),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,M.jsxs)(m.Z,{bold:!0,fitContentWidth:!0,verticalAlignContent:!0,children:[(0,M.jsx)(b.Z,{color:(0,I.qn)(null===(n=T)||void 0===n?void 0:n.type,{blockColor:null===(t=T)||void 0===t?void 0:t.color,theme:V}).accent,size:1.5*S.iI,square:!0}),(0,M.jsx)(x.Z,{mr:1}),(0,M.jsxs)(_.ZP,{monospace:!0,sky:!0,children:[R,i&&":",i&&(0,M.jsx)(_.ZP,{default:!0,inline:!0,monospace:!0,children:i}),r>=0&&":",r>=0&&(0,M.jsx)(_.ZP,{default:!0,inline:!0,monospace:!0,children:r})]})]})},"".concat(p,"_block_uuid")),(0,M.jsx)(l(),{as:"/pipelines/".concat(q,"/triggers/").concat(j),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,M.jsx)(m.Z,{bold:!0,sky:!0,children:O})},"".concat(p,"_trigger")),(0,M.jsx)(_.ZP,{default:!0,monospace:!0,small:!0,title:d?(0,w._6)(d):null,children:B?(0,w.XG)(d,B):(0,w.d$)(d,{includeSeconds:!0})},"".concat(p,"_created_at")),(0,M.jsx)(_.ZP,{default:!0,monospace:!0,small:!0,title:y?(0,w._6)(y):null,children:y?B?(0,w.XG)(y,B):(0,w.d$)(y,{includeSeconds:!0}):(0,M.jsx)(M.Fragment,{children:"\u2014"})},"".concat(p,"_started_at")),(0,M.jsx)(_.ZP,{default:!0,monospace:!0,small:!0,title:a?(0,w._6)(a):null,children:a?B?(0,w.XG)(a,B):(0,w.d$)(a,{includeSeconds:!0}):(0,M.jsx)(M.Fragment,{children:"\u2014"})},"".concat(p,"_completed_at")),(0,M.jsx)(v.ZP,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return s().push("/pipelines/".concat(q,"/logs?block_run_id[]=").concat(p))},children:(0,M.jsx)(Z.UL,{default:!0,size:2*S.iI})},"".concat(p,"_logs"))];return J&&N.push((0,M.jsx)(h.ZP,{alignItems:"center",justifyContent:"center",children:(0,M.jsx)(C.Z,{appearBefore:!0,autoHide:!D,block:!0,forceVisible:D,label:D?"".concat(A||0,"mb downloaded..."):"Save block run output as CSV file (not supported for dynamic blocks)",size:null,children:(0,M.jsx)(v.ZP,{default:!0,disabled:!J||!(f.V.COMPLETED===k)||le,iconOnly:!0,loading:D,noBackground:!0,onClick:function(){U(null),K(p),ue({blockUUID:R,pipelineRunId:g})},children:(0,M.jsx)(Z.vc,{default:!0,size:2*S.iI})})})},"".concat(p,"_save_output"))),N})),sortableColumnIndexes:H,sortedColumn:te,uuid:"block-runs"})}},8955:function(e,n,t){"use strict";t.d(n,{G7:function(){return C},ZP:function(){return O},u$:function(){return x}});var i=t(75582),r=t(82394),o=t(26304),u=t(90299),l=t(9134),c=t(24138),s=t(38276),a=t(30160),d=t(75499),p=t(70515),f=t(16488),v=t(42122),b=t(28598),h=["height","heightOffset","pipeline","selectedRun","selectedTab","setSelectedTab"];function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var x=44,j={uuid:"Run details"},_={uuid:"Dependency tree"},C=[_,j];function O(e){var n=e.height,t=e.heightOffset,r=e.pipeline,m=e.selectedRun,O=e.selectedTab,y=e.setSelectedTab,k=g({},(0,o.Z)(e,h));m?k.blockStatus=(0,f.IJ)(null===m||void 0===m?void 0:m.block_runs):k.noStatus=!0;var Z=(0,v.Kn)(null===m||void 0===m?void 0:m.variables)?g({},null===m||void 0===m?void 0:m.variables):(null===m||void 0===m?void 0:m.variables)||{},P=null===m||void 0===m?void 0:m.event_variables;if(P&&(0,v.Kn)(P)&&!(0,v.Qr)(P))if((0,v.Kn)(Z)&&Z.hasOwnProperty("event")){var S=(0,v.Kn)(Z.event)?Z.event:{};Z.event=g(g({},S),P)}else Z.event=g({},P);var w=[];Z&&JSON.stringify(Z,null,2).split("\n").forEach((function(e){w.push("    ".concat(e))}));var I=m&&[["Run ID",null===m||void 0===m?void 0:m.id],["Variables",(0,b.jsx)(l.Z,{language:"json",small:!0,source:w.join("\n")},"variable_value")]],R=m&&(0,b.jsx)(s.Z,{pb:p.cd,px:p.cd,children:(0,b.jsx)(d.Z,{alignTop:!0,columnFlex:[null,1],columnMaxWidth:function(e){return 1===e?"100px":null},rows:I.map((function(e,n){var t=(0,i.Z)(e,2),r=t[0],o=t[1];return[(0,b.jsx)(a.ZP,{monospace:!0,muted:!0,children:r},"key_".concat(n)),(0,b.jsx)(a.ZP,{monospace:!0,textOverflow:!0,children:o},"val_".concat(n))]})),uuid:"LogDetail"})}),E=O&&y;return(0,b.jsxs)(b.Fragment,{children:[E&&(0,b.jsx)(s.Z,{py:p.cd,children:(0,b.jsx)(u.Z,{onClickTab:y,selectedTabUUID:null===O||void 0===O?void 0:O.uuid,tabs:C,underlineStyle:!0})}),(!E||_.uuid===(null===O||void 0===O?void 0:O.uuid))&&(0,b.jsx)(c.ZP,g(g({},k),{},{height:n,heightOffset:(t||0)+(E?x:0),pipeline:r})),j.uuid===(null===O||void 0===O?void 0:O.uuid)&&R]})}},55072:function(e,n,t){"use strict";t.d(n,{Et:function(){return p},Q:function(){return d}});t(82684);var i=t(71180),r=t(55485),o=t(38276),u=t(31748),l=t(72473),c=t(79633),s=t(70515),a=t(28598),d=30,p=9;n.ZP=function(e){var n=e.page,t=e.maxPages,d=e.onUpdate,p=e.totalPages,f=[],v=t;if(v>p)f=Array.from({length:p},(function(e,n){return n}));else{var b=Math.floor(v/2),h=n-b;n+b>=p?(h=p-v+2,v-=2):n-b<=0?(h=0,v-=2):(v-=4,h=n-Math.floor(v/2)),f=Array.from({length:v},(function(e,n){return n+h}))}return(0,a.jsx)(a.Fragment,{children:p>0&&(0,a.jsxs)(r.ZP,{alignItems:"center",children:[(0,a.jsx)(i.ZP,{disabled:0===n,onClick:function(){return d(n-1)},children:(0,a.jsx)(l.Hd,{size:1.5*s.iI,stroke:u.Av})}),!f.includes(0)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{ml:1,children:(0,a.jsx)(i.ZP,{borderLess:!0,noBackground:!0,onClick:function(){return d(0)},children:1})},0),!f.includes(1)&&(0,a.jsx)(o.Z,{ml:1,children:(0,a.jsx)(i.ZP,{noBackground:!0,noPadding:!0,notClickable:!0,children:"..."})},0)]}),f.map((function(e){return(0,a.jsx)(o.Z,{ml:1,children:(0,a.jsx)(i.ZP,{backgroundColor:e===n&&c.a$,borderLess:!0,noBackground:!0,notClickable:e===n,onClick:function(){e!==n&&d(e)},children:e+1})},e)})),!f.includes(p-1)&&(0,a.jsxs)(a.Fragment,{children:[!f.includes(p-2)&&(0,a.jsx)(o.Z,{ml:1,children:(0,a.jsx)(i.ZP,{noBackground:!0,noPadding:!0,notClickable:!0,children:"..."})},0),(0,a.jsx)(o.Z,{ml:1,children:(0,a.jsx)(i.ZP,{borderLess:!0,noBackground:!0,onClick:function(){return d(p-1)},children:p})},p-1)]}),(0,a.jsx)(o.Z,{ml:1}),(0,a.jsx)(i.ZP,{disabled:n===p-1,onClick:function(){return d(n+1)},children:(0,a.jsx)(l.Kw,{size:1.5*s.iI,stroke:u.Av})})]})})}},29241:function(e,n,t){"use strict";var i=t(38626),r=t(44897),o=i.default.div.withConfig({displayName:"PageSectionHeader",componentId:"sc-1wznrcv-0"})(["left:0;position:sticky;top:0;width:100%;z-index:3;",""],(function(e){return"\n    background-color: ".concat(e.backgroundColor||(e.theme.background||r.Z.background).page,";\n    border-bottom: 1px solid ").concat((e.theme.borders||r.Z.borders).medium,";\n  ")}));n.Z=o},35526:function(e,n,t){"use strict";t.d(n,{Au:function(){return a},I6:function(){return c},Nb:function(){return i},OK:function(){return s},hZ:function(){return p},k2:function(){return d}});var i,r=t(42631),o=t(72473),u=t(70515),l=t(28598),c="".concat(1.5*u.iI,"px"),s=40*u.iI,a=58;!function(e){e[e.FIRST=1]="FIRST",e[e.SECOND=2]="SECOND"}(i||(i={}));var d={autoHide:!0,size:null,widthFitContent:!0},p={afterIconSize:1.5*u.iI,beforeIcon:(0,l.jsx)(o.HN,{}),borderRadius:r.n_,defaultColor:!0,fullWidth:!0,greyBorder:!0,maxWidth:40*u.iI}},9134:function(e,n,t){"use strict";var i=t(82684),r=t(21124),o=t(68432),u=t(38626),l=t(65292),c=t(44897),s=t(95363),a=t(70515),d=t(28598);n.Z=function(e){var n=e.language,t=e.maxWidth,p=e.showLineNumbers,f=e.small,v=e.source,b=e.wrapLines,h=(0,i.useContext)(u.ThemeContext);function m(e){var i=e.value;return(0,d.jsx)(o.Z,{customStyle:{backgroundColor:(h.background||c.Z.background).popup,border:"none",borderRadius:"none",boxShadow:"none",fontFamily:s.Vp,fontSize:f?12:14,marginBottom:0,marginTop:0,maxWidth:t,paddingBottom:2*a.iI,paddingTop:2*a.iI},language:n,lineNumberStyle:{color:(h.content||c.Z.content).muted},showLineNumbers:p,style:l._4,useInlineStyles:!0,wrapLines:b,children:i})}return(0,d.jsx)(r.D,{components:{code:function(e){var n=e.children;return(0,d.jsx)(m,{value:n})}},children:v})}},17380:function(e,n,t){"use strict";t.d(n,{i:function(){return a}});t(82684);var i=t(38626),r=(t(97618),t(55485),t(48670),t(38276),t(47329)),o=t.n(r);o().node,o().node,o().node.isRequired,o().bool,o().string.isRequired;t(30160);var u=t(70987),l=t(95363),c=t(70515),s=t(42631),a=(t(28598),"tab");i.default.div.withConfig({displayName:"Tabs__TabHeaderContainerStyle",componentId:"sc-rojme5-0"})(["",""],(function(e){return e.containerWidthPercentage&&"\n    width: ".concat(e.containerWidthPercentage,"%;\n  ")})),i.default.div.withConfig({displayName:"Tabs__TabHeader",componentId:"sc-rojme5-1"})(["border-top-left-radius:","px;border-top-right-radius:","px;margin-right:","px;position:relative;z-index:2;"," "," ",""],s.BG,s.BG,6*c.iI,(function(e){return e.noBottomBorder&&"\n    border-bottom: none;\n  "}),(function(e){return e.active&&"\n    border-bottom: ".concat(c.cd,"px solid;\n    border-color: ").concat((e.theme.interactive||u.Z.interactive).linkPrimary,";\n  ")}),(function(e){return e.fullWidth&&"\n    width: 100%;\n  "})),i.default.div.withConfig({displayName:"Tabs__LinkStyle",componentId:"sc-rojme5-2"})(["align-items:center;display:flex;"," "," ",""],(function(e){return e.bold&&"\n    font-family: ".concat(l.nF,";\n  ")}),(function(e){return e.fullWidth&&"\n    justify-content: center;\n  "}),(function(e){return!e.disabled&&"\n    &:hover {\n      path {\n        fill: ".concat((e.theme.content||u.Z.interactive).linkPrimary," !important;\n      }\n    }\n  ")}))},81080:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ee}});var i=t(77837),r=t(75582),o=t(82394),u=t(38860),l=t.n(u),c=t(82684),s=t(69864),a=t(34376),d=t(28598);var p=function(e){var n=e.size;return(0,d.jsxs)("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5 8.5H15.5V3.5H20.5V8.5ZM14 9V3C14 2.44772 14.4477 2 15 2H21C21.5523 2 22 2.44772 22 3V9C22 9.55229 21.5523 10 21 10H15C14.4477 10 14 9.55229 14 9ZM2 5V12.5V14V21.5C2 22.0523 2.44772 22.5 3 22.5H10.5H12H19.5C20.0523 22.5 20.5 22.0523 20.5 21.5V13.5C20.5 12.9477 20.0523 12.5 19.5 12.5H12V5C12 4.44772 11.5523 4 11 4H3C2.44772 4 2 4.44772 2 5ZM10.5 14V21H3.5V14H10.5ZM19 14V21H12V14H19ZM10.5 5.5V12.5H3.5V5.5H10.5Z",fill:"url(#paint0_linear_2842_55048)"}),(0,d.jsx)("defs",{children:(0,d.jsxs)("linearGradient",{id:"paint0_linear_2842_55048",x1:"2",y1:"12.25",x2:"22",y2:"12.25",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{offset:"0.28125",stopColor:"#7D55EC"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#2AB2FE"})]})})]})},f=t(23192),v=t(71180),b=t(90299),h=t(50724),m=t(55485),g=t(46732),x=t(29241),j=t(55072);var _=function(e){var n=e.size;return(0,d.jsxs)("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("g",{clipPath:"url(#clip0_3007_70027)",children:(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.75 6.6859C1.75 3.95988 3.95988 1.75 6.6859 1.75h.98788c-.23022.41608-.36128.89466-.36128 1.40385s.13106.98777.36128 1.40384h-.71224c-1.32761 0-2.40385 1.07624-2.40385 2.40385 0 1.32761 1.07624 2.40385 2.40385 2.40385H15.609c3.3916 0 6.141 2.74941 6.141 6.14101 0 3.3916-2.7494 6.141-6.141 6.141H9.55584c.23019-.416.36123-.8946.36123-1.4037 0-.5092-.13108-.9879-.36134-1.404H15.609c1.8409 0 3.3333-1.4923 3.3333-3.3333 0-1.8409-1.4924-3.3333-3.3333-3.3333H6.96154C4.08329 12.1731 1.75 9.83979 1.75 6.96154V6.6859zM10.2163.25H6.6859C3.13145.25.25 3.13145.25 6.6859v.27564c0 3.70666 3.00486 6.71156 6.71154 6.71156H15.609c1.0125 0 1.8333.8208 1.8333 1.8333s-.8208 1.8333-1.8333 1.8333H7.01282c-1.60375 0-2.90385 1.3001-2.90385 2.9039 0 1.3248.88713 2.4423 2.09974 2.7911.06039.0173.12158.0328.18352.0463.20007.0436.40785.0665.62099.0665l.02449-.0001H15.609c4.22 0 7.641-3.421 7.641-7.641 0-4.22-3.421-7.64101-7.641-7.64101H6.96154c-.49918 0-.90385-.40467-.90385-.90385 0-.49918.40467-.90385.90385-.90385h3.25636c1.6038 0 2.9039-1.30009 2.9039-2.90384 0-1.60375-1.3001-2.903849-2.9039-2.90385h-.0016zm0 4.30769c-.77528 0-1.4038-.62852-1.4038-1.40384 0-.77505.62808-1.4034 1.403-1.40385h.0017c.7749.00045 1.403.6288 1.403 1.40385 0 .77532-.6285 1.40384-1.4039 1.40384zM7.01282 21.6474c-.10108 0-.19967-.0106-.29469-.0309-.03025-.0065-.06014-.0139-.08963-.0223-.58829-.1673-1.01912-.7086-1.01912-1.3505 0-.7753.62852-1.4039 1.40384-1.4039s1.40385.6286 1.40385 1.4039c0 .7696-.61935 1.3946-1.38683 1.4037h-.01742z",fill:"url(#paint0_linear_3007_70027)"})}),(0,d.jsxs)("defs",{children:[(0,d.jsxs)("linearGradient",{id:"paint0_linear_3007_70027",x1:"11.75",y1:".250001",x2:"11.75",y2:"23.1475",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{offset:".28125",stopColor:"#7D55EC"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#2AB2FE"})]}),(0,d.jsx)("clipPath",{id:"clip0_3007_70027",children:(0,d.jsx)("path",{fill:"#fff",transform:"matrix(0 1 1 0 0 0)",d:"M0 0h24v24H0z"})})]})]})},C=t(75457),O=t(44265),y=t(53943),k=t(89515),Z=t(93808),P=t(44085),S=t(38276),w=t(4190),I=t(17488),R=t(35686),E=t(8955),D=t(98464),T=t(72473),N=t(28795),M=t(11498),H=t(57653),L=t(35526),B=t(41143),V=t(81655),F=t(17380),A=t(70515),U=t(24944),G=t(72619),z=t(15610),K=t(42122),W=t(69419);function q(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?q(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var X={Icon:T.Nt,IconSelected:_,label:function(){return"Pipeline runs"},uuid:"pipeline_runs"},$={Icon:T.Re,IconSelected:p,label:function(){return"Block runs"},uuid:"block_runs"},Y=[X,$];function J(e){var n,t,i=e.pipeline,o=(0,a.useRouter)(),u=(0,c.useRef)(null),l=(0,c.useRef)(null),p=(0,c.useState)(null),_=p[0],Z=p[1],q=(0,c.useState)(null),J=q[0],ee=q[1],ne=(0,c.useState)(X),te=ne[0],ie=ne[1],re=(0,c.useState)(E.G7[0]),oe=re[0],ue=re[1],le=(0,c.useState)(null),ce=le[0],se=le[1],ae=(0,c.useState)({}),de=ae[0],pe=ae[1],fe=(0,c.useState)(null),ve=fe[0],be=fe[1],he=(0,c.useState)(!1),me=he[0],ge=he[1],xe=(0,c.useState)(null),je=xe[0],_e=xe[1],Ce=(0,c.useState)(null),Oe=Ce[0],ye=Ce[1],ke=(0,c.useState)(null),Ze=ke[0],Pe=ke[1],Se=(0,c.useMemo)((function(){return X.uuid===(null===te||void 0===te?void 0:te.uuid)}),[null===te||void 0===te?void 0:te.uuid]),we=i.uuid,Ie=R.ZP.pipelines.detail(we,{includes_content:!1,includes_outputs:!1},{revalidateOnFocus:!1}).data,Re=(0,c.useMemo)((function(){return Q(Q({},null===Ie||void 0===Ie?void 0:Ie.pipeline),{},{uuid:we})}),[Ie,we]),Ee=(0,W.iV)(),De=(0,D.Z)(Ee),Te=null!==Ee&&void 0!==Ee&&Ee.page?Ee.page:0;(0,c.useEffect)((function(){var e=Ee.pipeline_run_id,n=Ee.status;if(!(0,K.Xy)(Ee,De)){var t=Q(Q({},De),Ee);e?t.pipeline_run_id=e:t.pipeline_uuid=we,n?t.status=n:delete t.status,Pe(t),pe({})}}),[we,Ee,De]);var Ne={_limit:j.Q,_offset:Te*j.Q,pipeline_uuid:we},Me=(0,K.gR)(Q(Q({},Ze),Ne),[F.i,"page",V.lG.SORT_COL_IDX,V.lG.SORT_DIRECTION]);Se&&(Me=(0,K.gR)(Me,[M.$D.OFFSET,"status"]));var He=null===Ee||void 0===Ee?void 0:Ee[V.lG.SORT_COL_IDX],Le=null===Ee||void 0===Ee?void 0:Ee[V.lG.SORT_DIRECTION];if(He){var Be=f.fi[He],Ve=Le||V.sh.ASC;Me.order_by="".concat(Be,"%20").concat(Ve)}var Fe=R.ZP.block_runs.list(Me,{}).data;(0,c.useEffect)((function(){(0,G.bB)(Fe,ee)}),[Fe]);var Ae=(0,c.useMemo)((function(){return(null===Fe||void 0===Fe?void 0:Fe.block_runs)||[]}),[Fe]),Ue=Q(Q({},Ne),{},{disable_retries_grouping:!0});null!==Ee&&void 0!==Ee&&Ee.status&&(Ue.status=Ee.status),Se||(Ue=(0,K.gR)(Ue,[M.$D.OFFSET]));var Ge=R.ZP.pipeline_runs.list(Ue,{refreshInterval:5e3},{pauseFetch:!we}),ze=Ge.data,Ke=Ge.mutate,We=(0,c.useMemo)((function(){var e=(null===ze||void 0===ze?void 0:ze.pipeline_runs)||[];if(ve){var n=ve.toLowerCase();e=e.filter((function(e){var t=e.event_variables,i=e.variables;return JSON.stringify(i||{}).toLowerCase().includes(n)||JSON.stringify(t||{}).toLowerCase().includes(n)}))}return e}),[null===ze||void 0===ze?void 0:ze.pipeline_runs,ve]),qe=(0,c.useMemo)((function(){var e,n;return Se?(null===ze||void 0===ze||null===(e=ze.metadata)||void 0===e?void 0:e.count)||[]:(null===Fe||void 0===Fe||null===(n=Fe.metadata)||void 0===n?void 0:n.count)||[]}),[null===Fe||void 0===Fe||null===(n=Fe.metadata)||void 0===n?void 0:n.count,null===ze||void 0===ze||null===(t=ze.metadata)||void 0===t?void 0:t.count,Se]),Qe=(0,c.useMemo)((function(){return We.some((function(e){var n=e.status;return n===B.V.INITIAL||n===B.V.RUNNING}))}),[We]),Xe=(0,c.useMemo)((function(){return We.some((function(e){return e.status===B.V.FAILED}))}),[We]),$e=(0,c.useMemo)((function(){return Object.values(de||{}).filter((function(e){return null!==e}))}),[de]),Ye=$e.length,Je=(0,c.useMemo)((function(){return Object.values(de||{}).filter((function(e){return null!==e&&O.BF.includes(null===e||void 0===e?void 0:e.status)}))}),[de]),en=Je.length,nn=(0,s.Db)(R.ZP.pipelines.useUpdate(we),{onSuccess:function(e){return(0,G.wD)(e,{callback:function(){pe({}),Ke()},onErrorCallback:function(e,n){return Z({errors:n,response:e})}})}}),tn=(0,r.Z)(nn,1)[0],rn=(0,s.Db)((function(e){return R.ZP.pipeline_runs.useDelete(e)()}),{onSuccess:function(e){return(0,G.wD)(e,{callback:function(e){var n=e.pipeline_run.pipeline_uuid;null===Ke||void 0===Ke||Ke(),n?o.push("/pipelines/[pipeline]/runs","/pipelines/".concat(n,"/runs")):null===Ke||void 0===Ke||Ke(),se(null)},onErrorCallback:function(e,n){return Z({errors:n,response:e})}})}}),on=(0,r.Z)(rn,1)[0],un=(0,D.Z)(te);(0,c.useEffect)((function(){var e=Ee[F.i];e&&ie(Y.find((function(n){return n.uuid===e})))}),[Ee,te,un]);var ln=(0,c.useMemo)((function(){return[{isGroupingTitle:!0,label:function(){return"".concat(Ye," selected")},uuid:"runs_selected_count"},{beforeIcon:(0,d.jsx)(T.hY,{muted:0===Ye}),disabled:0===Ye,label:function(){return"Retry selected (".concat(Ye,")")},onClick:function(){return tn({pipeline:{pipeline_runs:$e,status:H.QK.RETRY}})},uuid:"retry_selected"},{beforeIcon:(0,d.jsx)(T.hY,{muted:!Xe||Qe}),disabled:!Xe||Qe,label:function(){return"Retry all incomplete block runs"},onClick:function(){return tn({pipeline:{status:H.QK.RETRY_INCOMPLETE_BLOCK_RUNS}})},openConfirmationDialogue:!0,uuid:H.QK.RETRY_INCOMPLETE_BLOCK_RUNS},{beforeIcon:(0,d.jsx)(T.uy,{muted:0===en}),disabled:0===en,label:function(){return"Cancel selected running (".concat(en,")")},onClick:function(){return tn({pipeline:{pipeline_runs:Je,status:B.V.CANCELLED}})},uuid:"cancel_selected_running"},{beforeIcon:(0,d.jsx)(T.uy,{muted:!(Qe&&Se)}),disabled:!(Qe&&Se),label:function(){return"Cancel all running"},onClick:function(){return tn({pipeline:{status:B.V.CANCELLED}})},openConfirmationDialogue:!0,uuid:N.B}]}),[Xe,Qe,Se,Je,en,$e,Ye,tn]),cn=(0,c.useMemo)((function(){return(0,d.jsx)(S.Z,{p:2,children:(0,d.jsx)(j.ZP,{maxPages:j.Et,onUpdate:function(e){var n=Number(e),t=Q(Q({},Ee),{},{page:n>=0?n:0});se(null),o.push("/pipelines/[pipeline]/runs","/pipelines/".concat(we,"/runs?").concat((0,W.uM)(t)))},page:Number(Te),totalPages:Math.ceil(qe/j.Q)})})}),[Te,we,Ee,o,qe]),sn=(0,c.useMemo)((function(){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(y.Z,{allowBulkSelect:(null===Re||void 0===Re?void 0:Re.type)!==H.qL.STREAMING,allowDelete:!0,deletePipelineRun:on,disableKeyboardNav:me,emptyMessage:ve?"No runs on this page match your search.":void 0,fetchPipelineRuns:Ke,onClickRow:function(e){return se((function(n){var t=We[e];return(null===n||void 0===n?void 0:n.id)!==t.id?t:null}))},pipelineRuns:We,selectedRun:ce,selectedRuns:de,setErrors:Z,setSelectedRun:se,setSelectedRuns:pe}),cn]})}),[on,Ke,cn,null===Re||void 0===Re?void 0:Re.type,We,ce,de,me,ve]),an=(0,c.useMemo)((function(){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.ZP,{blockRuns:Ae,pipeline:Re,sortableColumnIndexes:f.lG}),cn]})}),[Ae,cn,Re]);return(0,d.jsxs)(C.Z,{afterHidden:Se&&!ce,breadcrumbs:[{label:function(){return"Runs"}}],buildSidekick:Se?function(e){return(0,E.ZP)(Q(Q({},e),{},{selectedRun:ce,selectedTab:oe,setSelectedTab:ue}))}:function(e){return(0,E.ZP)(e)},errors:_||J,pageName:N.M.RUNS,pipeline:Re,setErrors:Z,title:function(e){var n=e.name;return"".concat(n," runs")},uuid:"".concat(N.M.RUNS,"_").concat(we),children:[(0,d.jsx)(x.Z,{children:(0,d.jsx)(S.Z,{pr:1,py:1,children:(0,d.jsxs)(m.ZP,{alignItems:"center",children:[(0,d.jsx)(b.Z,{onClickTab:function(e){var n=e.uuid;n!==(null===te||void 0===te?void 0:te.uuid)&&(Pe(null),(0,z.u)({tab:n},{replaceParams:!0}))},selectedTabUUID:null===te||void 0===te?void 0:te.uuid,tabs:Y}),Se&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(U.lZ,{right:1}),(0,d.jsxs)(S.Z,{px:2,children:[(0,d.jsx)(g.Z,{items:ln,multipleConfirmDialogues:!0,onClickCallback:function(){return ge(!1)},onClickOutside:function(){return ge(!1)},open:me,parentRef:u,roundedStyle:!0,setConfirmationAction:ye,setConfirmationDialogueOpen:_e,topOffset:4,uuid:"PipelineRuns/ActionsMenu",children:(0,d.jsx)(v.ZP,{afterIcon:(0,d.jsx)(T.K5,{}),onClick:function(){return ge((function(e){return!e}))},outline:!0,padding:"6px 12px",children:"Actions"})}),(0,d.jsx)(h.Z,{onClickOutside:function(){return _e(null)},open:!!je,children:(0,d.jsx)(k.Z,{danger:je===N.B,onCancel:function(){return _e(null)},onClick:function(){null===Oe||void 0===Oe||Oe(),_e(null)},subtitle:"This includes runs on other pages as well, not just the current page."+(je===H.QK.RETRY_INCOMPLETE_BLOCK_RUNS?" Incomplete block runs will be retried for FAILED pipeline runs specifically.":""),title:je===N.B?"Are you sure you want to cancel all pipeline runs in progress?":"Are you sure you want to retry all incomplete block runs for any failed pipeline runs?",width:L.OK})})]}),(0,d.jsxs)(P.Z,{compact:!0,defaultColor:!0,greyBorder:!0,onChange:function(e){e.preventDefault(),"all"===e.target.value?(Pe(null),(0,z.u)({tab:X.uuid},{replaceParams:!0})):(0,z.u)({page:0,status:e.target.value})},paddingRight:4*A.iI,placeholder:"Select run status",value:null===Ze||void 0===Ze?void 0:Ze.status,children:[(0,d.jsx)("option",{value:"all",children:"All statuses"},"all_statuses"),O.IK.map((function(e){return(0,d.jsx)("option",{value:e,children:O.Do[e]},e)}))]}),(0,d.jsx)(S.Z,{ml:2}),(0,d.jsx)(I.Z,Q(Q({},L.hZ),{},{afterIcon:ve?(0,d.jsx)(T.x8,{}):null,afterIconClick:function(){var e;be(""),null===l||void 0===l||null===(e=l.current)||void 0===e||e.focus()},onChange:function(e){return be(e.target.value)},paddingVertical:6,placeholder:"Search pipeline run variables",ref:l,value:ve}))]})]})})}),ze||Fe?(0,d.jsxs)(d.Fragment,{children:[Se&&sn,$.uuid===(null===te||void 0===te?void 0:te.uuid)&&an]}):(0,d.jsx)(S.Z,{m:3,children:(0,d.jsx)(w.Z,{inverted:!0})})]})}J.getInitialProps=function(){var e=(0,i.Z)(l().mark((function e(n){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:t}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var ee=(0,Z.Z)(J)},79897:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/runs",function(){return t(81080)}])}},function(e){e.O(0,[2678,1154,844,6639,4804,9775,1124,1751,6050,9161,3494,1557,2512,7858,5499,5283,4296,5457,5810,3745,5849,1550,2056,4052,3943,9774,2888,179],(function(){return n=79897,e(e.s=n);var n}));var n=e.O();_N_E=n}]);