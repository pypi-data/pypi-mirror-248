"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3437],{94629:function(e,n,t){t.d(n,{Z:function(){return S}});var o=t(82394),i=t(21831),l=t(82684),r=t(50724),s=t(82555),u=t(97618),c=t(70613),d=t(31557),a=t(68899),p=t(28598);function h(e,n){var t=e.children,o=e.noPadding;return(0,p.jsx)(a.HS,{noPadding:o,ref:n,children:t})}var f=l.forwardRef(h),v=t(62547),m=t(82571),j=t(98464),x=t(77417),g=t(46684),b=t(70515),y=t(53808),_=t(19183);function Z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Z(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function P(e,n){e.addProjectBreadcrumbToCustomBreadcrumbs;var t=e.after,o=e.afterHeader,h=e.afterHidden,Z=e.afterWidth,P=e.afterWidthOverride,S=e.appendBreadcrumbs,O=e.before,E=e.beforeWidth,I=e.breadcrumbs,R=e.children,C=e.contained,w=e.errors,A=e.headerMenuItems,T=e.headerOffset,N=e.hideAfterCompletely,L=e.mainContainerHeader,D=e.navigationItems,U=e.setAfterHidden,B=e.setErrors,M=e.subheaderChildren,H=e.subheaderNoPadding,F=e.title,G=e.uuid,Q=(0,_.i)().width,Y="dashboard_after_width_".concat(G),W="dashboard_before_width_".concat(G),V=(0,l.useRef)(null),K=(0,l.useState)(P?Z:(0,y.U2)(Y,Z)),z=K[0],q=K[1],X=(0,l.useState)(!1),J=X[0],$=X[1],ee=(0,l.useState)(O?Math.max((0,y.U2)(W,E),13*b.iI):null),ne=ee[0],te=ee[1],oe=(0,l.useState)(!1),ie=oe[0],le=oe[1],re=(0,l.useState)(null)[1],se=(0,x.Z)().project,ue=[];I&&ue.push.apply(ue,(0,i.Z)(I)),null!==I&&void 0!==I&&I.length&&!S||!se||null!==I&&void 0!==I&&I.length||ue.unshift({bold:!S,label:function(){return F}}),(0,l.useEffect)((function(){null===V||void 0===V||!V.current||J||ie||null===re||void 0===re||re(V.current.getBoundingClientRect().width)}),[J,z,ie,ne,V,re,Q]),(0,l.useEffect)((function(){J||(0,y.t8)(Y,z)}),[h,J,z,Y]),(0,l.useEffect)((function(){ie||(0,y.t8)(W,ne)}),[ie,ne,W]);var ce=(0,j.Z)(Z);return(0,l.useEffect)((function(){P&&ce!==Z&&q(Z)}),[P,Z,ce]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.Z,{title:F}),(0,p.jsx)(d.Z,{breadcrumbs:ue,menuItems:A}),(0,p.jsxs)(a.Nk,{ref:n,children:[0!==(null===D||void 0===D?void 0:D.length)&&(0,p.jsx)(a.lm,{showMore:!0,children:(0,p.jsx)(m.Z,{navigationItems:D,showMore:!0})}),(0,p.jsx)(u.Z,{flex:1,flexDirection:"column",children:(0,p.jsxs)(v.Z,{after:t,afterHeader:o,afterHeightOffset:g.Mz,afterHidden:h,afterMousedownActive:J,afterWidth:z,before:O,beforeHeightOffset:g.Mz,beforeMousedownActive:ie,beforeWidth:a.k1+(O?ne:0),contained:C,headerOffset:T,hideAfterCompletely:!U||N,leftOffset:O?a.k1:null,mainContainerHeader:L,mainContainerRef:V,setAfterHidden:U,setAfterMousedownActive:$,setAfterWidth:q,setBeforeMousedownActive:le,setBeforeWidth:te,children:[M&&(0,p.jsx)(f,{noPadding:H,children:M}),R]})})]}),w&&(0,p.jsx)(r.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===B||void 0===B?void 0:B(null)},children:(0,p.jsx)(s.Z,k(k({},w),{},{onClose:function(){return null===B||void 0===B?void 0:B(null)}}))})]})}var S=l.forwardRef(P)},8569:function(e,n,t){t.d(n,{Z:function(){return ve}});var o=t(61049);function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,n,t){return l=i()?Reflect.construct:function(e,n,t){var i=[null];i.push.apply(i,n);var l=new(Function.bind.apply(e,i));return t&&(0,o.Z)(l,t.prototype),l},l.apply(null,arguments)}var r=t(21831),s=t(82394),u=t(75582),c=t(12691),d=t.n(c),a=t(38626),p=t(21764),h=t(82684),f=t(69864),v=t(34376),m=t(32013),j=t(98777),x=t(71180),g=t(31882),b=t(97618),y=t(55485),_=t(14466),Z=t(48670),k=t(88543),P=t(38276),S=t(30160),O=t(35686),E=t(72473),I=t(8193),R=t(70515),C=t(81728),w=t(3917),A=t(55283),T=t(50178),N=t(86735),L=t(72619),D=t(44085),U=t(17488),B=t(28598);function M(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?M(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var F="CUSTOM_VALUE_TYPE",G={compact:!0,monospace:!0,small:!0};var Q=function(e){var n=e.leftKey,t=e.leftObjectKeys,o=e.leftObjectType,i=e.leftObjectTypeState,l=e.leftValue,r=e.leftValueType,u=e.rightAligned,c=e.setLeftKey,d=e.setLeftObjectTypeState,a=e.updatePredicate,p=(0,h.useRef)(null),f=(0,h.useState)(),v=f[0],m=f[1];(0,h.useEffect)((function(){var e,n;m(null===p||void 0===p||null===(e=p.current)||void 0===e||null===(n=e.getBoundingClientRect())||void 0===n?void 0:n.width)}),[]),(0,h.useEffect)((function(){var e,n;m(null===p||void 0===p||null===(e=p.current)||void 0===e||null===(n=e.getBoundingClientRect())||void 0===n?void 0:n.width)}),[o,i]);var j=(0,h.useMemo)((function(){return{alignItems:"center",justifyContent:u?"flex-start":"flex-end"}}),[u]),g=(0,h.useMemo)((function(){var e=(0,B.jsx)(S.ZP,{default:!0,small:!0,children:"Value data type"}),n=(0,B.jsx)(D.Z,{compact:!0,onChange:function(e){return a((0,s.Z)({},u?"right_value_type":"left_value_type",H(H({},r),{},{value_data_type:e.target.value})))},placeholder:"required",small:!0,value:null===r||void 0===r?void 0:r.value_data_type,children:Object.values(_.t4).map((function(e){return(0,B.jsx)("option",{value:e,children:e.toLowerCase()},e)}))});return(0,B.jsxs)(y.ZP,H(H({},j),{},{children:[u?n:e,(0,B.jsx)(P.Z,{mr:1}),u?e:n]}))}),[r,u,j,a]),b=(0,h.useMemo)((function(){var e=(0,B.jsx)(S.ZP,{default:!0,small:!0,children:"Get value from"}),n=F===String(i)||!o&&l,t=(0,B.jsxs)(D.Z,H(H({},G),{},{onChange:function(e){var n,t,o=e.target.value;(d(o),F===o)?a((n={},(0,s.Z)(n,u?"right_object_keys":"left_object_keys",null),(0,s.Z)(n,u?"right_object_type":"left_object_type",null),n)):a((t={},(0,s.Z)(t,u?"right_object_type":"left_object_type",o),(0,s.Z)(t,u?"right_value":"left_value",null),t))},placeholder:"required",value:n?F:o,children:[(0,B.jsx)("option",{value:F,children:"Custom value"}),Object.values(_.XG).map((function(e){return(0,B.jsx)("option",{value:e,children:e.toLowerCase()},e)}))]})),r=n&&(0,B.jsxs)(B.Fragment,{children:[!u&&(0,B.jsx)(P.Z,{mr:1}),(0,B.jsx)(U.Z,H(H({},G),{},{onChange:function(e){return a((0,s.Z)({},u?"right_value":"left_value",e.target.value))},value:l||""})),u&&(0,B.jsx)(P.Z,{mr:1})]});return(0,B.jsxs)(y.ZP,H(H({},j),{},{children:[!u&&e,u&&r,u&&t,(0,B.jsx)(P.Z,{mr:1}),!u&&t,!u&&r,u&&e]}))}),[o,i,l,d,j,a]),Z=(0,h.useMemo)((function(){return(0,B.jsxs)(B.Fragment,{children:[u&&(0,B.jsx)("div",{style:{paddingRight:4}}),(0,B.jsx)(x.ZP,{compact:!0,disabled:!n,onClick:function(){a((0,s.Z)({},u?"right_object_keys":"left_object_keys",(t||[]).concat(n))),c(null)},padding:"2px 6px",ref:p,small:!0,children:"Add key"}),!u&&(0,B.jsx)("div",{style:{paddingRight:4}})]})}),[n,t,u,c,a]),k=(0,h.useMemo)((function(){var e=(0,B.jsx)(S.ZP,{default:!0,small:!0,children:"Value extraction keys"}),i=(0,B.jsx)(U.Z,H(H({},G),{},{buttonAfter:!u&&Z,buttonAfterWidth:u||"undefined"===typeof v?null:v+10,buttonBefore:u&&Z,buttonBeforeWidth:u&&"undefined"!==typeof v?v+10:null,onChange:function(e){c(e.target.value)},placeholder:"Enter key...",value:n||""}));B.Fragment,B.Fragment;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(y.ZP,H(H({},j),{},{children:[u?i:e,(0,B.jsx)(P.Z,{mr:1}),u?e:i]})),(null===t||void 0===t?void 0:t.length)>=1&&(0,B.jsx)(P.Z,{mt:1,children:(0,B.jsxs)(y.ZP,H(H({},j),{},{children:[(0,B.jsx)(S.ZP,{default:!0,monospace:!0,xsmall:!0,children:o}),!(null!==t&&void 0!==t&&t.length)&&(0,B.jsxs)(S.ZP,{monospace:!0,muted:!0,xsmall:!0,children:["['",(0,B.jsx)(S.ZP,{default:!0,inline:!0,monospace:!0,xsmall:!0,children:"..."}),"']"]}),null===t||void 0===t?void 0:t.map((function(e){return(0,B.jsxs)(S.ZP,{monospace:!0,muted:!0,xsmall:!0,children:["['",(0,B.jsx)(S.ZP,{default:!0,inline:!0,monospace:!0,xsmall:!0,children:e}),"']"]})})),(0,B.jsx)("div",{style:{marginRight:4}}),(0,B.jsx)(x.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){a((0,s.Z)({},u?"right_object_keys":"left_object_keys",(t||[]).slice(0,Math.max(0,(null===t||void 0===t?void 0:t.length)-1))))},children:(0,B.jsxs)(y.ZP,{alignItems:"center",children:[(0,B.jsx)(E.x8,{danger:!0,size:1.25*R.iI}),(0,B.jsx)("div",{style:{marginRight:2}}),(0,B.jsx)(S.ZP,{default:!0,xsmall:!0,children:"Delete key"})]})})]}))})]})}),[v,Z,n,t,o,u,j]);return(0,B.jsxs)(B.Fragment,{children:[g,(0,B.jsx)(P.Z,{mt:1}),b,(0,B.jsx)(P.Z,{mt:1}),o&&F!==String(i)&&k]})},Y=t(65956),W=t(44897),V=t(61896),K=1.25*R.iI,z=1.5*R.iI,q=R.iI/4,X=.75*R.iI,J=R.iI/2,$=(0,a.css)([""," ",""],(function(e){return!e.default&&"\n    background-color: ".concat((e.theme.accent||W.Z.accent).purple,";\n  ")}),(function(e){return e.default&&"\n    background-color: ".concat((e.theme.content||W.Z.content).muted,";\n  ")})),ee=a.default.div.withConfig({displayName:"indexstyle__LabelStyle",componentId:"sc-1v7t9a0-0"})(["border-radius:100px;padding:","px ","px;",""],q,z,(function(e){return"\n    background-color: ".concat((e.theme.background||W.Z.background).chartBlock,";\n    border: ").concat(1,"px solid ").concat((e.theme.interactive||W.Z.interactive).defaultBorder,";\n  ")})),ne=a.default.div.withConfig({displayName:"indexstyle__CircleStyle",componentId:"sc-1v7t9a0-1"})(["",";border-radius:","px;height:","px;width:","px;",""],$,1.25*R.iI,K,K,(function(e){return"\n    border: 1px solid ".concat((e.theme.interactive||W.Z.interactive).hoverBorder,";\n  ")})),te=a.default.div.withConfig({displayName:"indexstyle__OperatorStyle",componentId:"sc-1v7t9a0-2"})(["",";min-width:","px;padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;"],$,K+2*(1+z),R.iI/4,J,J,R.iI/4+1),oe=a.default.div.withConfig({displayName:"indexstyle__VerticalLineStyle",componentId:"sc-1v7t9a0-3"})(["",";width:","px;margin-right:","px;"," ",""],$,X,z+1+K/2-X/2,(function(e){return e.last&&"\n    height: calc(50% - ".concat(q+1+V.dN/2,"px);\n  ")}),(function(e){return!e.last&&"\n    height: 100%;\n  "}));var ie=function(e){var n=e.andOrOperator,t=e.children,o=e.first,i=e.last,l=e.level,r=e.predicate,s=e.removePredicate,u=e.title,c=e.updatePredicate,d=(0,h.useRef)(null),a=(0,h.useState)(null),p=a[0],f=a[1],v=(0,h.useState)(null),m=v[0],j=v[1],g=(0,h.useState)(null),Z=g[0],k=g[1],O=(0,h.useState)(null),I=O[0],C=O[1],w=(0,h.useState)(null),A=(w[0],w[1]),T=(r.and_or_operator,r.left_object_keys),N=r.left_object_type,L=r.left_value,U=r.left_value_type,M=r.operator,H=r.right_object_keys,F=r.right_object_type,G=r.right_value,W=r.right_value_type;(0,h.useEffect)((function(){var e,n;A(null===d||void 0===d||null===(e=d.current)||void 0===e||null===(n=e.getBoundingClientRect())||void 0===n?void 0:n.height)}),[]),(0,h.useEffect)((function(){var e,n;A(null===d||void 0===d||null===(e=d.current)||void 0===e||null===(n=e.getBoundingClientRect())||void 0===n?void 0:n.height)}),[N,F]);var V=(0,h.useMemo)((function(){if(!n)return null;var e=(0,B.jsx)(S.ZP,{bold:!0,center:!0,monospace:!0,uppercase:!0,children:n});return(0,B.jsx)(te,{default:_.YB.OR===n,children:e})}),[n,l]);return(0,B.jsxs)(y.ZP,{children:[(0,B.jsxs)(y.ZP,{alignItems:"flex-end",flexDirection:"column",children:[!o&&i&&(0,B.jsx)(oe,{default:_.YB.OR===n,last:!0}),(0,B.jsx)(ee,{children:(0,B.jsxs)(y.ZP,{alignItems:"center",children:[(0,B.jsx)(S.ZP,{monospace:!0,children:u}),(0,B.jsx)(P.Z,{mr:1}),(0,B.jsx)(ne,{default:_.YB.OR===n})]})}),!i&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(oe,{default:_.YB.OR===n}),V,(0,B.jsx)(oe,{default:_.YB.OR===n})]})]}),(0,B.jsx)(P.Z,{mr:R.cd}),(0,B.jsx)(b.Z,{flex:1,children:(0,B.jsxs)(y.ZP,{flexDirection:"column",fullWidth:!0,ref:d,children:[(0,B.jsxs)(Y.Z,{dark:!!(l%2),children:[(0,B.jsxs)(y.ZP,{children:[(0,B.jsxs)(b.Z,{flex:1,flexDirection:"column",children:[(0,B.jsxs)(y.ZP,{justifyContent:"center",children:[(0,B.jsxs)(y.ZP,{alignItems:"center",justifyContent:"flex-end",children:[!N&&"undefined"===typeof L&&(0,B.jsx)(S.ZP,{monospace:!0,muted:!0,small:!0,children:"Left expression"}),!N&&L&&(0,B.jsx)(S.ZP,{default:!0,monospace:!0,small:!0,children:_.t4.STRING===(null===U||void 0===U?void 0:U.value_data_type)?"'".concat(L,"'"):L}),N&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(S.ZP,{default:!0,monospace:!0,small:!0,children:N}),!(null!==T&&void 0!==T&&T.length)&&(0,B.jsxs)(S.ZP,{monospace:!0,muted:!0,small:!0,children:["['",(0,B.jsx)(S.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:"..."}),"']"]}),null===T||void 0===T?void 0:T.map((function(e){return(0,B.jsxs)(S.ZP,{monospace:!0,muted:!0,small:!0,children:["['",(0,B.jsx)(S.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:e}),"']"]})}))]})]}),(0,B.jsx)(P.Z,{mr:1}),(0,B.jsx)(S.ZP,{default:!0,monospace:!0,small:!0,children:M?_.N_[M]:"operator"}),(!M||!_.i9.includes(M))&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(P.Z,{mr:1}),(0,B.jsxs)(y.ZP,{alignItems:"center",justifyContent:"flex-start",children:[!F&&"undefined"===typeof G&&(0,B.jsx)(S.ZP,{monospace:!0,muted:!0,small:!0,children:"Right expression"}),!F&&G&&(0,B.jsx)(S.ZP,{default:!0,monospace:!0,small:!0,children:_.t4.STRING===(null===W||void 0===W?void 0:W.value_data_type)?"'".concat(G,"'"):G}),F&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(S.ZP,{default:!0,monospace:!0,small:!0,children:F}),!(null!==H&&void 0!==H&&H.length)&&(0,B.jsxs)(S.ZP,{monospace:!0,muted:!0,small:!0,children:["['",(0,B.jsx)(S.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:"..."}),"']"]}),null===H||void 0===H?void 0:H.map((function(e){return(0,B.jsxs)(S.ZP,{monospace:!0,muted:!0,small:!0,children:["['",(0,B.jsx)(S.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:e}),"']"]})}))]})]})]})]}),(0,B.jsx)(P.Z,{mb:R.cd}),(0,B.jsxs)(y.ZP,{alignItems:"center",children:[(0,B.jsx)(b.Z,{flex:1,flexDirection:"column",children:(0,B.jsx)(Q,{leftKey:m,leftObjectKeys:T,leftObjectType:N,leftObjectTypeState:p,leftValue:L,leftValueType:U,setLeftKey:j,setLeftObjectTypeState:f,updatePredicate:c})}),(0,B.jsx)(P.Z,{mr:R.cd}),(0,B.jsx)("div",{children:(0,B.jsx)(D.Z,{alignCenter:!0,compact:!0,onChange:function(e){return c({operator:e.target.value})},placeholder:"required",small:!0,value:M,children:Object.values(_.W6).map((function(e){return(0,B.jsx)("option",{value:e,children:_.N_[e]},e)}))})}),(0,B.jsx)(P.Z,{mr:R.cd}),(0,B.jsx)(b.Z,{flex:1,flexDirection:"column",children:(0,B.jsx)(Q,{leftKey:I,leftObjectKeys:H,leftObjectType:F,leftObjectTypeState:Z,leftValue:G,leftValueType:W,rightAligned:!0,setLeftKey:C,setLeftObjectTypeState:k,updatePredicate:c})})]})]}),(0,B.jsx)("div",{children:(0,B.jsx)(x.ZP,{beforeIcon:(0,B.jsx)(E.rF,{muted:!0,size:1.25*R.iI}),compact:!0,onClick:function(){return s()},small:!0,children:(0,B.jsxs)(S.ZP,{default:!0,monospace:!0,small:!0,children:["Delete ",u]})})})]}),t]}),!i&&(0,B.jsx)(P.Z,{mb:R.cd})]})})]})};function le(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function re(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?le(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):le(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var se={and_or_operator:_.YB.AND,left_value_type:{value_data_type:_.t4.STRING},operator:_.W6.EQUALS,right_value_type:{value_data_type:_.t4.STRING}};var ue=function(e){var n=e.index,t=e.level,o=e.predicate,i=e.renderPredicate,l=e.setPredicate,s=(0,h.useMemo)((function(){return(null===o||void 0===o?void 0:o.predicates)||[]}),[o]),u=((0,h.useCallback)((function(e){l({predicates:e})}),[l]),(0,h.useCallback)((function(){l({predicates:(s||[]).concat(se)})}),[s,l])),c=(0,h.useCallback)((function(e,n){var t=(0,r.Z)(s);t[n]=e,l({predicates:t})}),[s,l]),d=(0,h.useMemo)((function(){return(null===s||void 0===s?void 0:s.length)||0}),[s]),a=(0,h.useCallback)((function(e,n){if(!(e<0)){var t=(0,C.bH)()[n];return 0===e||(t=t.toLowerCase(),e>=2&&(t="".concat(t).concat(e-1))),t}}),[]),p=(0,h.useMemo)((function(){return a(t,n)}),[a,n,t]);return(0,B.jsxs)(B.Fragment,{children:[null===s||void 0===s?void 0:s.map((function(e,n){var r,u=function(t){return c(re(re({},e),t),n)};return(0,B.jsx)(ie,{andOrOperator:null===o||void 0===o?void 0:o.and_or_operator,first:0===n,last:n===d-1,level:t+1,predicate:e,removePredicate:function(){l(re(re({},e),{},{predicates:(0,N.oM)(s,n)}))},title:a(t+1,n),updatePredicate:u,children:(0,B.jsx)(P.Z,{mt:(null===e||void 0===e||null===(r=e.predicates)||void 0===r?void 0:r.length)>=1?R.cd:0,children:i({index:n,level:t+1,predicate:e,renderPredicate:i,setPredicate:u})})},"predicate-".concat(n))})),(0,B.jsx)(P.Z,{mt:R.cd,children:(0,B.jsxs)(y.ZP,{alignItems:"center",children:[t>=0&&(null===s||void 0===s?void 0:s.length)>=2&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(D.Z,{compact:!0,monospace:!0,onChange:function(e){return l(re(re({},o),{},{and_or_operator:e.target.value}))},small:!0,paddingVertical:3,value:null===o||void 0===o?void 0:o.and_or_operator,children:Object.values(_.YB).map((function(e){return(0,B.jsx)("option",{value:e,children:(_.YB.OR===e?"".concat(e," "):e).toUpperCase()},e)}))}),(0,B.jsx)(P.Z,{mr:1})]}),(0,B.jsxs)(x.ZP,{compact:t>=0,beforeIcon:(0,B.jsx)(E.mm,{}),onClick:function(){return u()},secondary:!0,small:t>=0,children:["Add predicate",p&&" in ".concat(p)]})]})})]})};function ce(e){var n=e.index,t=e.level,o=e.predicate,i=e.renderPredicate,l=e.setPredicate;return(0,B.jsx)(ue,{index:n,level:t,predicate:o,renderPredicate:i,setPredicate:l})}var de=t(42122),ae=t(70320),pe=t(23780);function he(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function fe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?he(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):he(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ve=function(e){var n,t,o,i,s,c,D,U,M,H,F,G,Q,Y,W,V,K,z,q,X,J,$,ee,ne,te,oe=e.isNew,ie=e.operationType,le=e.resourceType,re=e.rootProject,se=e.uuid,ue=(0,ae.qB)(),he=(0,T.PR)(),ve=(0,v.useRouter)(),me="GlobalHookDetail/".concat(se),je=(0,h.useContext)(a.ThemeContext),xe=(0,h.useState)(null),ge=xe[0],be=xe[1],ye=(0,h.useState)(!1),_e=ye[0],Ze=ye[1],ke=(0,h.useState)(ie),Pe=ke[0],Se=(ke[1],(0,h.useState)(le)),Oe=Se[0],Ee=(Se[1],(0,pe.VI)(null,{},[],{uuid:me})),Ie=(0,u.Z)(Ee,1)[0],Re=(0,h.useMemo)((function(){return(0,de.hB)(fe({include_operation_types:1,include_resource_types:1,include_snapshot_validation:1,operation_type:"undefined"===typeof Pe?null:Pe,resource_type:"undefined"===typeof Oe?null:Oe},re?{root_project:re}:{}))}),[Pe,Oe]),Ce=O.ZP.global_hooks.detail(oe?"__new__":se,Re).data,we=(0,h.useMemo)((function(){return null===Ce||void 0===Ce?void 0:Ce.global_hook}),[Ce]),Ae=(0,h.useMemo)((function(){return{onErrorCallback:function(e){var n=e.error,t=n.errors,o=n.exception,i=n.message,l=n.type,r=e.response;return p.Am.error((null===t||void 0===t?void 0:t.error)||o||i,{position:p.Am.POSITION.BOTTOM_RIGHT,toastId:l}),Ie({errors:t,response:r})}}}),[]),Te=(0,f.Db)(O.ZP.global_hooks.useCreate(),{onSuccess:function(e){return(0,L.wD)(e,fe({callback:function(e){var n=e.global_hook;ve.replace("/".concat(re?"platform/":"","global-hooks/").concat(n.uuid,"?operation_type=").concat(n.operation_type,"&resource_type=").concat(n.resource_type))}},Ae))}}),Ne=(0,u.Z)(Te,2),Le=Ne[0],De=Ne[1].isLoading,Ue=(0,f.Db)(O.ZP.global_hooks.useUpdate(null===we||void 0===we?void 0:we.uuid,Re),{onSuccess:function(e){return(0,L.wD)(e,fe({callback:function(e){var n=e.global_hook;$e((function(e){return fe(fe({},e),n)})),p.Am.success("Global hook changes successfully saved.",{position:p.Am.POSITION.BOTTOM_RIGHT,toastId:"global-hooks-success-".concat(n.uuid)})}},Ae))}}),Be=(0,u.Z)(Ue,2),Me=Be[0],He=Be[1].isLoading,Fe=(0,f.Db)((function(e){var n=e.pipeline;return O.ZP.global_hooks.useUpdate(null===we||void 0===we?void 0:we.uuid,Re)({global_hook:{pipeline:n,snapshot:1}})}),{onSuccess:function(e){return(0,L.wD)(e,fe({callback:function(e){var n=e.global_hook;$e((function(e){return fe(fe({},e),{},{metadata:fe(fe({},null===e||void 0===e?void 0:e.metadata),null===n||void 0===n?void 0:n.metadata),pipeline:fe(fe({},null===e||void 0===e?void 0:e.pipeline),null===n||void 0===n?void 0:n.pipeline)})})),p.Am.success("Snapshot successfully created.",{position:p.Am.POSITION.BOTTOM_RIGHT,toastId:"global-hooks-snapshot-success-".concat(n.uuid)})}},Ae))}}),Ge=(0,u.Z)(Fe,2),Qe=Ge[0],Ye=Ge[1].isLoading,We=(0,f.Db)(O.ZP.global_hooks.useDelete(null===we||void 0===we?void 0:we.uuid,Re),{onSuccess:function(e){return(0,L.wD)(e,fe({callback:function(e){var n=e.global_hook;p.Am.success("Global hook changes successfully saved.",{position:p.Am.POSITION.BOTTOM_RIGHT,toastId:"global-hooks-success-".concat(n.uuid)}),ve.replace("/".concat(re?"platform/":"","global-hooks"))}},Ae))}}),Ve=(0,u.Z)(We,2),Ke=Ve[0],ze=Ve[1].isLoading,qe=O.ZP.pipelines.list().data,Xe=(0,h.useMemo)((function(){return(0,N.YC)((null===qe||void 0===qe?void 0:qe.pipelines)||[],(function(e){return e.name}))}),[qe]),Je=(0,h.useMemo)((function(){return(0,N.HK)(Xe||[],(function(e){return e.uuid}))}),[Xe]),$e=(0,h.useCallback)((function(e){be(e),Ze(!0)}),[be,Ze]);(0,h.useEffect)((function(){we&&!ge&&be(we)}),[ge,we,be]);var en=(0,h.useMemo)((function(){return null!==ge&&void 0!==ge&&ge.operation_type&&null!==ge&&void 0!==ge&&ge.resource_type?"".concat((0,C.vg)(null===ge||void 0===ge?void 0:ge.operation_type)," ").concat(null===ge||void 0===ge?void 0:ge.resource_type," operation"):null!==ge&&void 0!==ge&&ge.resource_type?"".concat(null===ge||void 0===ge?void 0:ge.resource_type," operation"):null!==ge&&void 0!==ge&&ge.operation_type?"".concat(null===ge||void 0===ge?void 0:ge.operation_type," operation"):"operation"}),[ge]),nn=(0,h.useMemo)((function(){var e;return null===Je||void 0===Je?void 0:Je[null===ge||void 0===ge||null===(e=ge.pipeline)||void 0===e?void 0:e.uuid]}),[ge,Je]),tn=(0,h.useMemo)((function(){return(null===nn||void 0===nn?void 0:nn.blocks)||[]}),[nn]),on=(0,h.useMemo)((function(){return(0,N.HK)(tn||[],(function(e){return e.uuid}))}),[tn]),ln=(0,h.useMemo)((function(){return(null===ge||void 0===ge?void 0:ge.outputs)||[]}),[ge]),rn=(0,h.useCallback)((function(e,n){var t=(0,r.Z)(ln||[]);t[n]=e,$e((function(e){return fe(fe({},e),{},{outputs:t})}))}),[ln,$e]),sn=(0,h.useMemo)((function(){return(0,B.jsx)(x.ZP,{beforeIcon:(0,B.jsx)(E.mm,{}),compact:(null===ln||void 0===ln?void 0:ln.length)>=1,small:(null===ln||void 0===ln?void 0:ln.length)>=1,onClick:function(){return $e((function(e){return fe(fe({},e),{},{outputs:((null===e||void 0===e?void 0:e.outputs)||[]).concat({block:{uuid:null},key:_.TT.PAYLOAD})})}))},secondary:!0,children:"Add block output"})}),[ln,$e]),un=(0,h.useMemo)((function(){return null===ln||void 0===ln?void 0:ln.map((function(e,n){var t,o,i=e.block,l=e.key,r=e.keyMore,s=e.keys,u=null===on||void 0===on?void 0:on[null===i||void 0===i?void 0:i.uuid];return o=u?(0,B.jsx)(d(),{as:"/pipelines/".concat(null===nn||void 0===nn?void 0:nn.uuid,"/edit?block_uuid=").concat(null===u||void 0===u?void 0:u.uuid),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,B.jsx)(Z.Z,{block:!0,openNewWindow:!0,children:(0,B.jsx)(S.ZP,{color:(0,A.qn)(null===u||void 0===u?void 0:u.type,{blockColor:null===u||void 0===u?void 0:u.color,theme:je}).accent,monospace:!0,children:(null===u||void 0===u?void 0:u.uuid)||"[select a block]"})})}):(0,B.jsx)(S.ZP,{default:!0,monospace:!0,children:(null===u||void 0===u?void 0:u.uuid)||(null===i||void 0===i?void 0:i.uuid)||"[select a block]"}),(0,B.jsxs)(j.Z,{noBorderRadius:!0,noPaddingContent:!0,title:(0,B.jsxs)(y.ZP,{alignItems:"center",children:[o,(0,B.jsx)(P.Z,{mr:1}),(0,B.jsx)(E.Kw,{muted:!0}),(0,B.jsx)(P.Z,{mr:1}),(0,B.jsxs)(S.ZP,{default:!0,monospace:!0,children:[l||"{object}",(null===s||void 0===s?void 0:s.length)>=1&&(null===s||void 0===s?void 0:s.map((function(e){return(0,B.jsxs)(S.ZP,{default:!0,inline:!0,monospace:!0,children:["['",e,"']"]})})))]})]}),titleXPadding:R.cd*R.iI,titleYPadding:R.cd*R.iI,children:[(0,B.jsx)(k.S,{title:"Block to extract data from",description:"The output data from this block will be merged into the ".concat(en,"\u2019s data."),selectInput:{monospace:!0,onChange:function(t){return rn(fe(fe({},e),{},{block:fe(fe({},u),{},{uuid:t.target.value})}),n)},options:null===tn||void 0===tn?void 0:tn.map((function(e){return{label:e.name,value:e.uuid}})),placeholder:"Select a block",value:null===u||void 0===u?void 0:u.uuid}},"block-uuid-".concat(n)),(0,B.jsx)(k.S,{title:"Object to merge block output data into",description:"Select the ".concat(en," object to merge the block output data into."),selectInput:{monospace:!0,onChange:function(t){return rn(fe(fe({},e),{},{key:t.target.value}),n)},options:null===(t=Object.values(_.TT))||void 0===t?void 0:t.map((function(e){return{label:e,value:e}})),placeholder:"Select an object",value:l}},"key-".concat(n)),(0,B.jsxs)(k.S,{title:"Additional dictionary keys",description:(0,B.jsxs)(S.ZP,{muted:!0,small:!0,children:["If there is a nested object or value in the $",en," data that you want to merge the block output data into,",(0,B.jsx)("br",{}),"use these additional keys to instruct the hook on how nested you want to merge the block output data."]}),textInput:{fullWidth:!1,monospace:!0,placeholder:"optional",onChange:function(t){return rn(fe(fe({},e),{},{keyMore:t.target.value}),n)},value:r},children:[null===s||void 0===s?void 0:s.map((function(t){return(0,B.jsx)(P.Z,{ml:1,children:(0,B.jsx)(g.Z,{border:!0,label:t,monospace:!0,onClick:function(){rn(fe(fe({},e),{},{keys:(s||[]).filter((function(e){return e!==t}))}),n)}})},"keys-".concat(n,"-").concat(t))})),(null===s||void 0===s?void 0:s.length)>=1&&(0,B.jsx)(P.Z,{mr:R.cd}),r&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(x.ZP,{compact:!0,onClick:function(){rn(fe(fe({},e),{},{keyMore:"",keys:(s||[]).concat(r)}),n)},small:!0,children:["Add key ",r]}),(0,B.jsx)(P.Z,{mr:R.cd})]})]},"keys-".concat(n)),(0,B.jsx)(k.S,{title:"Remove block output",children:(0,B.jsx)(x.ZP,{compact:!0,onClick:function(){return $e((function(e){return fe(fe({},e),{},{outputs:(0,N.oM)((null===e||void 0===e?void 0:e.outputs)||[],n)})}))},small:!0,children:"Remove"})})]})}))}),[tn,on,ln,nn,rn]),cn=(0,h.useMemo)((function(){return(0,de.GL)(ge||{},["conditions","operation_type","outputs","pipeline","predicate","resource_type","run_settings","stages","strategies"])}),[ge]),dn=(0,h.useMemo)((function(){return(null===ge||void 0===ge?void 0:ge.metadata)||{created_at:null,snapshot_hash:null,snapshot_valid:!1,snapshotted_at:null,updated_at:null,user:{id:null}}}),[ge]),an=(0,h.useMemo)((function(){return null===ge||void 0===ge?void 0:ge.predicate}),[ge]),pn=(0,h.useMemo)((function(){return(0,B.jsx)(P.Z,{p:R.cd,children:ce({level:-1,predicate:an,renderPredicate:ce,setPredicate:function(e){return $e((function(n){return fe(fe({},n),{},{predicate:fe(fe({},e),{},{and_or_operator:_.YB.OR})})}))}})})}),[an,$e]);return(0,B.jsxs)(P.Z,{mb:8,p:R.cd,children:[(0,B.jsxs)(k.Z,{title:"What to run hook for",children:[(0,B.jsx)(k.S,{description:"This hook\u2019s UUID must be unique across all hooks for the same resource type and operation type.",invalid:_e&&!(null!==ge&&void 0!==ge&&ge.uuid),textInput:oe?{monospace:!0,onChange:function(e){return $e((function(n){return fe(fe({},n),{},{uuid:e.target.value})}))},placeholder:"e.g. bootstrap pipeline blocks",value:null===ge||void 0===ge?void 0:ge.uuid}:null,title:"Hook UUID",children:!oe&&(0,B.jsx)(P.Z,{px:R.cd,children:(0,B.jsx)(S.ZP,{large:!0,monospace:!0,children:se})})}),(0,B.jsx)(k.S,{description:"Select the resource this hook should be attached to.",invalid:_e&&!(null!==ge&&void 0!==ge&&ge.resource_type),selectInput:{monospace:!0,onChange:function(e){return $e((function(n){return fe(fe({},n),{},{resource_type:e.target.value})}))},options:null===ge||void 0===ge||null===(n=ge.resource_types)||void 0===n?void 0:n.map((function(e){return{label:(0,C.j3)(e),value:e}})),placeholder:"e.g. Pipeline",value:null===ge||void 0===ge?void 0:ge.resource_type},title:"Resource type"}),(0,B.jsx)(k.S,{description:"When a specific operation occurs for a given resource, this hook will be invoked for that specific operation on the configured resource.",invalid:_e&&!(null!==ge&&void 0!==ge&&ge.operation_type),selectInput:{monospace:!0,onChange:function(e){return $e((function(n){return fe(fe({},n),{},{operation_type:e.target.value})}))},options:null===ge||void 0===ge||null===(t=ge.operation_types)||void 0===t?void 0:t.map((function(e){return{label:(0,C.vg)(e),value:e}})),placeholder:"e.g. Update",value:null===ge||void 0===ge?void 0:ge.operation_type},title:"Operation type"}),!oe&&(0,B.jsx)(m.Z,{noBorder:!0,noBoxShadow:!0,visibleMappingForced:{0:!0},children:(0,B.jsxs)(j.Z,{noBorderRadius:!0,noPaddingContent:!0,title:"Targeting",titleXPadding:R.cd*R.iI,titleYPadding:R.cd*R.iI,children:[(0,B.jsx)(P.Z,{p:R.cd,children:(0,B.jsxs)(S.ZP,{default:!0,children:["Add targeting conditions to determine what subset of ",null!==ge&&void 0!==ge&&ge.resource_type?(0,C._6)((0,C.j3)(null===ge||void 0===ge?void 0:ge.resource_type),2,null,!0):"resources"," this hook should run for."]})}),pn]})})]}),!oe&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(P.Z,{mb:R.cd}),(0,B.jsxs)(k.Z,{title:"When to run hook",children:[(0,B.jsx)(k.S,{title:"Before operation starts",description:"If enabled, this hook will be invoked before the ".concat(en," starts."),toggleSwitch:{checked:null===ge||void 0===ge||null===(o=ge.stages)||void 0===o?void 0:o.includes(_.SQ.BEFORE),onCheck:function(e){return $e((function(n){var t,o;return fe(fe({},n),{},{stages:e(null===n||void 0===n||null===(t=n.stages)||void 0===t?void 0:t.includes(_.SQ.BEFORE))?Array.from(l(Set,[((null===n||void 0===n?void 0:n.stages)||[]).concat(_.SQ.BEFORE)])):(null===n||void 0===n||null===(o=n.stages)||void 0===o?void 0:o.filter((function(e){return e!==_.SQ.BEFORE})))||[]})}))}}}),(0,B.jsx)(k.S,{title:"After operation completes",description:"If enabled, this hook will be invoked after the ".concat(en," ends."),toggleSwitch:{checked:null===ge||void 0===ge||null===(i=ge.stages)||void 0===i?void 0:i.includes(_.SQ.AFTER),onCheck:function(e){return $e((function(n){var t,o;return fe(fe({},n),{},{stages:e(null===n||void 0===n||null===(t=n.stages)||void 0===t?void 0:t.includes(_.SQ.AFTER))?Array.from(l(Set,[((null===n||void 0===n?void 0:n.stages)||[]).concat(_.SQ.AFTER)])):(null===n||void 0===n||null===(o=n.stages)||void 0===o?void 0:o.filter((function(e){return e!==_.SQ.AFTER})))||[]})}))}}}),(0,B.jsx)(k.S,{title:"Run if ".concat(en," succeeds"),description:"If enabled, this hook will be invoked if the ".concat(en," is successful and doesn\u2019t error."),toggleSwitch:{checked:null===ge||void 0===ge||null===(s=ge.conditions)||void 0===s?void 0:s.includes(_.sw.SUCCESS),onCheck:function(e){return $e((function(n){var t,o;return fe(fe({},n),{},{conditions:e(null===n||void 0===n||null===(t=n.conditions)||void 0===t?void 0:t.includes(_.sw.SUCCESS))?Array.from(l(Set,[((null===n||void 0===n?void 0:n.conditions)||[]).concat(_.sw.SUCCESS)])):(null===n||void 0===n||null===(o=n.conditions)||void 0===o?void 0:o.filter((function(e){return e!==_.sw.SUCCESS})))||[]})}))}}}),(0,B.jsx)(k.S,{title:"Run if ".concat(en," fails"),description:"If enabled, this hook will be invoked if the ".concat(en," fails with an error."),toggleSwitch:{checked:null===ge||void 0===ge||null===(c=ge.conditions)||void 0===c?void 0:c.includes(_.sw.FAILURE),onCheck:function(e){return $e((function(n){var t,o;return fe(fe({},n),{},{conditions:e(null===n||void 0===n||null===(t=n.conditions)||void 0===t?void 0:t.includes(_.sw.FAILURE))?Array.from(l(Set,[((null===n||void 0===n?void 0:n.conditions)||[]).concat(_.sw.FAILURE)])):(null===n||void 0===n||null===(o=n.conditions)||void 0===o?void 0:o.filter((function(e){return e!==_.sw.FAILURE})))||[]})}))}}})]}),(0,B.jsx)(P.Z,{mb:R.cd}),(0,B.jsxs)(k.Z,{title:"Code to run",description:"When the current hook gets triggered, it will execute the associated pipeline.",children:[(0,B.jsx)(k.S,{title:"Pipeline to execute",description:"Select a pipeline that will be executed every time this hook is triggered.",invalid:_e&&!(null!==ge&&void 0!==ge&&null!==(D=ge.pipeline)&&void 0!==D&&D.uuid),selectInput:{fullWidth:!1,monospace:!0,onChange:function(e){return $e((function(n){return fe(fe({},n),{},{pipeline:fe(fe({},null===n||void 0===n?void 0:n.pipeline),{},{uuid:e.target.value})})}))},options:null===Xe||void 0===Xe?void 0:Xe.map((function(e){var n=e.name,t=e.uuid;return{label:n||t,value:t}})),placeholder:"Select a pipeline",value:null===ge||void 0===ge||null===(U=ge.pipeline)||void 0===U?void 0:U.uuid},children:(null===ge||void 0===ge||null===(M=ge.pipeline)||void 0===M?void 0:M.uuid)&&(0,B.jsx)(P.Z,{mr:2,children:(0,B.jsx)(d(),{as:"/pipelines/".concat(null===ge||void 0===ge||null===(H=ge.pipeline)||void 0===H?void 0:H.uuid,"/edit"),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,B.jsx)(Z.Z,{block:!0,openNewWindow:!0,children:"View pipeline"})})})}),(0,B.jsxs)(k.S,{title:null===ge||void 0===ge||null===(F=ge.pipeline)||void 0===F||!F.uuid||null!==dn&&void 0!==dn&&dn.snapshot_hash||null!==dn&&void 0!==dn&&dn.snapshot_valid?"Valid code snapshot":"Code snapshot hasn\u2019t been created yet",description:(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(S.ZP,{muted:!0,small:!0,children:["Take a snapshot of ",null!==ge&&void 0!==ge&&null!==(G=ge.pipeline)&&void 0!==G&&G.uuid?(0,B.jsx)(S.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:null===ge||void 0===ge||null===(Q=ge.pipeline)||void 0===Q?void 0:Q.uuid}):"the associated pipeline","\u2019s code. The snapshot is used to validate the hook before it runs.",(0,B.jsx)("br",{}),"A hook cannot run if ",null!==ge&&void 0!==ge&&null!==(Y=ge.pipeline)&&void 0!==Y&&Y.uuid?(0,B.jsx)(S.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:null===ge||void 0===ge||null===(W=ge.pipeline)||void 0===W?void 0:W.uuid}):"the associated pipeline","\u2019s code has changed after the most recent snapshot has been made.",(0,B.jsx)("br",{}),"If the code changes, a new snapshot must be created."]})}),invalid:(null===ge||void 0===ge||null===(V=ge.pipeline)||void 0===V?void 0:V.uuid)&&(null===dn||void 0===dn?void 0:dn.snapshot_hash)&&!(null!==dn&&void 0!==dn&&dn.snapshot_valid),warning:(null===ge||void 0===ge||null===(K=ge.pipeline)||void 0===K?void 0:K.uuid)&&!(null!==dn&&void 0!==dn&&dn.snapshot_hash)&&!(null!==dn&&void 0!==dn&&dn.snapshot_valid),children:[!(null!==dn&&void 0!==dn&&dn.snapshot_hash)&&(0,B.jsx)(S.ZP,{default:!0,large:!0,children:null!==ge&&void 0!==ge&&null!==(z=ge.pipeline)&&void 0!==z&&z.uuid?"No snapshot has been created":"Select a pipeline before taking a snapshot"}),(null===dn||void 0===dn?void 0:dn.snapshot_hash)&&(0,B.jsx)(y.ZP,{flexDirection:"column",children:(0,B.jsx)(S.ZP,{danger:!(null!==dn&&void 0!==dn&&dn.snapshot_valid),large:!0,rightAligned:!0,success:null===dn||void 0===dn?void 0:dn.snapshot_valid,children:null!==dn&&void 0!==dn&&dn.snapshot_valid?"Snapshot valid":"Snapshot outdated"})})]}),(0,B.jsx)(P.Z,{p:R.cd,children:(0,B.jsx)(y.ZP,{alignItems:"center",justifyContent:"flex-end",children:(0,B.jsxs)(y.ZP,{alignItems:"center",children:[(null===dn||void 0===dn?void 0:dn.snapshotted_at)&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(S.ZP,{muted:!0,rightAligned:!0,small:!0,children:["Last snapshot at ",(0,B.jsx)(S.ZP,{inline:!0,muted:!0,small:!0,monospace:!0,children:null===dn||void 0===dn?void 0:dn.snapshotted_at})]}),(0,B.jsx)(P.Z,{mr:R.cd})]}),(0,B.jsx)(x.ZP,{disabled:!(null!==ge&&void 0!==ge&&null!==(q=ge.pipeline)&&void 0!==q&&q.uuid),loading:Ye,onClick:function(){return Qe({pipeline:null===ge||void 0===ge?void 0:ge.pipeline})},primary:!(null!==dn&&void 0!==dn&&dn.snapshot_valid),secondary:null===dn||void 0===dn?void 0:dn.snapshot_valid,children:null!==dn&&void 0!==dn&&dn.snapshot_hash?null!==dn&&void 0!==dn&&dn.snapshot_valid?"Update snapshot even though it\u2019s valid":"Update snapshot to make it valid":"Create snapshot of code"})]})})})]}),(0,B.jsx)(P.Z,{mb:R.cd}),(0,B.jsxs)(k.Z,{title:"How to run hook",children:[(0,B.jsx)(k.S,{title:"Stop operation if hook fails",description:"If enabled, the ".concat(en," will be cancelled and an error will be raised."),toggleSwitch:{checked:null===ge||void 0===ge||null===(X=ge.strategies)||void 0===X?void 0:X.includes(_.Ij.RAISE),onCheck:function(e){return $e((function(n){var t,o;return fe(fe({},n),{},{strategies:e(null===n||void 0===n||null===(t=n.strategies)||void 0===t?void 0:t.includes(_.Ij.RAISE))?Array.from(l(Set,[((null===n||void 0===n?void 0:n.strategies)||[]).concat(_.Ij.RAISE)])):(null===n||void 0===n||null===(o=n.strategies)||void 0===o?void 0:o.filter((function(e){return e!==_.Ij.RAISE})))||[]})}))}}}),(0,B.jsx)(k.S,{title:"Execute hook with history and logging",description:(0,B.jsxs)(S.ZP,{muted:!0,small:!0,children:["If enabled, anytime this hook is executed an associated pipeline run and block runs will be created.",(0,B.jsx)("br",{}),"This will provide a history of the hook execution as well as logging for observability.",(0,B.jsx)("br",{}),"However, this will have a significant impact on the ",en," resolution time.",(0,B.jsx)("br",{}),"This may cause very delayed API responsed and a degraded devloper experience."]}),toggleSwitch:{checked:!(null===ge||void 0===ge||null===(J=ge.run_settings)||void 0===J||!J.with_trigger),onCheck:function(e){return $e((function(n){var t;return fe(fe({},n),{},{run_settings:fe(fe({},null===n||void 0===n?void 0:n.run_settings),{},{with_trigger:e(null===n||void 0===n||null===(t=n.run_settings)||void 0===t?void 0:t.with_trigger)})})}))}}}),(0,B.jsx)(k.S,{title:"Run hook asynchronously",description:(0,B.jsxs)(S.ZP,{muted:!0,small:!0,children:["Hooks will execute the associated pipeline synchronously and prevent the current resource operation (e.g. API request) from resolving until all associated hooks for that resource operation are completed.",(0,B.jsx)("br",{}),"Hooks running synchronously can mutate the input data and output data. However, it can slow down the user experience in the application.",(0,B.jsx)("br",{}),"Enable this setting to run hooks asynchronously and not block the current resource operation from resolving.",(0,B.jsx)("br",{}),"However, asynchronous hooks cannot mutate the input data or output data. Use this asynchronous setting when hooks don\u2019t need to mutate data."]}),toggleSwitch:{checked:!(null===ge||void 0===ge||null===($=ge.run_settings)||void 0===$||!$.asynchronous),onCheck:function(e){return $e((function(n){var t;return fe(fe({},n),{},{run_settings:fe(fe({},null===n||void 0===n?void 0:n.run_settings),{},{asynchronous:e(null===n||void 0===n||null===(t=n.run_settings)||void 0===t?void 0:t.asynchronous)})})}))}}})]}),(0,B.jsx)(P.Z,{mb:R.cd}),(0,B.jsxs)(k.Z,{title:"Block outputs ".concat((null===ln||void 0===ln?void 0:ln.length)>=1?"(".concat((null===ln||void 0===ln?void 0:ln.length)||0,")"):""),description:(0,B.jsx)(P.Z,{mt:1,children:(0,B.jsxs)(S.ZP,{muted:!0,children:["When a hook runs and executes a pipeline, the output from the pipeline\u2019s blocks",(0,B.jsx)("br",{}),"can optionally be used to mutate the ",en," input and output data."]})}),headerChildren:(null===ln||void 0===ln?void 0:ln.length)>=1&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(P.Z,{ml:R.cd}),sn]}),children:[!(null!==ln&&void 0!==ln&&ln.length)&&(0,B.jsx)(P.Z,{p:R.cd,children:sn}),(null===ln||void 0===ln?void 0:ln.length)>=1&&(0,B.jsx)(m.Z,{noBorder:!0,noBoxShadow:!0,children:un})]}),(0,B.jsx)(P.Z,{mb:R.cd}),(0,B.jsxs)(k.Z,{title:"Metadata",children:[(0,B.jsx)(k.S,{title:"Last updated",children:(0,B.jsxs)(b.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,B.jsx)(S.ZP,{large:!0,monospace:!0,muted:!0,children:null!==dn&&void 0!==dn&&dn.updated_at?(0,w.XG)(null===dn||void 0===dn?void 0:dn.updated_at,ue):"-"}),(0,B.jsx)(P.Z,{mr:R.cd}),(0,B.jsx)(E.Pf,{muted:!0,size:I.Z}),(0,B.jsx)(P.Z,{mr:1})]})}),(0,B.jsx)(k.S,{title:"Created at",children:(0,B.jsxs)(b.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,B.jsx)(S.ZP,{large:!0,monospace:!0,muted:!0,children:null!==dn&&void 0!==dn&&dn.created_at?(0,w.XG)(null===dn||void 0===dn?void 0:dn.created_at,ue):"-"}),(0,B.jsx)(P.Z,{mr:R.cd}),(0,B.jsx)(E.Pf,{muted:!0,size:I.Z}),(0,B.jsx)(P.Z,{mr:1})]})}),(0,B.jsx)(k.S,{title:"Snapshotted at",children:(0,B.jsxs)(b.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,B.jsx)(S.ZP,{large:!0,monospace:!0,muted:!0,children:null!==dn&&void 0!==dn&&dn.snapshotted_at?(0,w.XG)(null===dn||void 0===dn?void 0:dn.snapshotted_at,ue):"-"}),(0,B.jsx)(P.Z,{mr:R.cd}),(0,B.jsx)(E.Pf,{muted:!0,size:I.Z}),(0,B.jsx)(P.Z,{mr:1})]})}),(0,B.jsx)(k.S,{title:"Snapshot valid",children:(0,B.jsxs)(b.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,B.jsx)(S.ZP,{large:!0,danger:!(null!==dn&&void 0!==dn&&dn.snapshot_valid),muted:null===dn||void 0===dn?void 0:dn.snapshot_valid,children:null!==dn&&void 0!==dn&&dn.snapshot_valid?"Valid":"Hook won\u2019t run until snapshot is valid"}),(0,B.jsx)(P.Z,{mr:R.cd}),null!==dn&&void 0!==dn&&dn.snapshot_valid?(0,B.jsx)(E.Jr,{size:I.Z,success:!0}):(0,B.jsx)(E.uy,{danger:!0,size:I.Z}),(0,B.jsx)(P.Z,{mr:1})]})}),(0,B.jsx)(k.S,{title:"Created by",children:(0,B.jsxs)(b.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,B.jsx)(S.ZP,{large:!0,monospace:!0,muted:!0,children:null!==dn&&void 0!==dn&&null!==(ee=dn.user)&&void 0!==ee&&ee.id?String(null===dn||void 0===dn||null===(ne=dn.user)||void 0===ne?void 0:ne.id)===String(null===he||void 0===he?void 0:he.id)?"You created this hook":"User ID ".concat(null===dn||void 0===dn||null===(te=dn.user)||void 0===te?void 0:te.id):"-"}),(0,B.jsx)(P.Z,{mr:R.cd}),(0,B.jsx)(E.SC,{muted:!0,size:I.Z}),(0,B.jsx)(P.Z,{mr:1})]})})]})]}),(0,B.jsx)(P.Z,{mt:R.HN,children:(0,B.jsxs)(y.ZP,{alignItems:"center",justifyContent:"space-between",children:[!oe&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(x.ZP,{compact:!0,danger:!0,loading:ze,onClick:function(){window.confirm("Are you sure you wantt to delete this hook?")&&Ke()},small:!0,children:"Delete global hook"}),(0,B.jsx)(P.Z,{mr:R.cd})]}),(0,B.jsxs)(b.Z,{flex:1,justifyContent:"flex-end",children:[(0,B.jsx)(x.ZP,{beforeIcon:(0,B.jsx)(E.Hd,{}),disabled:De||He||ze,onClick:function(){return ve.push("/".concat(re?"platform/":"","global-hooks"))},secondary:!0,children:_e?"Cancel changes & go back":"Go back to all hooks"}),(0,B.jsx)(P.Z,{mr:R.cd}),(0,B.jsx)(x.ZP,{beforeIcon:(0,B.jsx)(E.vc,{}),disabled:ze,loading:De||He,onClick:function(){return(oe?Le:Me)({global_hook:fe(fe(fe({},cn),oe?{uuid:null===ge||void 0===ge?void 0:ge.uuid}:{}),{},{root_project:re})})},primary:!0,children:oe?"Create new global hook":"Save changes"})]})]})})]})}},14466:function(e,n,t){t.d(n,{Ij:function(){return l},N_:function(){return v},SQ:function(){return r},TT:function(){return s},W6:function(){return p},XG:function(){return d},YB:function(){return c},i9:function(){return f},sw:function(){return u},t4:function(){return a}});var o,i,l,r,s,u,c,d,a,p,h=t(82394);!function(e){e.CREATE="create",e.DELETE="delete",e.DETAIL="detail",e.EXECUTE="execute",e.LIST="list",e.UPDATE="update",e.UPDATE_ANYWHERE="update_anywhere"}(i||(i={})),function(e){e.BREAK="break",e.CONTINUE="continue",e.RAISE="raise"}(l||(l={})),function(e){e.AFTER="after",e.BEFORE="before"}(r||(r={})),function(e){e.ERROR="error",e.META="meta",e.METADATA="metadata",e.PAYLOAD="payload",e.QUERY="query",e.RESOURCE="resource",e.RESOURCES="resources"}(s||(s={})),function(e){e.FAILURE="failure",e.SUCCESS="success"}(u||(u={})),function(e){e.AND="and",e.OR="or"}(c||(c={})),function(e){e.ERROR="error",e.HOOK="hook",e.META="meta",e.METADATA="metadata",e.OPERATION_RESOURCE="operation_resource",e.PAYLOAD="payload",e.QUERY="query",e.RESOURCE="resource",e.RESOURCES="resources",e.RESOURCE_ID="resource_id",e.RESOURCE_PARENT="resource_parent",e.RESOURCE_PARENT_ID="resource_parent_id",e.RESOURCE_PARENT_TYPE="resource_parent_type",e.USER="user"}(d||(d={})),function(e){e.BOOLEAN="BOOLEAN",e.DICTIONARY="DICTIONARY",e.FLOAT="FLOAT",e.INTEGER="INTEGER",e.LIST="LIST",e.STRING="STRING"}(a||(a={})),function(e){e.EQUALS="EQUALS",e.GREATER_THAN="GREATER_THAN",e.GREATER_THAN_OR_EQUALS="GREATER_THAN_OR_EQUALS",e.INCLUDES="INCLUDES",e.LESS_THAN="LESS_THAN",e.LESS_THAN_OR_EQUALS="LESS_THAN_OR_EQUALS",e.NOT_EQUALS="NOT_EQUALS",e.NOT_INCLUDES="NOT_INCLUDES",e.NOT_PRESENT="NOT_PRESENT",e.PRESENT="PRESENT"}(p||(p={}));var f=[p.NOT_PRESENT,p.PRESENT],v=(o={},(0,h.Z)(o,p.EQUALS,"=="),(0,h.Z)(o,p.GREATER_THAN,">"),(0,h.Z)(o,p.GREATER_THAN_OR_EQUALS,">="),(0,h.Z)(o,p.INCLUDES,"includes"),(0,h.Z)(o,p.LESS_THAN,"<"),(0,h.Z)(o,p.LESS_THAN_OR_EQUALS,"<="),(0,h.Z)(o,p.NOT_EQUALS,"!="),(0,h.Z)(o,p.NOT_INCLUDES,"not includes"),(0,h.Z)(o,p.NOT_PRESENT,"is not present"),(0,h.Z)(o,p.PRESENT,"is present"),o)},31882:function(e,n,t){var o=t(38626),i=t(71180),l=t(55485),r=t(30160),s=t(44897),u=t(72473),c=t(70515),d=t(61896),a=t(28598),p=o.default.div.withConfig({displayName:"Chip__ChipStyle",componentId:"sc-1ok73g-0"})(["display:inline-block;"," "," "," "," "," ",""],(function(e){return!e.primary&&"\n    background-color: ".concat((e.theme.background||s.Z.background).tag,";\n  ")}),(function(e){return e.primary&&"\n    background-color: ".concat((e.theme.chart||s.Z.chart).primary,";\n  ")}),(function(e){return!e.small&&"\n    border-radius: ".concat((c.iI+d.Al)/2,"px;\n    height: ").concat(1.5*c.iI+d.Al,"px;\n    padding: ").concat(c.iI/1.5,"px ").concat(1.25*c.iI,"px;\n  ")}),(function(e){return e.small&&"\n    border-radius: ".concat((c.iI/2+d.Al)/2,"px;\n    height: ").concat(d.Al+c.iI/2+2,"px;\n    padding: ").concat(c.iI/4,"px ").concat(c.iI,"px;\n  ")}),(function(e){return e.xsmall&&"\n    border-radius: ".concat((c.iI/1+d.Al)/1,"px;\n    height: ").concat(20,"px;\n    padding: 4px 6px;\n  ")}),(function(e){return e.border&&"\n    border: 1px solid ".concat((e.theme.content||s.Z.content).muted,";\n  ")}));n.Z=function(e){var n=e.border,t=e.children,o=e.disabled,s=e.label,d=e.monospace,h=e.onClick,f=e.primary,v=e.small,m=e.xsmall;return(0,a.jsx)(p,{border:n,primary:f,small:v,xsmall:m,children:(0,a.jsx)(i.ZP,{basic:!0,disabled:o,noBackground:!0,noPadding:!0,onClick:h,transparent:!0,children:(0,a.jsxs)(l.ZP,{alignItems:"center",children:[t,s&&(0,a.jsx)(r.ZP,{monospace:d,small:v,xsmall:m,children:s}),!o&&h&&(0,a.jsx)("div",{style:{marginLeft:2}}),!o&&h&&(0,a.jsx)(u.x8,{default:f,muted:!f,size:v?c.iI:1.25*c.iI})]})})})}},80022:function(e,n,t){function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.d(n,{Z:function(){return o}})},15544:function(e,n,t){function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}t.d(n,{Z:function(){return o}})},13692:function(e,n,t){t.d(n,{Z:function(){return i}});var o=t(61049);function i(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&(0,o.Z)(e,n)}},93189:function(e,n,t){t.d(n,{Z:function(){return l}});var o=t(12539),i=t(80022);function l(e,n){if(n&&("object"===o(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},61049:function(e,n,t){function o(e,n){return o=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},o(e,n)}t.d(n,{Z:function(){return o}})}}]);