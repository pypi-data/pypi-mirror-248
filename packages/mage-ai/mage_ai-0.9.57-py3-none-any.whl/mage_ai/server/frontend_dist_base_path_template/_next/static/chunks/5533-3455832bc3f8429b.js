"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5533],{29120:function(e,n,o){o.d(n,{Z:function(){return b}});var t,i,r=o(82684),l=o(39867),u=o(89706),c=o(44425),d=o(32929),a=o(72473),s=o(82394),f=(t={},(0,s.Z)(t,u.Lu.CSV,a.iA),(0,s.Z)(t,u.Lu.JSON,a.EK),(0,s.Z)(t,u.Lu.MD,a.$B),(0,s.Z)(t,u.Lu.PY,a.Bf),(0,s.Z)(t,u.Lu.R,a.u$),(0,s.Z)(t,u.Lu.SH,a.oI),(0,s.Z)(t,u.Lu.SQL,a.vo),(0,s.Z)(t,u.Lu.TXT,a.KJ),(0,s.Z)(t,u.Lu.YAML,a.aV),(0,s.Z)(t,u.Lu.YML,a.aV),t),v=(i={},(0,s.Z)(i,u.Lu.CSV,"#C7CDDA"),(0,s.Z)(i,u.Lu.JSON,"#6B50D7"),(0,s.Z)(i,u.Lu.MD,"#9B6CA7"),(0,s.Z)(i,u.Lu.PY,"#FFE873"),(0,s.Z)(i,u.Lu.R,"#FF144D"),(0,s.Z)(i,u.Lu.SH,"#CBFE00"),(0,s.Z)(i,u.Lu.SQL,"#00758F"),(0,s.Z)(i,u.Lu.TXT,"#C7CDDA"),(0,s.Z)(i,u.Lu.YAML,"#95ECE2"),(0,s.Z)(i,u.Lu.YML,"#95ECE2"),i),p=o(55283),h=o(53005),m=o(81728);function b(e){var n=e.allowEmptyFolders,o=e.children,t=e.disabled,i=e.file,s=e.filePath,b=e.isInPipelinesFolder,g=e.isFileDisabled,C=e.isNotFolder,j=e.level,y=e.name,w=e.theme,k=e.useRootFolder,x=e.uuid,F=(0,r.useMemo)((function(){return s||(k?(0,h.a9)(i):(0,h.jN)(i))}),[i,s,k,,]),Z=(0,r.useMemo)((function(){return!!o&&!C}),[o,C]),D=(0,r.useMemo)((function(){var e,n,o;return null===x||void 0===x||null===(e=x.split)||void 0===e||null===(n=e.call(x,"/"))||void 0===n||null===(o=n.find)||void 0===o?void 0:o.call(n,(function(e){return(0,m.C5)(e)in c.GJ}))}),[x]),E=(0,r.useMemo)((function(){return D?(0,m.C5)(D):null}),[D]),O=(0,r.useMemo)((function(){return Z&&D&&D===y}),[D,Z,y]),P=(0,r.useMemo)((function(){return D&&!Z&&(0,h.y)(y)&&(0,h.o$)(y,E)}),[E,D,Z,y]),_=(0,r.useMemo)((function(){return D?(0,p.qn)(E,{theme:w}).accent:null}),[E,D]),L=y===u.oy,I=(0,r.useMemo)((function(){return g?g(F,o):t||b&&"__init__.py"===y||D&&"__init__.py"===y}),[o,t,,F,D,g,b,y]),S=(0,r.useMemo)((function(){var e,o=a.iU;if(!Z&&C)o=a.mH;else if(L)o=a.vd;else if(y===u.PF)o=a.GQ;else if(Z)o=O&&(null===d.iK||void 0===d.iK?void 0:d.iK[E])||a.Bu;else if(!y&&n)o=a.mH;else if(b&&!Z&&"metadata.yaml"===y)o=a.B_;else if(null!==y&&void 0!==y&&y.includes(".log"))o=a.UL;else if(!Z){var t=(0,h.mD)(y);t&&t in f&&(o=f[t],e=v[t])}return{Icon:o,iconColor:e}}),[n,E,O,Z,b,C,j,y]),R=S.Icon,N=S.iconColor;return{BlockIcon:(0,r.useMemo)((function(){var e=l.Z;return c.tf.CHART===E&&(e=a.GQ),e}),[E]),Icon:R,blockType:E,color:_,disabled:I,filePathToUse:F,folderNameForBlock:D,iconColor:N,isBlockFile:P,isFirstParentFolderForBlock:O,isFolder:Z,isPipelineFolder:L}}},46978:function(e,n,o){o.d(n,{Cl:function(){return u},Nk:function(){return c},ZG:function(){return l}});var t=o(38626),i=o(44897),r=o(70515),l=1.5*r.iI,u=1*l+r.iI/2,c=t.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-uvd91-0"})([".row:hover{","}"],(function(e){return"\n      background-color: ".concat((e.theme.interactive||i.Z.interactive).hoverBackground,";\n    ")}))},85533:function(e,n,o){o.d(n,{Z:function(){return je}});var t=o(82394),i=o(75582),r=o(82684),l=o(38626),u=o(69864),c=o(44425),d=o(70374),a=o(78050),s=o(89706),f=o(97618),v=o(30160),p=o(29120),h=o(72473),m="CUSTOM_EVENT_NAME_FOLDER_EXPAND",b=o(46978),g=o(70515),C=o(85385),j=o(53808),y=o(53005),w=o(86735),k=o(28598);function x(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function F(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?x(Object(o),!0).forEach((function(n){(0,t.Z)(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):x(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}var Z="default_repo",D=l.default.div.withConfig({displayName:"Folder__ChildrenStyle",componentId:"sc-1gsjts-0"})([".expanded_children{display:block;}.collapsed_children{display:none;}"]),E=l.default.div.withConfig({displayName:"Folder__ChevronStyle",componentId:"sc-1gsjts-1"})([".expanded{.down{display:block;position:relative;}.right{display:none;position:absolute;}}.collapsed{.down{display:none;position:absolute;}.right{display:block;position:relative;}}"]);function O(e){var n=e.children,o=e.idleTimeout,t=(0,r.useState)(!1),i=t[0],l=t[1];return(0,r.useEffect)((function(){i&&l(!1);var e=requestIdleCallback((function(){return l(!0)}),{timeout:o});return function(){return cancelIdleCallback(e)}}),[o]),i?n:null}var P=function e(n){var o=n.allowEmptyFolders,i=n.allowSelectingFolders,l=n.containerRef,u=n.disableContextMenu,c=n.file,d=n.isFileDisabled,x=n.isInPipelinesFolder,P=n.isNotFolder,_=n.level,L=n.onClickFile,I=n.onClickFolder,S=n.onSelectBlockFile,R=n.onlyShowChildren,N=n.openFile,T=n.openSidekickView,M=n.reloadCount,A=n.renderAfterContent,B=n.selectFile,U=n.setContextItem,Y=n.setCoordinates,Q=n.setDraggingFile,V=n.setSelectedFile,z=n.theme,G=n.timeout,$=n.useRootFolder,q=n.uuidCombined,H=n.uuidContainer,W=(0,r.useRef)(null),X=c.children,K=c.disabled,J=c.name,ee=c.parent,ne=(0,r.useMemo)((function(){return X?(0,w.YC)(X,(function(e){return e.children?0:1})):X}),[X]),oe=(0,r.useMemo)((function(){return[].concat(q||[]).concat(J||Z)}),[J,q,,]),te=(0,r.useMemo)((function(){return null===oe||void 0===oe?void 0:oe.join("/")}),[oe]),ie=(0,j.U2)(j.lQ,{}),re=(0,r.useRef)(null),le=(0,r.useRef)(null),ue=(0,r.useRef)(te in ie?ie[te]:0===_),ce=(0,r.useRef)(0),de=ue.current;J||o||(c.name=Z);var ae=(0,p.Z)({allowEmptyFolders:o,children:ne,disabled:K,file:c,isInPipelinesFolder:x,isFileDisabled:d,isNotFolder:P,level:_,name:J,theme:z,useRootFolder:$,uuid:te}),se=ae.BlockIcon,fe=ae.Icon,ve=(ae.blockType,ae.color),pe=ae.disabled,he=ae.filePathToUse,me=ae.folderNameForBlock,be=ae.iconColor,ge=ae.isBlockFile,Ce=ae.isFirstParentFolderForBlock,je=ae.isFolder,ye=ae.isPipelineFolder,we=(0,r.useCallback)((function(n){return null===n||void 0===n?void 0:n.map((function(n){return(0,k.jsx)(e,{allowEmptyFolders:o,allowSelectingFolders:i,containerRef:l,disableContextMenu:u,file:F(F({},n),{},{parent:c}),isFileDisabled:d,isNotFolder:null===n||void 0===n?void 0:n.isNotFolder,isInPipelinesFolder:x||ye,level:R?_:_+1,onClickFile:L,onClickFolder:I,onSelectBlockFile:S,openFile:N,openSidekickView:T,reloadCount:M,renderAfterContent:A,selectFile:B,setContextItem:U,setCoordinates:Y,setDraggingFile:Q,setSelectedFile:V,theme:z,timeout:G,useRootFolder:$,uuidCombined:oe,uuidContainer:H},"".concat(te,"/").concat((null===n||void 0===n?void 0:n.name)||Z,"-").concat(M))}))}),[o,i,ne,u,c,d,x,ye,_,L,I,S,R,N,T,M,A,B,U,Y,Q,V,$,te,oe,H]),ke=(0,r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(ue.current="undefined"===typeof e||null===e?!ue.current:e,re.current.className=ue.current?"expanded_children":"collapsed_children",le.current.className=ue.current?"expanded":"collapsed",0===ce.current){var o;if(null===W||void 0===W||!W.current){var i=document.getElementById(re.current.id);W.current=(0,a.createRoot)(i)}null===W||void 0===W||null===(o=W.current)||void 0===o||o.render((null===ne||void 0===ne?void 0:ne.length)>=1?(0,k.jsx)(O,{idleTimeout:n||1,children:we(ne)}):je?we(xe):(0,k.jsx)("div",{}))}(0,j.rQ)(j.lQ,(0,t.Z)({},te,ue.current)),ce.current+=1}),[ne,je,te]);(0,r.useEffect)((function(){var e=function(e){var n=e.detail,o=n.expand,i=(n.file,n.folder);je&&i&&null!==te&&void 0!==te&&te.startsWith(null===i||void 0===i?void 0:i.uuid)&&((0,j.rQ)(j.lQ,(0,t.Z)({},te,o)),ke(o,100*_))};return window.addEventListener(m,e),function(){window.removeEventListener(m,e)}}),[je,_,ke,te]);var xe=(0,r.useMemo)((function(){return[{disabled:!0,name:"Empty",parent:c,isNotFolder:!0,uuid:oe}]}),[c,oe]),Fe=(0,r.useMemo)((function(){var e=[];return(0,w.w6)(_).forEach((function(n,o){var t,i=b.Cl-1;e.push((0,k.jsx)("div",{style:{borderLeft:"1px solid ".concat(null===z||void 0===z||null===(t=z.content)||void 0===t?void 0:t.disabled),height:22,marginLeft:i/2-2,paddingLeft:i/2+2}},"line-".concat(te,"-").concat(o)))})),e}),[_,z,te]);return(0,r.useEffect)((function(){setTimeout((function(){var e;if(de&&0===(null===ce||void 0===ce?void 0:ce.current)&&null!==re&&void 0!==re&&null!==(e=re.current)&&void 0!==e&&e.id){ce.current=1;try{var n;if(null===W||void 0===W||!W.current){var o,t=document.getElementById(null===re||void 0===re||null===(o=re.current)||void 0===o?void 0:o.id);W.current=(0,a.createRoot)(t)}null===W||void 0===W||null===(n=W.current)||void 0===n||n.render((null===ne||void 0===ne?void 0:ne.length)>=1?(0,k.jsx)(O,{idleTimeout:100*_,children:we(ne)}):null!==ne&&void 0!==ne&&ne.length?null:je?we(xe):(0,k.jsx)("div",{}))}catch(i){console.log(i)}}}),1)}),[]),(0,k.jsxs)(k.Fragment,{children:[!R&&(0,k.jsxs)("div",{className:"row",onClick:function(e){if(e.preventDefault(),!pe){if((null===ee||void 0===ee?void 0:ee.name)===s.PF){null===T||void 0===T||T(C.cH.CHARTS);var n=(0,y.lr)(c);n&&(null===S||void 0===S||S(n.uuid,n.type,(0,y.jN)(c)))}var o=(0,y.V3)(c);if(ne)i?B(he):ke(),null===I||void 0===I||I(he);else if(L)L(he);else if(o)null===S||void 0===S||S(o.uuid,o.type,(0,y.jN)(c),{file:c,path:he});else if(J.match(s.xF))null===N||void 0===N||N(he);else{var t=(0,y.lr)(c);t&&(null===S||void 0===S||S(t.uuid,t.type,(0,y.jN)(c)))}}},onContextMenu:function(e){var n;clearTimeout(G.current),null!==l&&void 0!==l&&null!==(n=l.current)&&void 0!==n&&n.contains(e.target)&&!u&&(e.preventDefault(),Y({x:e.pageX,y:e.pageY}),Q(null),V(F(F({},c),{},{uuid:te})))},onMouseDown:function(e){var n,o=c?(0,y.lr)(c,null,!0):null;null===l||void 0===l||null===(n=l.current)||void 0===n||!n.contains(e.target)||!o||(null===ne||void 0===ne?void 0:ne.length)>=1||u||pe||x||(e.preventDefault(),clearTimeout(G.current),G.current=setTimeout((function(){Y({x:e.pageX,y:e.pageY}),Q(c),V(null)}),300))},style:{alignItems:"center",cursor:"default",display:"flex",minWidth:_*b.Cl+c.name.length*g.Fo+2*g.iI,paddingRight:g.iI/4},children:[(0,k.jsxs)(f.Z,{alignItems:"center",flex:1,children:[Fe,(0,k.jsxs)(E,{children:[ne&&(0,k.jsxs)("div",{className:de?"expanded":"collapsed",ref:le,children:[(0,k.jsx)("div",{className:"down",children:(0,k.jsx)(h._M,{muted:!0,size:b.ZG})}),(0,k.jsx)("div",{className:"right",children:(0,k.jsx)(h._Q,{muted:!0,size:b.ZG})})]}),!ne&&(0,k.jsx)("div",{style:{width:b.ZG}})]}),(0,k.jsx)("div",{style:{marginLeft:g.iI/2,marginRight:g.iI/2},children:me&&!je&&ge?(0,k.jsx)(se,{color:ve,size:me&&!je?.7*b.ZG:b.ZG,square:!0}):(0,k.jsx)(fe,{fill:be||(Ce?ve:null),disabled:pe,size:b.ZG})}),(0,k.jsx)(v.ZP,{default:!pe,disabled:pe,monospace:!0,small:!0,children:J})]}),A&&A(c)]}),(0,k.jsx)(D,{children:(0,k.jsx)("div",{className:de?"expanded_children":"collapsed_children",id:"".concat(H,"-").concat(te),ref:re})})]})},_=o(65186),L=o(71180),I=o(55485),S=o(93369),R=o(65956),N=o(38276),T=o(17488),M=o(35686),A=o(42122),B=o(72619);var U=function(e){var n=e.fetchFileTree,o=e.file,t=e.moveFile,l=e.onCancel,c=e.onCreateFile,d=e.selectedFolder,a=e.showError,s=(0,r.useRef)(null),f=(0,A.Qr)(o)?null:o,v=(0,r.useState)(f?(0,y.jN)(f,null,!0):""),p=v[0],h=v[1],m=(0,r.useState)(f?null===f||void 0===f?void 0:f.name:""),b=m[0],C=m[1];(0,r.useEffect)((function(){var e;null===s||void 0===s||null===(e=s.current)||void 0===e||e.focus()}),[]),(0,r.useEffect)((function(){d&&h((0,y.eV)(null===d||void 0===d?void 0:d.uuid))}),[d]);var j=(0,u.Db)(M.ZP.files.useCreate(),{onSuccess:function(e){return(0,B.wD)(e,{callback:function(e){var o=e.file;null===n||void 0===n||n(),l(),null===c||void 0===c||c(o)},onErrorCallback:function(e,n){return a({errors:n,response:e})}})}}),w=(0,i.Z)(j,1)[0],x=(0,u.Db)(M.ZP.files.useUpdate(f&&encodeURIComponent((0,y.jN)(f))),{onSuccess:function(e){return(0,B.wD)(e,{callback:function(){null===n||void 0===n||n(),l()},onErrorCallback:function(e,n){return a({errors:n,response:e})}})}}),F=(0,i.Z)(x,1)[0];return(0,k.jsxs)(R.Z,{footer:(0,k.jsxs)(I.ZP,{children:[(0,k.jsxs)(S.ZP,{bold:!0,disabled:!b,inline:!0,onClick:function(){return f?F({file:{dir_path:p,name:b},file_json_only:!0}):w({file:{dir_path:p,name:b,overwrite:!1},file_json_only:!0})},primary:!0,tabIndex:0,uuid:"NewFile/create_file",children:[f?t?"Move":"Rename":"Create"," file"]}),(0,k.jsx)(N.Z,{ml:1,children:(0,k.jsx)(L.ZP,{onClick:function(){return l()},tabIndex:0,children:"Cancel"})})]}),headerTitle:f?t?"Move file":"Rename file":"New file",minWidth:50*g.iI,children:[(0,k.jsx)(T.Z,{disabled:!!f&&!t,label:"Directory",monospace:!0,onChange:function(e){return h(e.target.value)},setContentOnMount:!0,value:p}),(0,k.jsx)(N.Z,{mt:2,children:(0,k.jsx)(T.Z,{disabled:!!t,label:"Filename",monospace:!0,onChange:function(e){return C(e.target.value)},ref:s,required:!0,value:b})})]})},Y=o(82359);var Q=function(e){var n=e.fetchFileTree,o=e.file,t=e.moveFile,l=e.onCancel,c=e.onCreateFile,d=e.projectType,a=e.selectedFolder,s=e.setErrors,f=e.showError,v=(0,r.useRef)(null),p=(0,A.Qr)(o)?null:o,h=(0,r.useState)(p?(0,y.jN)(p,null,!0):""),m=h[0],b=h[1],C=(0,r.useState)(p?null===p||void 0===p?void 0:p.name:""),j=C[0],w=C[1];(0,r.useEffect)((function(){var e;null===v||void 0===v||null===(e=v.current)||void 0===e||e.focus()}),[]),(0,r.useEffect)((function(){a&&b((0,y.eV)(null===a||void 0===a?void 0:a.uuid))}),[a]);var x=(0,u.Db)(M.ZP.folders.useCreate(),{onSuccess:function(e){return(0,B.wD)(e,{callback:function(e){var o=e.file;null===n||void 0===n||n(),l(),null===c||void 0===c||c(o)},onErrorCallback:function(e,n){return s?s({errors:n,response:e}):f({errors:n,response:e})}})}}),F=(0,i.Z)(x,1)[0],Z=(0,u.Db)(M.ZP.folders.useUpdate(p&&encodeURIComponent((0,y.jN)(p))),{onSuccess:function(e){return(0,B.wD)(e,{callback:function(){null===n||void 0===n||n(),l()},onErrorCallback:function(e,n){return s?s({errors:n,response:e}):f({errors:n,response:e})}})}}),D=(0,i.Z)(Z,1)[0],E=(0,u.Db)(M.ZP.projects.useCreate(),{onSuccess:function(e){return(0,B.wD)(e,{callback:function(){null===n||void 0===n||n(),l()},onErrorCallback:function(e,n){return s?s({errors:n,response:e}):f({errors:n,response:e})}})}}),O=(0,i.Z)(E,2),P=O[0],_=O[1].isLoading;return(0,k.jsxs)(R.Z,{footer:(0,k.jsxs)(I.ZP,{children:[(0,k.jsxs)(S.ZP,{bold:!0,disabled:!j,inline:!0,loading:_,onClick:function(){return p?D({folder:{name:j,path:m}}):d?P({project:{repo_path:m,type:d,uuid:j}}):F({folder:{name:j,overwrite:!1,path:m}})},primary:!0,tabIndex:0,uuid:"NewFolder/create_folder",children:[d&&"Create project",!d&&(0,k.jsxs)(k.Fragment,{children:[p?t?"Move":"Rename":"Create"," folder"]})]}),(0,k.jsx)(N.Z,{ml:1,children:(0,k.jsx)(L.ZP,{onClick:function(){return l()},tabIndex:0,children:"Cancel"})})]}),headerTitle:p?t?"Move folder":"Rename folder":d?Y.k.STANDALONE===d?"New Mage project":Y.k.DBT===d?"New dbt project":"New project":"New folder",minWidth:50*g.iI,children:[(0,k.jsx)(T.Z,{disabled:!!p&&!t,label:d?"Project directory":"Directory",monospace:!0,onChange:function(e){return b(e.target.value)},setContentOnMount:!0,value:m}),(0,k.jsx)(N.Z,{mt:2,children:(0,k.jsx)(T.Z,{disabled:!!t,label:d?"Project name":"Folder name",monospace:!0,onChange:function(e){return w(e.target.value)},ref:v,required:!0,value:j})})]})},V=o(57653),z=o(89515),G=o(17717),$=o(77011);function q(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function H(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?q(Object(o),!0).forEach((function(n){(0,t.Z)(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):q(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}var W=l.default.div.withConfig({displayName:"MultiFileInput__DropzoneStyle",componentId:"sc-1l6yd2y-0"})(["&:hover{cursor:pointer;}"]);var X=function(e){var n=e.children,o=e.inputOnChange,t=e.inputProps,i=e.onDragActiveChange,l=e.setFiles,u=(0,r.useCallback)((function(e){l(e)}),[l]),c=(0,$.uI)({onDrop:u}),d=c.getInputProps,a=c.getRootProps,s=c.isDragActive,f=d(),v=f.accept,p=f.autoComplete,h=f.multiple,m=f.onChange,b=f.onClick,g=f.ref,C=f.style,j=f.tabIndex,y=f.type,w=H(H({},t),{},{accept:v,autoComplete:p,multiple:h,onChange:function(e){null===o||void 0===o||o(e),null===t||void 0===t||t.onChange(e),m(e)},onClick:b,ref:g,style:C,tabIndex:j,type:y});return(0,r.useEffect)((function(){null===i||void 0===i||i(s)}),[s,i]),(0,k.jsxs)(W,H(H({},a()),{},{children:[(0,k.jsx)("input",H(H({},w),{},{directory:"",webkitdirectory:""})),n]}))};function K(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function J(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?K(Object(o),!0).forEach((function(n){(0,t.Z)(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):K(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}var ee=function(e){var n=e.children,o=e.directoryPath,l=e.onDragActiveChange,c=e.setFileUploadProgress,d=e.setUploadedFiles,a=(0,u.Db)(M.ZP.files.useCreate({onUploadProgress:function(e,n){var o,i=n.body,r=[null===i||void 0===i?void 0:i.dir_path,null===i||void 0===i||null===(o=i.file)||void 0===o?void 0:o.name].filter((function(e){return(null===e||void 0===e?void 0:e.length)>=1})).join(G.sep);null===c||void 0===c||c((function(n){return J(J({},n),{},(0,t.Z)({},r,e.loaded/e.total))}))}})),s=(0,i.Z)(a,1)[0],f=(0,r.useCallback)((function(e){e.forEach((function(e){var n=e.name,i=e.path,r=[o],l=i.split(G.sep).filter((function(e){return e&&e!==n})).join(G.sep);l&&r.push(l);var u=[],a=r.join(G.sep);(null===a||void 0===a?void 0:a.length)>=1&&r.push(a),u.push(n);var f=u.join(G.sep);s({dir_path:a,file:e,overwrite:!1}).then((function(e){var n=e.data,o=n.error,i=n.file;d((function(e){return J(J({},e),{},(0,t.Z)({},f,i||o))}))})),c((function(e){return J(J({},e),{},(0,t.Z)({},f,0))}))}))}),[s,o,c,d]);return(0,k.jsx)(X,{onDragActiveChange:l,setFiles:f,children:n})},ne=o(35185),oe=o(75499),te=o(44897),ie=o(42631),re=(g.iI,l.default.div.withConfig({displayName:"indexstyle__DropZoneStyle",componentId:"sc-1g3zz7z-0"})(["border-radius:","px;padding:","px;max-width:","px;min-width:","px;",""],ie.n_,8*g.iI,100*g.iI,55*g.iI,(function(e){return"\n    border: 1px dashed ".concat((e.theme.borders||te.Z.borders).contrast,";\n  ")}))),le=l.default.div.withConfig({displayName:"indexstyle__TableStyle",componentId:"sc-1g3zz7z-1"})(["max-width:","px;min-width:","px;"],100*g.iI,55*g.iI);var ue=function(e){var n=e.fetchFileTree,o=e.onCancel,t=e.selectedFolder,l=(0,r.useState)(!1),u=l[0],c=l[1],d=(0,r.useState)({}),a=d[0],s=d[1],f=(0,r.useState)({}),p=f[0],h=f[1],m=!(0,A.Qr)(a),b=(0,r.useMemo)((function(){var e=[];return(0,w.YC)(Object.entries(a),(function(e){var n=(0,i.Z)(e,2),o=n[0];n[1];return o})).forEach((function(n){var o=(0,i.Z)(n,2),t=o[0],r=o[1],l=p[t],u=null===l||void 0===l?void 0:l.message;e.push([(0,k.jsxs)("div",{children:[(0,k.jsx)(v.ZP,{overflowWrap:!0,preWrap:!0,children:t}),u&&(0,k.jsx)(N.Z,{mt:1,children:(0,k.jsx)(v.ZP,{danger:!0,small:!0,children:u})})]},"name-".concat(t)),(0,k.jsx)(ne.Z,{danger:!!u,progress:100*r},"progress-".concat(t))])})),(0,k.jsx)(oe.Z,{columnFlex:[1,4],columns:[{uuid:"Filename"},{uuid:"Upload progress"}],rows:e,uuid:"block-runs"})}),[a,p]);return(0,k.jsxs)(R.Z,{footer:(0,k.jsxs)(I.ZP,{fullWidth:!0,children:[(0,k.jsx)(L.ZP,{onClick:function(){return o()},children:"Close"}),m&&(0,k.jsx)(N.Z,{ml:1,children:(0,k.jsx)(L.ZP,{onClick:function(){s({}),h({})},children:"Clear files and retry"})})]}),headerTitle:"Upload files",children:[m&&(0,k.jsx)(le,{children:b}),!m&&(0,k.jsx)(ee,{directoryPath:t?(0,y.jN)(t):"",onDragActiveChange:c,setFileUploadProgress:s,setUploadedFiles:function(e){h(e),null===n||void 0===n||n()},children:(0,k.jsx)(re,{children:(0,k.jsxs)(v.ZP,{center:!0,children:[u&&"Drop to upload",!u&&"Click or drop files and folders to upload"]})})})]})},ce=o(77417),de=o(19698),ae=o(31353),se=o(80330),fe=o(85202),ve=o(44952),pe=o(89538);function he(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function me(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?he(Object(o),!0).forEach((function(n){(0,t.Z)(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):he(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}var be,ge=20*g.iI;function Ce(e,n){var o=e.addNewBlock,t=(e.blocks,e.deleteWidget),a=e.disableContextMenu,s=(e.fetchAutocompleteItems,e.fetchFiles),f=e.fetchPipeline,p=e.files,C=e.onClickFile,j=e.onClickFolder,x=e.onSelectBlockFile,F=e.openFile,Z=(e.openSidekickView,e.pipeline),D=e.showError,E=e.setSelectedBlock,O=e.uuid,L=(e.widgets,(0,r.useRef)(null)),I=(0,r.useContext)(l.ThemeContext),S=(0,r.useState)(null),R=S[0],N=S[1],T=(0,r.useState)(null),A=T[0],G=T[1],$=(0,r.useState)(null),q=$[0],H=$[1],W=(0,r.useState)(0),X=W[0],K=W[1];(0,r.useEffect)((function(){K((function(e){return e+1}))}),[p]);var J=(0,r.useMemo)((function(){return q&&"undefined"!==typeof(null===q||void 0===q?void 0:q.children)&&q}),[q]),ee=(0,ce.Z)(),ne=ee.featureEnabled,oe=ee.featureUUIDs,te=ee.project,ie=(0,de.Z)().status,re=(0,u.Db)((function(e){return M.ZP.downloads.files.useCreate(e)()}),{onSuccess:function(e){return(0,B.wD)(e,{callback:function(){var n=e.data.download.token;(0,ve.K)(n)},onErrorCallback:function(e,n){return D({errors:n,response:e})}})}}),le=(0,i.Z)(re,1)[0],he=(0,u.Db)((function(e){return M.ZP.files.useDelete(e)()}),{onSuccess:function(e){return(0,B.wD)(e,{callback:function(){null===s||void 0===s||s()},onErrorCallback:function(e,n){return D({errors:n,response:e})}})}}),be=(0,i.Z)(he,1)[0],Ce=(0,u.Db)((function(e){return M.ZP.folders.useDelete(e)()}),{onSuccess:function(e){return(0,B.wD)(e,{callback:function(){null===s||void 0===s||s()},onErrorCallback:function(e,n){return D({errors:n,response:e})}})}}),je=(0,i.Z)(Ce,1)[0],ye=(0,u.Db)((function(e){var n=e.block,o=(n.language,n.type,n.uuid),t=e.file,i=e.force,r=void 0!==i&&i;return M.ZP.blocks.useDelete(encodeURIComponent(o),{file_path:t?encodeURIComponent((0,y.jN)(t)):null,force:r})()}),{onSuccess:function(e){return(0,B.wD)(e,{callback:function(){null===s||void 0===s||s()},onErrorCallback:function(e,n){var o=e.error,t=o.exception;if(!o.message.includes("raise HasDownstreamDependencies"))return D({errors:n,response:e});Fe({block:Le,file:q,exception:t})}})}}),we=(0,i.Z)(ye,1)[0],ke=(0,pe.dd)((function(e){var n=e.block,o=e.file;return(0,k.jsx)(z.Z,{centerOnScreen:!0,danger:!0,onCancel:Ze,onClick:function(){return we({block:n,file:o,force:!0}).then((function(){return Ze()}))},subtitle:"Deleting this block file is dangerous. This block may have dependencies in active pipelines. Press confirm to delete this block anyway and remove it as a dependency from downstream blocks.",title:"Delete ".concat(n.uuid," anyway?"),width:34*g.iI})})),xe=(0,i.Z)(ke,2),Fe=xe[0],Ze=xe[1],De=(0,w.sE)(null===Z||void 0===Z?void 0:Z.blocks,(function(e){var n=e.type;return c.tf.DATA_EXPORTER===n})),Ee=(0,u.Db)(M.ZP.blocks.pipelines.useUpdate(encodeURIComponent(null===Z||void 0===Z?void 0:Z.uuid),encodeURIComponent(null===De||void 0===De?void 0:De.uuid)),{onSuccess:function(e){return(0,B.wD)(e,{callback:function(){null===f||void 0===f||f()},onErrorCallback:function(e,n){return D({errors:n,response:e})}})}}),Oe=(0,i.Z)(Ee,1)[0],Pe=(0,r.useCallback)((function(){return H(null)}),[H]);(0,r.useEffect)((function(){var e,t,i,r=function(e){if(clearTimeout(L.current),G(null),A&&Z&&o){var t,i,r=(null===n||void 0===n||null===(t=n.current)||void 0===t||null===(i=t.getBoundingClientRect)||void 0===i?void 0:i.call(t))||{},l=r.width,u=r.x;if(e.pageX>u+l){var c=(null===Z||void 0===Z?void 0:Z.type)===V.qL.INTEGRATION,d=(0,se.TU)(me(me({},A),{},{path:(0,y.jN)(A)}),ie.repo_path,Z);null===o||void 0===o||o(me(me({},d),{},{require_unique_name:!1}),(function(e){c&&De&&Oe({block:me(me({},De),{},{upstream_blocks:[e.uuid]})}),null===E||void 0===E||E(e)}),{disableFetchingFiles:!0})}}},l=function(e){A&&N({x:e.pageX,y:e.pageY})};return null===(e=document)||void 0===e||e.addEventListener("click",Pe),null===(t=document)||void 0===t||t.addEventListener("mousemove",l),null===(i=document)||void 0===i||i.addEventListener("mouseup",r),function(){var e,n,o;null===(e=document)||void 0===e||e.removeEventListener("click",Pe),null===(n=document)||void 0===n||n.removeEventListener("mousemove",l),null===(o=document)||void 0===o||o.removeEventListener("mouseup",r)}}),[o,De,A,Pe,Z,n,E,ie,L,Oe]);var _e=(0,r.useMemo)((function(){return null===p||void 0===p?void 0:p.map((function(e){return(0,k.jsx)(P,{containerRef:n,disableContextMenu:a,file:e,level:0,onClickFile:C,onClickFolder:j,onSelectBlockFile:x,openFile:F,reloadCount:X,setCoordinates:N,setDraggingFile:G,setSelectedFile:H,theme:I,timeout:L,uuidContainer:O},"".concat(e.name,"-").concat(X))}))}),[a,p,C,j,F,x,X,O]),Le=(0,r.useMemo)((function(){return q&&(0,y.lr)(q)}),[q]),Ie=(0,r.useMemo)((function(){return A&&(0,y.lr)(A)}),[A]),Se=(0,pe.dd)((function(){return(0,k.jsx)(ue,{fetchFileTree:s,onCancel:Te,selectedFolder:J})}),{},[s,J],{background:!0,uuid:"upload_files"}),Re=(0,i.Z)(Se,2),Ne=Re[0],Te=Re[1],Me=(0,pe.dd)((function(e){return(0,k.jsx)(U,{fetchFileTree:s,file:null===e||void 0===e?void 0:e.file,moveFile:null===e||void 0===e?void 0:e.moveFile,onCancel:Ue,selectedFolder:J,showError:D})}),{},[s,J,D],{background:!0,disableClickOutside:!0,uuid:"new_file"}),Ae=(0,i.Z)(Me,2),Be=Ae[0],Ue=Ae[1],Ye=(0,pe.dd)((function(e){return(0,k.jsx)(Q,{fetchFileTree:s,file:null===e||void 0===e?void 0:e.file,moveFile:null===e||void 0===e?void 0:e.moveFile,onCancel:ze,projectType:null===e||void 0===e?void 0:e.projectType,selectedFolder:J,showError:D})}),{},[s,J,D,D],{background:!0,disableClickOutside:!0,uuid:"new_folder"}),Qe=(0,i.Z)(Ye,2),Ve=Qe[0],ze=Qe[1],Ge=(0,r.useMemo)((function(){var e;if(!Le&&!q&&!J)return(0,k.jsx)("div",{});var o=(null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.getBoundingClientRect())||{},i=o.x,r=o.width,l=R||{},u=l.x,a=void 0===u?0:u,s=l.y,f=void 0===s?0:s,v=a+g.iI;a+ge>=i+r&&(v=i+r-(ge+g.iI)),v<0&&(v=0);var p=[];J?(p.push.apply(p,[{label:function(){return"New folder"},onClick:function(){Ve()},uuid:"new_folder"},{label:function(){return"Rename folder"},onClick:function(){Ve({file:J})},uuid:"rename_folder"},{label:function(){return"Move folder"},onClick:function(){Ve({file:J,moveFile:!0})},uuid:"Move_folder"},{label:function(){return"Delete folder"},onClick:function(){var e=(0,y.jN)(J);window.confirm("Are you sure you want to delete folder ".concat(e," and all its subfolders and files?"))&&je(encodeURIComponent(e))},uuid:"Delete_folder"},{label:function(){return"New file"},onClick:function(){Be({file:{}})},uuid:"new_file"},{label:function(){return"Upload files"},onClick:function(){Ne()},uuid:"upload_files"},{label:function(){return"Expand all subfolders"},onClick:function(){var e=new CustomEvent(m,{detail:{expand:!0,file:q,folder:J}});window.dispatchEvent(e)},uuid:"Expand all subfolders"},{label:function(){return"Collapse all subfolders"},onClick:function(){var e=new CustomEvent(m,{detail:{expand:!1,file:q,folder:J}});window.dispatchEvent(e)},uuid:"Collapse all subfolders"}]),null!==ne&&void 0!==ne&&ne(null===oe||void 0===oe?void 0:oe.PROJECT_PLATFORM)&&p.push({beforeIcon:(0,k.jsx)(_.Z,{width:1.5*g.iI}),onClick:function(){Ve({projectType:Y.k.STANDALONE})},uuid:"New Mage project"}),null!==ne&&void 0!==ne&&ne(null===oe||void 0===oe?void 0:oe.DBT_V2)&&p.push({beforeIcon:(0,k.jsx)(h.xE,{}),onClick:function(){Ve({projectType:Y.k.DBT})},uuid:"New dbt project"})):q&&(p.push.apply(p,[{label:function(){return"Rename file"},onClick:function(){Be({file:q})},uuid:"rename_file"},{label:function(){return"Move file"},onClick:function(){Be({file:q,moveFile:!0})},uuid:"move_file"},{label:function(){return"Download file"},onClick:function(){var e=(0,y.jN)(q);le(encodeURIComponent(e))},uuid:"download_file"}]),Le?p.push({label:function(){return"Delete file"},onClick:function(){Le.type===c.tf.CHART?window.confirm("Are you sure you want to delete widget ".concat(Le.uuid,"?"))&&t(Le):window.confirm("Are you sure you want to delete block ".concat(Le.uuid,"?"))&&we({block:Le,file:q})},uuid:"delete_block_file"}):p.push({label:function(){return"Delete file"},onClick:function(){var e=(0,y.jN)(q);window.confirm("Are you sure you want to delete file ".concat(e,"?"))&&be(encodeURIComponent(e))},uuid:"delete_file"}));var b=f+g.iI/2,C=36*p.length;return f+C>=window.innerHeight&&(b=f-C),(0,fe.createPortal)((0,k.jsx)("div",{style:{left:v,position:"fixed",top:b,zIndex:ae.bf+100},children:(0,k.jsx)(d.Z,{items:p,open:!0,parentRef:void 0,uuid:"FileBrowser/ContextMenu",width:ge})}),document.body)}),[R,we,be,je,t,le,ne,oe,te,n,Ne,Be,Ve,Le,q,J]);return(0,k.jsxs)(b.Nk,{ref:n,children:[_e,(Le||q||J)&&Ge,Ie&&(0,k.jsx)("div",{style:{left:(null===R||void 0===R?void 0:R.x)-g.iI,position:"fixed",top:(null===R||void 0===R?void 0:R.y)-g.iI,zIndex:ae.bf+100},children:(0,k.jsx)(v.ZP,{cursor:"grabbing",monospace:!0,children:null===Ie||void 0===Ie?void 0:Ie.uuid})})]})}!function(e){e.BLOCK_FILE="block_file",e.DISABLED="disabled",e.FILE="file",e.FOLDER="folder",e.PIPELINE="pipeline"}(be||(be={}));var je=r.forwardRef(Ce)},53005:function(e,n,o){o.d(n,{IO:function(){return m},V3:function(){return h},a9:function(){return c},eV:function(){return d},jN:function(){return a},lr:function(){return p},mD:function(){return s},o$:function(){return v},u$:function(){return b},y:function(){return f}});var t=o(17717),i=o(44425),r=o(89706),l=o(81728),u=o(80330);function c(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n||(o?null:null===e||void 0===e?void 0:e.name);if(null!==e&&void 0!==e&&e.parent){var r=[e.parent.name];return(null===i||void 0===i?void 0:i.length)>=1&&r.push(i),c(e.parent,r.join(t.sep))}return i}function d(e){return null===e||void 0===e?void 0:e.split(t.sep).slice(1).join(t.sep)}function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=c(e,n,o);return d(t)}function s(e){var n=null===e||void 0===e?void 0:e.match(r.d2);return(null===n||void 0===n?void 0:n.length)>=1?n[0].replace(".",""):null}function f(e){var n=["\\.".concat(r.Lu.PY),"\\.".concat(r.Lu.R),"\\.".concat(r.Lu.SQL),"\\.".concat(r.Lu.YAML),"\\.".concat(r.Lu.YML)].join("|"),o=new RegExp("".concat(n,"$")),t=e.match(o);return(null===t||void 0===t?void 0:t.length)>=1?t[0].replace(".",""):null}function v(e,n){var o=f(e);return!["__init__.py"].includes(e)&&(i.tf.DBT!==n||![r.Lu.YAML,r.Lu.YML].includes(o))}function p(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=c(e,n).split(t.sep);if(!l)return null;var d=(0,u.ck)(l);if(!l)return null;var a="";a=l.length>=3?l.slice(2,l.length).join(t.sep):l[l.length-1];var s=o?i.Q3:i.$W;if(s.concat(i.tf.DBT).includes(d)&&f(a)){var v=a.lastIndexOf("."),p=a.slice(v+1);return{language:r.nB[p],type:d,uuid:a.slice(0,v)}}}function h(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=c(e,n).split(t.sep);if(o[1]){var u=(0,l.C5)(o[n?0:1]);o[1]===i.tf.DBT&&(u=i.tf.DBT);var d=o[o.length-1],a=new RegExp(".".concat(r.Lu.YAML,"$")),s=new RegExp(".".concat(r.Lu.R,"$")),f=new RegExp(".".concat(r.Lu.SQL,"$")),v=new RegExp(".".concat(r.Lu.MD,"$"));if(d.match(a)&&i.VZ.includes(u))return{type:u,uuid:d.replace(a,"")};if(d.match(s)&&i.J8.includes(u))return{type:u,uuid:d.replace(s,"")};if(d.match(f)&&i.HX.includes(u)){var p=d.replace(/[.]/g,"_"),h=u===i.tf.DBT?o.slice(2,-1).join("_").concat("_".concat(p)):d.replace(f,"");return{type:u,uuid:h}}return d.match(v)&&u===i.tf.MARKDOWN?{type:u,uuid:d.replace(v,"")}:void 0}}function m(e,n){var o=e.split("."),i=o[o.length-1];r.n6.includes(i)&&o.pop();var l=o.join("").split(t.sep),u=l.slice(1,l.length).join("");return n.find((function(e){return e.uuid===u}))}function b(e){var n=e||{},o=n.language,t=n.name,u=n.type;if(t&&o&&u){var c=u===i.tf.CUSTOM?u:"".concat(u,"s"),d=r.JD[o],a=(0,l.kE)(t);return"".concat(c,"/").concat(a,".").concat(d)}}},80330:function(e,n,o){o.d(n,{TU:function(){return p},lU:function(){return v},ck:function(){return f}});var t=o(21831),i=o(17717),r=o(44425),l=o(57653),u=o(89706),c=o(86735);function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=n||(o?null:null===e||void 0===e?void 0:e.name);if(null!==e&&void 0!==e&&e.parent){var r=[e.parent.name];return(null===t||void 0===t?void 0:t.length)>=1&&r.push(t),d(e.parent,r.join(i.sep))}return null!==e&&void 0!==e&&e.path?null===e||void 0===e?void 0:e.path:t}var a=o(81728),s=o(42122),f=function(e){var n;if(null===e||void 0===e||e.forEach((function(e){if((null===e||void 0===e?void 0:e.length)>=1){var o=null===e||void 0===e?void 0:e.toLowerCase();(o in r.qC||(o=(0,a.C5)(o))in r.GJ)&&(n=o)}})),!n){var o=["\\.".concat(u.Lu.SQL),"\\.".concat(u.Lu.YAML),"\\.".concat(u.Lu.YML)].join("|"),t=new RegExp("".concat(o,"$"));if(e.join(i.sep).match(t))return r.tf.DBT}return n};function v(){return new RegExp(Object.keys(u.nB).map((function(e){return".(".concat(e,")$")})).join("|"))}function p(e,n,o){var p,h,m=null===e||void 0===e||null===(p=e.path.match(v())[0])||void 0===p?void 0:p.split(".")[1],b=o.type===l.qL.INTEGRATION,g=(0,c.sE)(null===o||void 0===o?void 0:o.blocks,(function(e){var n=e.type;return r.tf.DATA_EXPORTER===n})),C=e.path.replace(n,"").split(i.sep),j=f(e.path.split(i.sep)),y=r.tf.DBT===j,w=(h=C)[0]===r.tf.DBT?h.slice(1).join(i.sep):function(e){return e.at(-1)}(h).split(".")[0];if(C.length>=3&&!y){var k=C.slice(1,C.length-1).join(i.sep);w="".concat(k,"/").concat(w)}var x=u.nB[m],F={configuration:(0,s.hB)({file_path:y&&r.t6.SQL===x?w:null,file_source:{path:d(e)}}),language:x,name:(0,a.wE)(w),type:j};if(j===r.tf.CUSTOM&&(F.color=r.Lq.TEAL),b){var Z=(0,c.sE)(o.blocks,(function(e){var n=e.type;return r.tf.DATA_LOADER===n})),D=(0,c.sE)(o.blocks,(function(e){var n=e.type;return r.tf.TRANSFORMER===n})),E=[];D?E.push(D.uuid):null!==g&&void 0!==g&&g.upstream_blocks?E.push.apply(E,(0,t.Z)(g.upstream_blocks)):Z&&E.push(Z.uuid),F.upstream_blocks=E}return F}},44952:function(e,n,o){o.d(n,{K:function(){return i}});var t=o(4383);function i(e){var n=(0,t.ZP)("downloads",e),o=document.createElement("a");o.href=n,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(n),document.body.removeChild(o)}},19698:function(e,n,o){var t=o(82684),i=o(35686);n.Z=function(){var e=i.ZP.statuses.list().data;return{status:(0,t.useMemo)((function(){var n;return null===e||void 0===e||null===(n=e.statuses)||void 0===n?void 0:n[0]}),[e])}}}}]);