# AUTOGENERATED! DO NOT EDIT! File to edit: ../nbs/05_jobs.ipynb.

# %% auto 0
__all__ = ['numcores']

# %% ../nbs/05_jobs.ipynb 6
import os, sys, joblib, multiprocessing

# %% ../nbs/05_jobs.ipynb 8
#| export


# %% ../nbs/05_jobs.ipynb 10
#| export


# %% ../nbs/05_jobs.ipynb 12
#| export 


# %% ../nbs/05_jobs.ipynb 14
#| export


# %% ../nbs/05_jobs.ipynb 16
def numcores():
    ncpu = joblib.cpu_count()
    if isinstance(ncpu, int): return ncpu
    
    ncpu = os.cpu_count()
    if hasattr(os, 'sched_getaffinity'): 
        cpus = os.sched_getaffinity(0)
        ncpu = len(cpus)
    if isinstance(ncpu, int): return ncpu

    ncpu = multiprocessing.cpu_count()
    return ncpu
