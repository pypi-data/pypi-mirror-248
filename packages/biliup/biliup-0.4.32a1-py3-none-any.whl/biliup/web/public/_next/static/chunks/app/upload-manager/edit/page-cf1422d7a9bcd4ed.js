(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{69277:function(l,i,e){Promise.resolve().then(e.bind(e,24814))},24814:function(l,i,e){"use strict";e.r(i);var n=e(57437),o=e(2265),t=e(76842),d=e(43402),u=e(16869),r=e(86854),s=e(66310),a=e(33068),c=e(24033),v=e(30713),p=e(65746);i.default=()=>{var l,i;let{Paragraph:e}=t.Typography,m=(0,c.useSearchParams)(),{trigger:_}=(0,a.Z)("/v1/upload/streamers",u.wG),{data:g,error:h,isLoading:y,mutate:f}=(0,v.ZP)(()=>m.get("id")?"/v1/upload/streamers/".concat(m.get("id")):null,u._i),x=(0,c.useRouter)(),{typeTree:j,isError:w}=(0,p.JB)(),b=(0,o.useRef)(),[k,E]=(0,o.useState)("inset");if((0,o.useEffect)(()=>{let l=(0,s.q)(s.f.lg,{match:()=>{E("left")},unmatch:()=>{E("top")}});return()=>l()},[]),h||w)return(0,n.jsx)("div",{children:null==h?void 0:h.message});if(y)return(0,n.jsx)("div",{children:"Loading..."});if(!g||!j)return null;let P={...g,tag:(null===(l=g.tags)||void 0===l?void 0:l.length)===0?[]:null===(i=g.tags)||void 0===i?void 0:i.split(","),tid:[j.find(l=>l.children.some(l=>l.id===(null==g?void 0:g.tid))).value,g.tid]};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse",paddingRight:12},children:(0,n.jsx)(t.zx,{onClick:async()=>{var l,i,o,d,u,r,s,a,c,v,p,m,g;let h=await (null===(l=b.current)||void 0===l?void 0:l.validate());try{let l={template_name:null==h?void 0:h.template_name,copyright:null==h?void 0:h.copyright,id:null==h?void 0:h.id,source:null!==(i=null==h?void 0:h.source)&&void 0!==i?i:"",tid:null==h?void 0:h.tid[1],cover:null!==(o=null==h?void 0:h.cover)&&void 0!==o?o:"",title:null!==(d=null==h?void 0:h.title)&&void 0!==d?d:"",description:null!==(u=null==h?void 0:h.description)&&void 0!==u?u:"",dynamic:null!==(r=null==h?void 0:h.dynamic)&&void 0!==r?r:"",tag:null!==(s=null==h?void 0:h.tag)&&void 0!==s?s:"",interactive:null!==(a=null==h?void 0:h.interactive)&&void 0!==a?a:0,dolby:null!==(c=null==h?void 0:h.dolby)&&void 0!==c?c:0,lossless_music:null!==(v=null==h?void 0:h.lossless_music)&&void 0!==v?v:0,up_selection_reply:null!==(p=null==h?void 0:h.up_selection_reply)&&void 0!==p&&p,up_close_reply:null!==(m=null==h?void 0:h.up_close_reply)&&void 0!==m&&m,up_close_danmu:null!==(g=null==h?void 0:h.up_close_danmu)&&void 0!==g&&g,open_elec:null==h?void 0:h.open_elec,no_reprint:null==h?void 0:h.no_reprint,mission_id:null==h?void 0:h.mission_id,dtime:null==h?void 0:h.dtime,user_cookie:null==h?void 0:h.user},e=await _(l);await f(e),t.FN.success("更新成功"),x.push("/upload-manager")}catch(l){t.P_.error({title:"创建失败",content:(0,n.jsx)(e,{style:{maxWidth:450},children:l.message}),style:{width:"min-content"}})}},type:"primary",icon:(0,n.jsx)(d.Z,{size:"large"}),theme:"solid",style:{marginTop:12,marginRight:4},children:"保存模板"})}),(0,n.jsx)(t.Form,{initValues:P,style:{paddingLeft:30,paddingBottom:40},getFormApi:l=>b.current=l,autoScrollToError:!0,component:r.Z,labelWidth:"180px",labelPosition:k})]})}}},function(l){l.O(0,[368,713,833,971,472,744],function(){return l(l.s=69277)}),_N_E=l.O()}]);