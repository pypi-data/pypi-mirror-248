$schema: https://json-schema.org/draft/2020-12/schema
title: Branch Configuration
description: Names, prefixes, and protection rules for different branch types
type: object
default: { }
additionalProperties: false
properties:
  main:
    description: Configurations for the main (aka trunk, default) branch
    type: object
    default: { }
    additionalProperties: false
    properties:
      name:
        description: Name of the default branch
        type: string
        default: main
      protection_rules:
        description: Branch protection rules for the default branch
        type: object
        default: { }
        additionalProperties: false
        properties:
          allow_deletion:
            type: boolean
            default: false
          allow_force_push:
            type: boolean
            default: false
    required: [ name, protection_rules ]
  release:
    description: Configurations for release branches
    type: object
    default: { }
    properties:
      prefix:
        description: Prefix for the branch name
        type: string
        default: release/v
      protection_rules:
        description: Branch protection rules
        type: object
        default: { }
        additionalProperties: false
        properties:
          allow_deletion:
            type: boolean
            default: false
          allow_force_push:
            type: boolean
            default: false
    required: [ prefix ]
  pre-release:
    type: object
    description: Pre-release branch
    default: { }
    properties:
      prefix:
        description: Prefix for the branch name
        type: string
        default: pre-release/v
      protection_rules:
        description: Branch protection rules
        type: object
        default: { }
        additionalProperties: false
        properties:
          allow_deletion:
            type: boolean
            default: false
          allow_force_push:
            type: boolean
            default: false
    required: [ prefix ]
  implementation:
    type: object
    description: Implementation branch
    default: { }
    properties:
      prefix:
        description: Prefix for the branch name
        type: string
        default: impl/
      protection_rules:
        description: Branch protection rules
        type: object
        default: { }
        additionalProperties: false
        properties:
          allow_deletion:
            type: boolean
            default: true
          allow_force_push:
            type: boolean
            default: true
    required: [ prefix ]
  development:
    type: object
    description: Development branch
    default: {}
    properties:
      prefix:
        description: Prefix for the branch name
        type: string
        default: dev/
      protection_rules:
        description: Branch protection rules
        type: object
        default: { }
        additionalProperties: false
        properties:
          allow_deletion:
            type: boolean
            default: true
          allow_force_push:
            type: boolean
            default: true
    required: [ prefix ]
  auto-update:
    type: object
    description: Auto-update branch
    default: { }
    properties:
      prefix:
        description: Prefix for the branch name
        type: string
        default: auto-update/
      protection_rules:
        description: Branch protection rules
        type: object
        default: { }
        additionalProperties: false
        properties:
          allow_deletion:
            type: boolean
            default: true
          allow_force_push:
            type: boolean
            default: true
    required: [ prefix ]
required: [ main, release, pre-release, implementation, development, auto-update ]
