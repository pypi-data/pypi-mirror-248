<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>src.TokenLab.simulationcomponents.agentpoolclasses API documentation</title>
<meta name="description" content="Created on Fri Nov 18 12:20:03 2022 â€¦" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>src.TokenLab.simulationcomponents.agentpoolclasses</code></h1>
</header>
<section id="section-intro">
<p>Created on Fri Nov 18 12:20:03 2022</p>
<p>@author: stylianoskampakis</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#!/usr/bin/env python3
# -*- coding: utf-8 -*-
&#34;&#34;&#34;
Created on Fri Nov 18 12:20:03 2022

@author: stylianoskampakis
&#34;&#34;&#34;
from typing import List, Dict,Union
from baseclasses import *
from usergrowthclasses import UserGrowth,UserGrowth_Constant
from transactionclasses import TransactionManagement, TransactionManagement_Constant
import copy
from typing import TypedDict
from addons import Condition



class AgentPool_Basic(AgentPool):
    &#34;&#34;&#34;
    Simulates a set of agents. Requires:
        
        1) UserGrowth class, which should be independent
        2) Transaction management class
        3) Currency: this is an arbitrary symbol, but it has to also exist in the TokenEconomy.
    
    So, for this class the execute() function simply runs the users and the transactions controller. 
    
    &#34;&#34;&#34;

    
    def __init__(self,users_controller:Union[UserGrowth,int],transactions_controller:TransactionManagement,
                 currency:str=&#39;$&#39;,name:str=None,dumper:bool=False)-&gt;None:
        &#34;&#34;&#34;
        
        users_controller: Controller specifying how the userbase grows over time. If the users controller is an integer,
        then the AgentPool class will simply take it as a constant valeu for all simulations
        
        transactions_controller: Controller that determines
        currency: the currency this pool represents.
        name: the name of the pool, this can come in very handy during debugging
        dumper: Whether this is an agent pool that only sells tokens
        
        
        &#34;&#34;&#34;      
        super(AgentPool_Basic,self).__init__()
        if isinstance(users_controller,int):
            users_controller=UserGrowth_Constant(users_controller)
            
        if isinstance(transactions_controller,float) or isinstance(transactions_controller,int):
            transactions_controller=TransactionManagement_Constant(transactions_controller)
            
        self.users_controller=users_controller
        self.users_controller.link(AgentPool,self)
        self.transactions_controller=transactions_controller
        self.transactions_controller.link(AgentPool,self)
        self.currency=currency
        
        self.name=name
        
        self.dependencies={TokenEconomy:None}

        
        return None
    
    
    def execute(self)-&gt;None:
        &#34;&#34;&#34;
        Runs the agent pool. It increases iterations by 1, and then calculates the new number of users
        and the new number of transactions.
        
        Fields:
            &#39;iterations&#39;,&#39;num_users&#39;,&#39;transactions&#39;

        Returns
        -------
        None
            DESCRIPTION.

        &#34;&#34;&#34;
        self.iteration+=1
        self.num_users = self.users_controller.execute()
        self.transactions = self.transactions_controller.execute()
        
        return None
    
    def test_integrity(self)-&gt;bool:
        &#34;&#34;&#34;
        

        Returns
        -------
        bool
            Returns true if the integrity of the user and the transaction controller is True.

        &#34;&#34;&#34;
        if not self.users_controller.test_integrity():
            return False
        if not self.transactions_controller.test_integrity():
            return False
        
        return True
    
    def reset(self)-&gt;None:
        self.iteration=0
        self.users_controller.reset()
        self.transactions_controller.reset()
        

class AgentPool_Conditional(Initialisable,AgentPool):
    &#34;&#34;&#34;
    Uses conditions in order connect controllers (user or transaction) to the condition being True.
    
    This class can be used to create very flexible logic-style patterns.
    
    This pool inherits from the Initialisable class. Because of the way connections work, this class has to be
    initialised before its user properly. If connected to a TokenEconomy, then this happens automatically, so the
    user has nothing to worry about.
    &#34;&#34;&#34;
    
    def __init__(self,users_controller:Union[UserGrowth,int]=None,transactions_controller:TransactionManagement=None,
                 currency:str=&#39;$&#39;,name:str=None,connect_to_token_economy:bool=True):
        &#34;&#34;&#34;
        

        Parameters
        ----------
        users_controller : Union[UserGrowth,int], optional
            This is a users controller which runs independently of any conditions. The default is None.
        transactions_controller : TransactionManagement, optional
            Transactions controller which runs independently of any conditions. The default is None.
        currency : str, optional
            Need to specify a currency when using this within a token economy. The default is &#39;$&#39;.
        name : str, optional
            Name of this object. The default is None.
        connect_to_token_economy : bool, optional
            If True, then the Conditions supplied are reading data from the TokenEconomy this pool
            is connected to. Otherwise, they read data from this agent pool itself. The default is True.

        Returns
        -------
        None.

        &#34;&#34;&#34;
        super(AgentPool_Conditional,self).__init__()
        
        self.conditions_map=[]
        self.dependencies={TokenEconomy:None}
        
        
        self.connect_to_token_economy=connect_to_token_economy

        
        if users_controller!=None and not isinstance(users_controller,int):
            self.users_controller=users_controller
            self.users_controller.link(AgentPool,self)
        elif isinstance(users_controller,int):
            self.users_controller=UserGrowth_Constant(users_controller)
            self.users_controller.link(AgentPool,self)
        else:
            self.users_controller=None
        
            
        if transactions_controller!=None and not isinstance(transactions_controller,int):
            self.transactions_controller=transactions_controller
            self.transactions_controller.link(AgentPool,self)
        elif isinstance(transactions_controller,int):
            self.transactions_controller=TransactionManagement_Constant(transactions_controller)
            self.transactions_controller.link(AgentPool,self)
        else:
            self.transactions_controller=None
            
        self.currency=currency
        
        self.name=name
        self.num_users=0
        self.transactions=0
        
        
    def add_condition(self,condition:Condition,controller:Union[UserGrowth,TransactionManagement])-&gt;bool:
        &#34;&#34;&#34;
        Adds a Condition, which when True, triggers a controller object.

        Parameters
        ----------
        condition : Condition
        controller : Union[UserGrowth,TransactionManagement]
            A user controller or transaction controller object.

        Returns
        -------
        None
            DESCRIPTION.

        &#34;&#34;&#34;
        
        self.conditions_map.append([condition,controller])
            
        for con in self.conditions_map:
            #link the controller to the agent pool itself
            con[1].link(AgentPool,self)
            #if no simulation component has specified for the condition, simply link it to the TokenEconomy
            #of this agent pool
            if con[0].sim_component==None:
                con[0].sim_component=self.dependencies[TokenEconomy]
                
        return None
                
    def add_conditions(self,conditions:List[Union[Condition,Union[UserGrowth,TransactionManagement]]])-&gt;None:
        &#34;&#34;&#34;
        
        Shortcut for adding multiple conditions in one go.

        Parameters
        ----------
        conditions : List of Conditions and Controllers to add. The format has to be 
        [ [Condition1,Controller1], [Condition2, Controller2] ]

        Returns
        -------
        None

        &#34;&#34;&#34;
        
        for cond in conditions:
            self.add_condition(cond[0],cond[1])
            
        return None
                    
    def initialise(self)-&gt;None:
        &#34;&#34;&#34;
        Initialises the class. This action connects all objects to the right modules, that is
        either the token economy itself or the agent pools.
        &#34;&#34;&#34;
        if self.connect_to_token_economy:
            self.connector=self.dependencies[TokenEconomy]
            self.label=TokenEconomy
        else:
            self.label=AgentPool
            self.connector=self
        
        if self.users_controller!=None:
            self.users_controller.link(self.label,self.connector)   
            
        if self.transactions_controller!=None:
            self.transactions_controller.link(self.label,self.connector)
            
        for con in self.conditions_map:
            con[1].link(self.label,self.connector)
            #if the condition has no sim component, then connect to the current token economy
            if con[0].sim_component==None:
                con[0].sim_component=self.dependencies[TokenEconomy]
                
        self.initialised=True
        
        
    def execute(self)-&gt;None:
        &#34;&#34;&#34;
        This function first runs the users controller (if any), then the transactions controller (if any)
        and then all conditions with associated controllers.

        Raises
        ------
        Exception
            If the connection of a condition is not to a controller (user or transaction), then an exception is raised.

        Returns
        -------
        None
            

        &#34;&#34;&#34;
        self.iteration+=1
        self.transactions=0
        self.num_users=0
        
        if not self.initialised:
            self.initialise()

        if self.users_controller!=None:
            self.num_users+=self.users_controller.execute()
            
        if self.transactions_controller!=None:
            self.transactions+=self.transactions_controller.execute()
        
        for con in self.conditions_map:
            logical_result=con[0].execute()
            if logical_result:
                logical_result=con[0].execute()

                if isinstance(con[1],TransactionManagement):
                    if self.connect_to_token_economy:
                        self.transactions+=con[1].execute(&#39;TokenEconomy&#39;)
                    else:
                        self.transactions+=con[1].execute(&#39;AgentPool&#39;)
                elif isinstance(con[1],UserGrowth):
                    self.num_users+=con[1].execute()
                else:
                    raise Exception(&#39;The condition was attached to an object that is neither a UserGrowth nor TransactionsManagement class!&#39;)        
        return None
        
        
    def reset(self)-&gt;None:
        &#34;&#34;&#34;
        Sets the iteration meter to 0 and resets
        all controllers, including the ones inside conditions.

        &#34;&#34;&#34;
        self.iteration=0
        for con in self.conditions_map:
            con[1].reset()
            
        if self.users_controller!=None:
            self.users_controller.reset()
            
        if self.transactions_controller!=None:
            self.transactions_controller.reset()
            
    
    def test_integrity(self)-&gt;bool:
        &#34;&#34;&#34;
        Tests the integrity of the controllers and the dependencies.
        &#34;&#34;&#34;
        if self.dependencies[TokenEconomy]==None:
            return False
        try:
            if not self.users_controller.test_integrity():
                return False
        except:
            pass
        
        try:
            if not self.transactions_controller.test_integrity():
                return False
        except:
            pass
        
        return True

    
        
        </code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Basic"><code class="flex name class">
<span>class <span class="ident">AgentPool_Basic</span></span>
<span>(</span><span>users_controller:Â Union[usergrowthclasses.UserGrowth,Â int], transactions_controller:Â transactionclasses.TransactionManagement, currency:Â strÂ =Â '$', name:Â strÂ =Â None, dumper:Â boolÂ =Â False)</span>
</code></dt>
<dd>
<div class="desc"><p>Simulates a set of agents. Requires:</p>
<pre><code>1) UserGrowth class, which should be independent
2) Transaction management class
3) Currency: this is an arbitrary symbol, but it has to also exist in the TokenEconomy.
</code></pre>
<p>So, for this class the execute() function simply runs the users and the transactions controller. </p>
<p>users_controller: Controller specifying how the userbase grows over time. If the users controller is an integer,
then the AgentPool class will simply take it as a constant valeu for all simulations</p>
<p>transactions_controller: Controller that determines
currency: the currency this pool represents.
name: the name of the pool, this can come in very handy during debugging
dumper: Whether this is an agent pool that only sells tokens</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class AgentPool_Basic(AgentPool):
    &#34;&#34;&#34;
    Simulates a set of agents. Requires:
        
        1) UserGrowth class, which should be independent
        2) Transaction management class
        3) Currency: this is an arbitrary symbol, but it has to also exist in the TokenEconomy.
    
    So, for this class the execute() function simply runs the users and the transactions controller. 
    
    &#34;&#34;&#34;

    
    def __init__(self,users_controller:Union[UserGrowth,int],transactions_controller:TransactionManagement,
                 currency:str=&#39;$&#39;,name:str=None,dumper:bool=False)-&gt;None:
        &#34;&#34;&#34;
        
        users_controller: Controller specifying how the userbase grows over time. If the users controller is an integer,
        then the AgentPool class will simply take it as a constant valeu for all simulations
        
        transactions_controller: Controller that determines
        currency: the currency this pool represents.
        name: the name of the pool, this can come in very handy during debugging
        dumper: Whether this is an agent pool that only sells tokens
        
        
        &#34;&#34;&#34;      
        super(AgentPool_Basic,self).__init__()
        if isinstance(users_controller,int):
            users_controller=UserGrowth_Constant(users_controller)
            
        if isinstance(transactions_controller,float) or isinstance(transactions_controller,int):
            transactions_controller=TransactionManagement_Constant(transactions_controller)
            
        self.users_controller=users_controller
        self.users_controller.link(AgentPool,self)
        self.transactions_controller=transactions_controller
        self.transactions_controller.link(AgentPool,self)
        self.currency=currency
        
        self.name=name
        
        self.dependencies={TokenEconomy:None}

        
        return None
    
    
    def execute(self)-&gt;None:
        &#34;&#34;&#34;
        Runs the agent pool. It increases iterations by 1, and then calculates the new number of users
        and the new number of transactions.
        
        Fields:
            &#39;iterations&#39;,&#39;num_users&#39;,&#39;transactions&#39;

        Returns
        -------
        None
            DESCRIPTION.

        &#34;&#34;&#34;
        self.iteration+=1
        self.num_users = self.users_controller.execute()
        self.transactions = self.transactions_controller.execute()
        
        return None
    
    def test_integrity(self)-&gt;bool:
        &#34;&#34;&#34;
        

        Returns
        -------
        bool
            Returns true if the integrity of the user and the transaction controller is True.

        &#34;&#34;&#34;
        if not self.users_controller.test_integrity():
            return False
        if not self.transactions_controller.test_integrity():
            return False
        
        return True
    
    def reset(self)-&gt;None:
        self.iteration=0
        self.users_controller.reset()
        self.transactions_controller.reset()</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>baseclasses.AgentPool</li>
<li>baseclasses.Controller</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Basic.execute"><code class="name flex">
<span>def <span class="ident">execute</span></span>(<span>self) â€‘>Â None</span>
</code></dt>
<dd>
<div class="desc"><p>Runs the agent pool. It increases iterations by 1, and then calculates the new number of users
and the new number of transactions.</p>
<h2 id="fields">Fields</h2>
<p>'iterations','num_users','transactions'</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>None</code></dt>
<dd>DESCRIPTION.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def execute(self)-&gt;None:
    &#34;&#34;&#34;
    Runs the agent pool. It increases iterations by 1, and then calculates the new number of users
    and the new number of transactions.
    
    Fields:
        &#39;iterations&#39;,&#39;num_users&#39;,&#39;transactions&#39;

    Returns
    -------
    None
        DESCRIPTION.

    &#34;&#34;&#34;
    self.iteration+=1
    self.num_users = self.users_controller.execute()
    self.transactions = self.transactions_controller.execute()
    
    return None</code></pre>
</details>
</dd>
<dt id="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Basic.reset"><code class="name flex">
<span>def <span class="ident">reset</span></span>(<span>self) â€‘>Â None</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reset(self)-&gt;None:
    self.iteration=0
    self.users_controller.reset()
    self.transactions_controller.reset()</code></pre>
</details>
</dd>
<dt id="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Basic.test_integrity"><code class="name flex">
<span>def <span class="ident">test_integrity</span></span>(<span>self) â€‘>Â bool</span>
</code></dt>
<dd>
<div class="desc"><h2 id="returns">Returns</h2>
<dl>
<dt><code>bool</code></dt>
<dd>Returns true if the integrity of the user and the transaction controller is True.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def test_integrity(self)-&gt;bool:
    &#34;&#34;&#34;
    

    Returns
    -------
    bool
        Returns true if the integrity of the user and the transaction controller is True.

    &#34;&#34;&#34;
    if not self.users_controller.test_integrity():
        return False
    if not self.transactions_controller.test_integrity():
        return False
    
    return True</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional"><code class="flex name class">
<span>class <span class="ident">AgentPool_Conditional</span></span>
<span>(</span><span>users_controller:Â Union[usergrowthclasses.UserGrowth,Â int]Â =Â None, transactions_controller:Â transactionclasses.TransactionManagementÂ =Â None, currency:Â strÂ =Â '$', name:Â strÂ =Â None, connect_to_token_economy:Â boolÂ =Â True)</span>
</code></dt>
<dd>
<div class="desc"><p>Uses conditions in order connect controllers (user or transaction) to the condition being True.</p>
<p>This class can be used to create very flexible logic-style patterns.</p>
<p>This pool inherits from the Initialisable class. Because of the way connections work, this class has to be
initialised before its user properly. If connected to a TokenEconomy, then this happens automatically, so the
user has nothing to worry about.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>users_controller</code></strong> :&ensp;<code>Union[UserGrowth,int]</code>, optional</dt>
<dd>This is a users controller which runs independently of any conditions. The default is None.</dd>
<dt><strong><code>transactions_controller</code></strong> :&ensp;<code>TransactionManagement</code>, optional</dt>
<dd>Transactions controller which runs independently of any conditions. The default is None.</dd>
<dt><strong><code>currency</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Need to specify a currency when using this within a token economy. The default is '$'.</dd>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Name of this object. The default is None.</dd>
<dt><strong><code>connect_to_token_economy</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>If True, then the Conditions supplied are reading data from the TokenEconomy this pool
is connected to. Otherwise, they read data from this agent pool itself. The default is True.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>None.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class AgentPool_Conditional(Initialisable,AgentPool):
    &#34;&#34;&#34;
    Uses conditions in order connect controllers (user or transaction) to the condition being True.
    
    This class can be used to create very flexible logic-style patterns.
    
    This pool inherits from the Initialisable class. Because of the way connections work, this class has to be
    initialised before its user properly. If connected to a TokenEconomy, then this happens automatically, so the
    user has nothing to worry about.
    &#34;&#34;&#34;
    
    def __init__(self,users_controller:Union[UserGrowth,int]=None,transactions_controller:TransactionManagement=None,
                 currency:str=&#39;$&#39;,name:str=None,connect_to_token_economy:bool=True):
        &#34;&#34;&#34;
        

        Parameters
        ----------
        users_controller : Union[UserGrowth,int], optional
            This is a users controller which runs independently of any conditions. The default is None.
        transactions_controller : TransactionManagement, optional
            Transactions controller which runs independently of any conditions. The default is None.
        currency : str, optional
            Need to specify a currency when using this within a token economy. The default is &#39;$&#39;.
        name : str, optional
            Name of this object. The default is None.
        connect_to_token_economy : bool, optional
            If True, then the Conditions supplied are reading data from the TokenEconomy this pool
            is connected to. Otherwise, they read data from this agent pool itself. The default is True.

        Returns
        -------
        None.

        &#34;&#34;&#34;
        super(AgentPool_Conditional,self).__init__()
        
        self.conditions_map=[]
        self.dependencies={TokenEconomy:None}
        
        
        self.connect_to_token_economy=connect_to_token_economy

        
        if users_controller!=None and not isinstance(users_controller,int):
            self.users_controller=users_controller
            self.users_controller.link(AgentPool,self)
        elif isinstance(users_controller,int):
            self.users_controller=UserGrowth_Constant(users_controller)
            self.users_controller.link(AgentPool,self)
        else:
            self.users_controller=None
        
            
        if transactions_controller!=None and not isinstance(transactions_controller,int):
            self.transactions_controller=transactions_controller
            self.transactions_controller.link(AgentPool,self)
        elif isinstance(transactions_controller,int):
            self.transactions_controller=TransactionManagement_Constant(transactions_controller)
            self.transactions_controller.link(AgentPool,self)
        else:
            self.transactions_controller=None
            
        self.currency=currency
        
        self.name=name
        self.num_users=0
        self.transactions=0
        
        
    def add_condition(self,condition:Condition,controller:Union[UserGrowth,TransactionManagement])-&gt;bool:
        &#34;&#34;&#34;
        Adds a Condition, which when True, triggers a controller object.

        Parameters
        ----------
        condition : Condition
        controller : Union[UserGrowth,TransactionManagement]
            A user controller or transaction controller object.

        Returns
        -------
        None
            DESCRIPTION.

        &#34;&#34;&#34;
        
        self.conditions_map.append([condition,controller])
            
        for con in self.conditions_map:
            #link the controller to the agent pool itself
            con[1].link(AgentPool,self)
            #if no simulation component has specified for the condition, simply link it to the TokenEconomy
            #of this agent pool
            if con[0].sim_component==None:
                con[0].sim_component=self.dependencies[TokenEconomy]
                
        return None
                
    def add_conditions(self,conditions:List[Union[Condition,Union[UserGrowth,TransactionManagement]]])-&gt;None:
        &#34;&#34;&#34;
        
        Shortcut for adding multiple conditions in one go.

        Parameters
        ----------
        conditions : List of Conditions and Controllers to add. The format has to be 
        [ [Condition1,Controller1], [Condition2, Controller2] ]

        Returns
        -------
        None

        &#34;&#34;&#34;
        
        for cond in conditions:
            self.add_condition(cond[0],cond[1])
            
        return None
                    
    def initialise(self)-&gt;None:
        &#34;&#34;&#34;
        Initialises the class. This action connects all objects to the right modules, that is
        either the token economy itself or the agent pools.
        &#34;&#34;&#34;
        if self.connect_to_token_economy:
            self.connector=self.dependencies[TokenEconomy]
            self.label=TokenEconomy
        else:
            self.label=AgentPool
            self.connector=self
        
        if self.users_controller!=None:
            self.users_controller.link(self.label,self.connector)   
            
        if self.transactions_controller!=None:
            self.transactions_controller.link(self.label,self.connector)
            
        for con in self.conditions_map:
            con[1].link(self.label,self.connector)
            #if the condition has no sim component, then connect to the current token economy
            if con[0].sim_component==None:
                con[0].sim_component=self.dependencies[TokenEconomy]
                
        self.initialised=True
        
        
    def execute(self)-&gt;None:
        &#34;&#34;&#34;
        This function first runs the users controller (if any), then the transactions controller (if any)
        and then all conditions with associated controllers.

        Raises
        ------
        Exception
            If the connection of a condition is not to a controller (user or transaction), then an exception is raised.

        Returns
        -------
        None
            

        &#34;&#34;&#34;
        self.iteration+=1
        self.transactions=0
        self.num_users=0
        
        if not self.initialised:
            self.initialise()

        if self.users_controller!=None:
            self.num_users+=self.users_controller.execute()
            
        if self.transactions_controller!=None:
            self.transactions+=self.transactions_controller.execute()
        
        for con in self.conditions_map:
            logical_result=con[0].execute()
            if logical_result:
                logical_result=con[0].execute()

                if isinstance(con[1],TransactionManagement):
                    if self.connect_to_token_economy:
                        self.transactions+=con[1].execute(&#39;TokenEconomy&#39;)
                    else:
                        self.transactions+=con[1].execute(&#39;AgentPool&#39;)
                elif isinstance(con[1],UserGrowth):
                    self.num_users+=con[1].execute()
                else:
                    raise Exception(&#39;The condition was attached to an object that is neither a UserGrowth nor TransactionsManagement class!&#39;)        
        return None
        
        
    def reset(self)-&gt;None:
        &#34;&#34;&#34;
        Sets the iteration meter to 0 and resets
        all controllers, including the ones inside conditions.

        &#34;&#34;&#34;
        self.iteration=0
        for con in self.conditions_map:
            con[1].reset()
            
        if self.users_controller!=None:
            self.users_controller.reset()
            
        if self.transactions_controller!=None:
            self.transactions_controller.reset()
            
    
    def test_integrity(self)-&gt;bool:
        &#34;&#34;&#34;
        Tests the integrity of the controllers and the dependencies.
        &#34;&#34;&#34;
        if self.dependencies[TokenEconomy]==None:
            return False
        try:
            if not self.users_controller.test_integrity():
                return False
        except:
            pass
        
        try:
            if not self.transactions_controller.test_integrity():
                return False
        except:
            pass
        
        return True</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>baseclasses.Initialisable</li>
<li>baseclasses.AgentPool</li>
<li>baseclasses.Controller</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.add_condition"><code class="name flex">
<span>def <span class="ident">add_condition</span></span>(<span>self, condition:Â addons.Condition, controller:Â Union[usergrowthclasses.UserGrowth,Â transactionclasses.TransactionManagement]) â€‘>Â bool</span>
</code></dt>
<dd>
<div class="desc"><p>Adds a Condition, which when True, triggers a controller object.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>condition</code></strong> :&ensp;<code>Condition</code></dt>
<dd>&nbsp;</dd>
<dt><strong><code>controller</code></strong> :&ensp;<code>Union[UserGrowth,TransactionManagement]</code></dt>
<dd>A user controller or transaction controller object.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>None</code></dt>
<dd>DESCRIPTION.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_condition(self,condition:Condition,controller:Union[UserGrowth,TransactionManagement])-&gt;bool:
    &#34;&#34;&#34;
    Adds a Condition, which when True, triggers a controller object.

    Parameters
    ----------
    condition : Condition
    controller : Union[UserGrowth,TransactionManagement]
        A user controller or transaction controller object.

    Returns
    -------
    None
        DESCRIPTION.

    &#34;&#34;&#34;
    
    self.conditions_map.append([condition,controller])
        
    for con in self.conditions_map:
        #link the controller to the agent pool itself
        con[1].link(AgentPool,self)
        #if no simulation component has specified for the condition, simply link it to the TokenEconomy
        #of this agent pool
        if con[0].sim_component==None:
            con[0].sim_component=self.dependencies[TokenEconomy]
            
    return None</code></pre>
</details>
</dd>
<dt id="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.add_conditions"><code class="name flex">
<span>def <span class="ident">add_conditions</span></span>(<span>self, conditions:Â List[Union[addons.Condition,Â usergrowthclasses.UserGrowth,Â transactionclasses.TransactionManagement]]) â€‘>Â None</span>
</code></dt>
<dd>
<div class="desc"><p>Shortcut for adding multiple conditions in one go.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>conditions</code></strong> :&ensp;<code>List</code> of <code>Conditions and Controllers to add. The format has to be </code></dt>
<dd>&nbsp;</dd>
</dl>
<p>[ [Condition1,Controller1], [Condition2, Controller2] ]</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>None</code></dt>
<dd>&nbsp;</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_conditions(self,conditions:List[Union[Condition,Union[UserGrowth,TransactionManagement]]])-&gt;None:
    &#34;&#34;&#34;
    
    Shortcut for adding multiple conditions in one go.

    Parameters
    ----------
    conditions : List of Conditions and Controllers to add. The format has to be 
    [ [Condition1,Controller1], [Condition2, Controller2] ]

    Returns
    -------
    None

    &#34;&#34;&#34;
    
    for cond in conditions:
        self.add_condition(cond[0],cond[1])
        
    return None</code></pre>
</details>
</dd>
<dt id="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.execute"><code class="name flex">
<span>def <span class="ident">execute</span></span>(<span>self) â€‘>Â None</span>
</code></dt>
<dd>
<div class="desc"><p>This function first runs the users controller (if any), then the transactions controller (if any)
and then all conditions with associated controllers.</p>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>Exception</code></dt>
<dd>If the connection of a condition is not to a controller (user or transaction), then an exception is raised.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>None</code></dt>
<dd>&nbsp;</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def execute(self)-&gt;None:
    &#34;&#34;&#34;
    This function first runs the users controller (if any), then the transactions controller (if any)
    and then all conditions with associated controllers.

    Raises
    ------
    Exception
        If the connection of a condition is not to a controller (user or transaction), then an exception is raised.

    Returns
    -------
    None
        

    &#34;&#34;&#34;
    self.iteration+=1
    self.transactions=0
    self.num_users=0
    
    if not self.initialised:
        self.initialise()

    if self.users_controller!=None:
        self.num_users+=self.users_controller.execute()
        
    if self.transactions_controller!=None:
        self.transactions+=self.transactions_controller.execute()
    
    for con in self.conditions_map:
        logical_result=con[0].execute()
        if logical_result:
            logical_result=con[0].execute()

            if isinstance(con[1],TransactionManagement):
                if self.connect_to_token_economy:
                    self.transactions+=con[1].execute(&#39;TokenEconomy&#39;)
                else:
                    self.transactions+=con[1].execute(&#39;AgentPool&#39;)
            elif isinstance(con[1],UserGrowth):
                self.num_users+=con[1].execute()
            else:
                raise Exception(&#39;The condition was attached to an object that is neither a UserGrowth nor TransactionsManagement class!&#39;)        
    return None</code></pre>
</details>
</dd>
<dt id="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.initialise"><code class="name flex">
<span>def <span class="ident">initialise</span></span>(<span>self) â€‘>Â None</span>
</code></dt>
<dd>
<div class="desc"><p>Initialises the class. This action connects all objects to the right modules, that is
either the token economy itself or the agent pools.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def initialise(self)-&gt;None:
    &#34;&#34;&#34;
    Initialises the class. This action connects all objects to the right modules, that is
    either the token economy itself or the agent pools.
    &#34;&#34;&#34;
    if self.connect_to_token_economy:
        self.connector=self.dependencies[TokenEconomy]
        self.label=TokenEconomy
    else:
        self.label=AgentPool
        self.connector=self
    
    if self.users_controller!=None:
        self.users_controller.link(self.label,self.connector)   
        
    if self.transactions_controller!=None:
        self.transactions_controller.link(self.label,self.connector)
        
    for con in self.conditions_map:
        con[1].link(self.label,self.connector)
        #if the condition has no sim component, then connect to the current token economy
        if con[0].sim_component==None:
            con[0].sim_component=self.dependencies[TokenEconomy]
            
    self.initialised=True</code></pre>
</details>
</dd>
<dt id="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.reset"><code class="name flex">
<span>def <span class="ident">reset</span></span>(<span>self) â€‘>Â None</span>
</code></dt>
<dd>
<div class="desc"><p>Sets the iteration meter to 0 and resets
all controllers, including the ones inside conditions.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reset(self)-&gt;None:
    &#34;&#34;&#34;
    Sets the iteration meter to 0 and resets
    all controllers, including the ones inside conditions.

    &#34;&#34;&#34;
    self.iteration=0
    for con in self.conditions_map:
        con[1].reset()
        
    if self.users_controller!=None:
        self.users_controller.reset()
        
    if self.transactions_controller!=None:
        self.transactions_controller.reset()</code></pre>
</details>
</dd>
<dt id="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.test_integrity"><code class="name flex">
<span>def <span class="ident">test_integrity</span></span>(<span>self) â€‘>Â bool</span>
</code></dt>
<dd>
<div class="desc"><p>Tests the integrity of the controllers and the dependencies.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def test_integrity(self)-&gt;bool:
    &#34;&#34;&#34;
    Tests the integrity of the controllers and the dependencies.
    &#34;&#34;&#34;
    if self.dependencies[TokenEconomy]==None:
        return False
    try:
        if not self.users_controller.test_integrity():
            return False
    except:
        pass
    
    try:
        if not self.transactions_controller.test_integrity():
            return False
    except:
        pass
    
    return True</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="src.TokenLab.simulationcomponents" href="index.html">src.TokenLab.simulationcomponents</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Basic" href="#src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Basic">AgentPool_Basic</a></code></h4>
<ul class="">
<li><code><a title="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Basic.execute" href="#src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Basic.execute">execute</a></code></li>
<li><code><a title="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Basic.reset" href="#src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Basic.reset">reset</a></code></li>
<li><code><a title="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Basic.test_integrity" href="#src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Basic.test_integrity">test_integrity</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional" href="#src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional">AgentPool_Conditional</a></code></h4>
<ul class="two-column">
<li><code><a title="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.add_condition" href="#src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.add_condition">add_condition</a></code></li>
<li><code><a title="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.add_conditions" href="#src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.add_conditions">add_conditions</a></code></li>
<li><code><a title="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.execute" href="#src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.execute">execute</a></code></li>
<li><code><a title="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.initialise" href="#src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.initialise">initialise</a></code></li>
<li><code><a title="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.reset" href="#src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.reset">reset</a></code></li>
<li><code><a title="src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.test_integrity" href="#src.TokenLab.simulationcomponents.agentpoolclasses.AgentPool_Conditional.test_integrity">test_integrity</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>